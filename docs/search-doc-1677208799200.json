[{"title":"Architecture Overview","type":0,"sectionRef":"#","url":"/architecture-overview","content":"","keywords":""},{"title":"Core components​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#core-components","content":"At a glance, a basic and minimal nBold production environment (without operations/monitoring tools) would be comprised of these different elements: graph TB %% Nodes teams(Microsoft Teams client&lt;br /&gt;Desktop, web, mobile) apps(3rd-party apps&lt;br /&gt;Custom, Power Automate) webnlb(SSL, Web Proxy / NLB / Firewall&lt;br /&gt;Azure Front Door) subgraph webtier[Web pool] web1(Web #1&lt;br /&gt;Azure Container) web2(Web #2&lt;br /&gt;Azure Container) end subgraph apitier[Api pool] api1(Api #1&lt;br /&gt;Azure Container) api2(Api #2&lt;br /&gt;Azure Container) end subgraph jobstier[Jobs pool] scheduler(Scheduler&lt;br /&gt;Azure Container) jobs1(Job #1&lt;br /&gt;Azure Container) jobs2(Job #2&lt;br /&gt;Azure Container) end subgraph ectier[Events pool] ec1(Event Collector #1&lt;br /&gt;Azure Container) ec2(Event Collector #2&lt;br /&gt;Azure Container) end backingservicesnlb(NLB&lt;br /&gt;Azure NLB) subgraph backingservices[ ] redis[(Cache and jobs queuing&lt;br /&gt;Azure Cache for Redis)] postgresmain[(Configuration database&lt;br /&gt;Azure Database for PostgreSQL)] postgresevents[(Audit database&lt;br /&gt;Azure Database for PostgreSQL)] azurestorage[(Blob storage&lt;br /&gt;Azure Storage)] cosmosdb[(NoSQL database&lt;br /&gt;Azure Cosmos DB)] end %% Links teams --&gt;|OAuth/AD| webnlb apps --&gt;|OAuth/AD| webnlb backingservicesnlb --&gt; redis backingservicesnlb --&gt; postgresmain backingservicesnlb --&gt; ec1 backingservicesnlb --&gt; ec2 ec1 --&gt; postgresevents ec2 --&gt; postgresevents backingservicesnlb --&gt; azurestorage backingservicesnlb --&gt; cosmosdb web1 --&gt; backingservicesnlb web2 --&gt; backingservicesnlb api1 --&gt; backingservicesnlb api2 --&gt; backingservicesnlb webnlb --&gt; web1 webnlb --&gt; web2 webnlb --&gt; api1 webnlb --&gt; api2 jobs1 --&gt; backingservicesnlb jobs2 --&gt; backingservicesnlb scheduler --&gt; backingservicesnlb scheduler --&gt;|schedule| jobs1 scheduler --&gt;|schedule| jobs2 %% Styles classDef external fill:#9099d8, stroke-width:0px; class teams external class apps external classDef network fill:#90EE90, stroke-width:0px; class net network class backingservicesnlb network class apinlb network class webnlb network classDef containers fill:#ADD8E6, stroke-width:0px; class web1 containers class web2 containers class api1 containers class api2 containers class jobs1 containers class jobs2 containers class scheduler containers class ec1 containers class ec2 containers classDef azureservices fill:#FFFFE0, stroke:#000000, stroke-width:1px; class redis azureservices class postgresmain azureservices class postgresevents azureservices class azurestorage azureservices class cosmosdb azureservices Legend: graph TB ext(Client) net(Network component) cont(OCI / Docker container) az(Managed Azure service) classDef external fill:#9099d8, stroke-width:0px; class ext external classDef network fill:#90EE90, stroke-width:0px; class net network classDef containers fill:#ADD8E6, stroke-width:0px; class cont containers classDef azureservices fill:#FFFFE0, stroke-width:0px; class az azureservices Notes: Azure containers could be hosted on either Azure App Service or Azure Container InstancesDeployment could be executed manually, using our Terraform deployment project templates for Azure, or using any orchestrator such as Azure Kubernetes Service (AKS). "},{"title":"Monitoring components​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#monitoring-components","content":"In addition to the previous architecture diagram, here we're presenting the most common additional operations services, for auditing, uptime monitoring and APM (Application Performance Management): graph BT %% Nodes subgraph backingservices[ ] redis(Cache and jobs queuing&lt;br /&gt;Azure Cache for Redis) postgresmain(Configuration database&lt;br /&gt;Azure Database for PostgreSQL) postgresevents(Audit database&lt;br /&gt;Azure Database for PostgreSQL) end uptime(Uptime monitoring&lt;br /&gt;Monika) apptiers(Web, Api and Jobs pools&lt;br /&gt;Azure Container) redis(Cache and jobs queuing&lt;br /&gt;Azure Cache for Redis) redisexporter(Redis exporter&lt;br /&gt;Azure Container) bullexporter(Bull exporter&lt;br /&gt;Azure Container) pgexporter(PostgreSQL exporter&lt;br /&gt;Azure Container) metrics(Metrics collector&lt;br /&gt;Prometheus on Azure Container) metricsdashboard(Metrics Dashboard&lt;br /&gt;Grafana on Azure Container) apmdashboard(APM Dashboard&lt;br /&gt;Azure Application Insights) %% Links metrics --&gt; metricsdashboard uptime --&gt; apptiers uptime --&gt; metrics apptiers --&gt; metrics apptiers --&gt; apmdashboard redis --&gt; redisexporter redis --&gt; bullexporter redisexporter --&gt; metrics bullexporter --&gt; metrics postgresmain --&gt; pgexporter postgresevents --&gt; pgexporter pgexporter --&gt; metrics %% Styles classDef containers fill:#ADD8E6, stroke-width:0px; class apptiers containers class redisexporter containers class bullexporter containers class pgexporter containers class uptime containers class metrics containers class metricsdashboard containers classDef azureservices fill:#FFFFE0, stroke-width:0px; class apmdashboard azureservices class appinsights azureservices class redis azureservices class postgresmain azureservices class postgresevents azureservices tip Learn more out how to operate a nBold infrastructure using our operations manual, especially Updates management and monitoring "},{"title":"Design Principles​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#design-principles","content":"Here are the key tenets that drived the design of this architecture. "},{"title":"Security first​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#security-first","content":"We're enforcing maximum security at each level by applying zero-trust, even if it implies to perform advanced and complex technical operations. "},{"title":"Infrastructure as code​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#infrastructure-as-code","content":"All our infrastructure resources are defined by code, using the Terraform HCL language from HashiCorp, resulting in a consistent, reliable and controlled deployment process. "},{"title":"Self-contained​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#self-contained","content":"To guarantee data residency, the platform could be operated in a fully self-contained environment that doesn't rely on any external service. Technically, the solution could be executed in one single isolated Docker environment. "},{"title":"Scalability​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#scalability","content":"As a multi-tier platform, each tier (web, api, jobs...) could scale horizontally independently by increasing the number of containers with the same role. In addition, this whole architecture could be replicated across multiple Azure regions to allocate and distribute the workload across multiple environments. "},{"title":"Resiliency​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#resiliency","content":"All the operations are processed through message queues that brings advanced logging and retry capabilities in case of failure (Throttling, networking issue, Microsoft Graph bugs or unavailability…). "},{"title":"We don't trust external services​","type":1,"pageTitle":"Architecture Overview","url":"/architecture-overview#we-dont-trust-external-services","content":"Based on our experience, our design strategy regarding the Microsoft Graph may be summarized in one sentence:​ We don’t trust blindly the Microsoft Graph! "},{"title":"nBold Cloud vs Self-Hosted","type":0,"sectionRef":"#","url":"/cloud-vs-self-hosted","content":"nBold Cloud vs Self-Hosted What’s the difference between nBold Cloud and Self-Hosted? There is only ONE version of nBold. Both our nBold Cloud and our nBold Self-Hosted products are completely equal. There’s NO version with a better or more complete feature set. You get the same app, same compliance, same metrics and same commitment to respecting your privacy, security and compliance with both. Key differences Here are the key differences between nBold Cloud and nBold Self-Hosted: Cloud\tSelf-hostedHosting\tEasy and convenient. We manage everything for you so you don’t have to worry about anything. We take care of the installation, upgrades, containers, security, maintenance, uptime, stability, consistency, loading time and so on.\tYou do it all yourself. You need to get servers / containers and you need to install, maintain and manage nBold on servers / containers. You are responsible for installation, maintenance, upgrades, capacity, uptime, backup and so on. Storage\tWe keep your data on Microsoft Azure in multiple isolated regions for both resiliency and compliance.\tYou have full control and can host nBold on any servers / containers in any country that you wish. Host it on servers / containers on-premises or host it with any cloud provider wherever you want. Raw data\tYou can access all your data from our intuitive dashboard. N.B: You can only see the stats aggregated in the dashboard.\tHosting nBold yourself gives you the option to take the data directly from the database and import it to a data analysis tool of your choice. Network\tEverything is operated online and you only need an Internet access to access our secured cloud environment.\tThere is ZERO data transmitted between your environment (typically your own Azure tenant) and the nBold Cloud environment (nor with its subservice providers). Your environment is self-contained, isolated, and only exposed through a reverse proxy such as Nginx, Azure Front Door or Azure Application Gateway. As a matter of fact, you can even disable all outgoing access to the Internet, except for traffic between your environment and the Microsoft Identity Service and Microsoft Graph API endpoints. Costs\tWe rely on a subscription based model. See our pricing and plans.\tOur subscription model applies equally to self-hosted instances. Releases\tContinuously developed and improved with new features and frequent updates. See our changelog\tLatest features won't be immediately available (as opposed to security fixes) as they're battled-tested in the cloud before released to self-hosted environments, but you can expect a new release at least every month.","keywords":""},{"title":"Installation","type":0,"sectionRef":"#","url":"/installation","content":"","keywords":""},{"title":"Deployment overview​","type":1,"pageTitle":"Installation","url":"/installation#deployment-overview","content":"nBold is designed to be self-hosted from: A local or remote Docker serviceYour Microsoft Azure tenant Here is an overview of the different steps to deploy a nBold environment: graph LR %% Nodes subgraph cp[Setup common prerequisites] terraform(Install&lt;br /&gt;Terraform) projecttemplates(Get deployment&lt;br /&gt;projects templates) appreg(Register your app&lt;br /&gt;in Azure AD) end subgraph docker[Deploy to Docker] dockerprereq(Setup Docker&lt;br /&gt;prerequisites) dockerdeploy(Deploy) end subgraph azure[Deploy to Azure] azureprereq(Setup Azure&lt;br /&gt;rerequisites) azuredeploy(Deploy) end package(Create Microsoft&lt;br /&gt;Teams package) %% Styles classDef startend fill:#9099d8, stroke-width:0px; class s startend class e startend %% Links terraform --&gt; projecttemplates projecttemplates --&gt; appreg appreg --&gt; dockerprereq dockerprereq --&gt; dockerdeploy appreg --&gt; azureprereq azureprereq --&gt; azuredeploy dockerdeploy --&gt; package azuredeploy --&gt; package nBold Self-Hosted comes with batteries included! You don't have to be a Docker or Azure expert to run your own nBold platform! You should just have a basic understanding of the command-line and networking to successfully set up your own full-featured environment. This getting started tutorial will guide you through the different steps required to setup the minimal common prerequisites. "},{"title":"Next steps​","type":1,"pageTitle":"Installation","url":"/installation#next-steps","content":"Install the common prerequisites. "},{"title":"Running on Docker","type":0,"sectionRef":"#","url":"/installation/docker-deployment","content":"","keywords":""},{"title":"Docker prerequisites​","type":1,"pageTitle":"Running on Docker","url":"/installation/docker-deployment#docker-prerequisites","content":"tip To follow this tutorial, you'll need an installed and running Docker server. If your server doesn't come with Docker pre-installed, you can follow their docs to install it. "},{"title":"Initialize the project​","type":1,"pageTitle":"Running on Docker","url":"/installation/docker-deployment#initialize-the-project","content":"After cloning our Hosting repository, open the docker project directory: cd ./terraform/docker  Initialize the terraform project using the init command, which downloads a plugin that allows Terraform to interact with Docker. terraform init  When Terraform asks you to confirm type yes and press ENTER. "},{"title":"Minimal configuration​","type":1,"pageTitle":"Running on Docker","url":"/installation/docker-deployment#minimal-configuration","content":"nBold comes with safe defaults, but you still need to define some settings specific to your environment. To do so, open the variables.tf configuration file. It defines most of the configurable aspects of your environment. Locate these keys and define the appropriate value in the default field: variable &quot;WEB_PUBLICURL&quot; { description = &quot;Public URL of the web tier&quot; type = string default = &quot;&quot; } variable &quot;API_PUBLICURL&quot; { description = &quot;Public URL of the api tier&quot; type = string default = &quot;&quot; } variable &quot;MICROSOFT_AZURE_AD_APP_CLIENT_ID&quot; { description = &quot;Microsoft Azure AD app registration client ID.&quot; type = string default = &quot;&quot; } variable &quot;MICROSOFT_AZURE_AD_APP_CLIENT_SECRET&quot; { description = &quot;Microsoft Azure AD app registration client Secret.&quot; type = string default = &quot;&quot; }  For more information about all the available configuration settings, please refer to Configuration Reference "},{"title":"Deploy​","type":1,"pageTitle":"Running on Docker","url":"/installation/docker-deployment#deploy","content":"Now that you've defined your minimal configuration, you're ready to deploy your brand new nBold environment. Before executing your project, validate your configuration using the plan command. terraform plan  This command generates a human-readable version of your configuration and helps you validate the changes that are gonna be performed on your environment before actually executing it. Once validated, execute the plan using the apply command: terraform apply  You can now verify your installation by visiting http://localhost:8000/home in your web browser. Tip You can also the the list of running containers with: docker ps  Congrats! You've now provisioned a full-featured nBold environment. "},{"title":"Next steps​","type":1,"pageTitle":"Running on Docker","url":"/installation/docker-deployment#next-steps","content":"At this stage, you should have a basic installation of nBold going. The latest step is to generate your Microsoft Teams package "},{"title":"Customize Microsoft Teams package","type":0,"sectionRef":"#","url":"/microsoft-teams-package","content":"Customize Microsoft Teams package Start by downloading our latest package template from this URL or from the command line: mkdir -p packages/standalone &amp;&amp; cd packages/standalone curl https://assets.nbold.io/packages/io.nbold.standalone.self.zip -o io.nbold.standalone.self.zip Then unzip the package manually or from the command line: unzip io.nbold.standalone.self.zip Each package is comprised of the following files: manifest.json: The main package manifestes-es.json: Spanish localization filefr-fr.json: French localization fileit-it.json: Italian localization filecolor.png: The package color iconoutline.png: The package outline icon Then configure the manifest.json file by replacing these following placeholders with your actual configuration: [[MICROSOFT_TEAMS_APP_MANIFEST_ID]]: A unique id to uniquely identify your package, using UUID version 4 format, such as ea86caa9-2d39-477a-a9af-5f3f6a3829de. You can use this tool to generate a new unique one.[[MICROSOFT_TEAMS_APP_MANIFEST_PACKAGE_NAME]]: A unique name for your package. The recommended format is the Reverse domain name notation, such as com.example.MyProduct.[[NBOLD_APP_PUBLICURL]]: The public URL of your nBold service. by default, use https://app.salestim.io.[[MICROSOFT_TEAMS_APP_MANIFEST_VALID_DOMAINS]]: The list of domains the package is authorized to access. By default, use &quot;*.salestim.io&quot;,&quot;*.nbold.io&quot;.[[MICROSOFT_TEAMS_APP_MANIFEST_WEBAPPLICATIONINFO_ID]]: The nBold app Microsoft app registration client ID. By default, use 2a651f59-97ce-42bb-97d7-cf7a2af4b635.[[MICROSOFT_TEAMS_APP_MANIFEST_WEBAPPLICATIONINFO_RESOURCE]]: The nBold Microsoft app registration resource URL. By default, use api://app.salestim.io/2a651f59-97ce-42bb-97d7-cf7a2af4b635. In addition, you can customize the following other properties: version: The package version using the semver format, such as 1.0.0.name: short:full: description: short:full: icons: color:outline: accentColor: Save your updates. Then build your package by adding all the assets to the zip archive, manually or from the command line: zip io.nbold.standalone.self.zip *.json *.png tip The zip utility is not installed by default in most Linux distributions, but you can easily install it using your distribution package manager if you need it. sudo apt install zip You can now go to Microsoft Teams and upload the package as a custom app. Congrats! You can now use your customized nBold package from Microsoft Teams.","keywords":""},{"title":"References","type":0,"sectionRef":"#","url":"/references","content":"References","keywords":""},{"title":"Running on Azure","type":0,"sectionRef":"#","url":"/installation/azure-deployment","content":"","keywords":""},{"title":"Azure prerequisites​","type":1,"pageTitle":"Running on Azure","url":"/installation/azure-deployment#azure-prerequisites","content":"tip To follow this tutorial, you'll use the az Azure Command-Line Interface. If required, please refer to: How to install the Azure CLIGet started with Azure CLI "},{"title":"Initialize the project​","type":1,"pageTitle":"Running on Azure","url":"/installation/azure-deployment#initialize-the-project","content":"After cloning our Hosting repository, open the azure project directory: cd ./terraform/azure  Initialize the terraform project using the init command, which downloads a plugin that allows Terraform to interact with Azure. terraform init  When Terraform asks you to confirm type yes and press ENTER. "},{"title":"Minimal configuration​","type":1,"pageTitle":"Running on Azure","url":"/installation/azure-deployment#minimal-configuration","content":"nBold comes with safe defaults, but you still need to define some settings specific to your environment. To do so, open the variables.tf configuration file. It defines most of the configurable aspects of your environment. Locate these keys and define the appropriate value in the default field: variable &quot;WEB_PUBLICURL&quot; { description = &quot;Public URL of the web tier&quot; type = string default = &quot;&quot; } variable &quot;API_PUBLICURL&quot; { description = &quot;Public URL of the api tier&quot; type = string default = &quot;&quot; } variable &quot;MICROSOFT_AZURE_AD_APP_CLIENT_ID&quot; { description = &quot;Microsoft Azure AD app registration client ID.&quot; type = string default = &quot;&quot; } variable &quot;MICROSOFT_AZURE_AD_APP_CLIENT_SECRET&quot; { description = &quot;Microsoft Azure AD app registration client Secret.&quot; type = string default = &quot;&quot; }  For more information about all the available configuration settings, please refer to Configuration Reference "},{"title":"Deploy​","type":1,"pageTitle":"Running on Azure","url":"/installation/azure-deployment#deploy","content":"Now that you've defined your minimal configuration, you're ready to deploy your brand new nBold environment. Before executing your project, validate your configuration using the plan command. terraform plan  This command generates a human-readable version of your configuration and helps you validate the changes that are gonna be performed on your environment before actually executing it. Once validated, execute the plan using the apply command: terraform apply  You can now verify your installation by visiting http://YOUR_AZURE_PUBLIC_URL/home in your web browser. Tip You can also the the list of running containers with: docker ps  Congrats! You've now provisioned a full-featured nBold environment. "},{"title":"Next steps​","type":1,"pageTitle":"Running on Azure","url":"/installation/azure-deployment#next-steps","content":"At this stage, you should have a basic installation of nBold going. The latest step is to generate your Microsoft Teams package "},{"title":"Install prerequisites","type":0,"sectionRef":"#","url":"/installation/prerequisites","content":"","keywords":""},{"title":"Install Terraform​","type":1,"pageTitle":"Install prerequisites","url":"/installation/prerequisites#install-terraform","content":"Our deployment projects templates for both Docker and Azure rely on the infrastructure-as-code solution Terraform. Note For this tutorial, we assumes you're running a debian-based distro (such as ubuntu), either from a native Linux box, or WSL from Windows. For other platforms, see how to install terraform cli Before installing Terraform, ensure that your system is up to date, and you have the gnupg, software-properties-common, and curl packages installed. You will use these packages to verify HashiCorp's GPG signature, and install HashiCorp's Debian package repository. sudo apt-get update &amp;&amp; sudo apt-get install -y gnupg software-properties-common curl  Add the HashiCorp GPG key. curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add -  Add the official HashiCorp Linux repository. sudo apt-add-repository &quot;deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot;  Update apt to add the repository, and install the Terraform CLI. sudo apt-get update &amp;&amp; sudo apt-get install terraform  Check the installation with: terraform -v  "},{"title":"Get the deployment projects templates​","type":1,"pageTitle":"Install prerequisites","url":"/installation/prerequisites#get-the-deployment-projects-templates","content":"To get started quickly, clone locally the nBold Hosting repository as a starting point. It has everything you need to boot up your own nBold platform. mkdir salestim &amp;&amp; cd salestim git clone https://github.com/nboldhq/hosting.git cd ./hosting  From this repository, you'll find: A Terraform project to provision a nBold environment on your own Docker serverAnother Terraform project to provision a nBold environment on your own Azure tenant "},{"title":"Create a new app registration in Azure Active Directory​","type":1,"pageTitle":"Install prerequisites","url":"/installation/prerequisites#create-a-new-app-registration-in-azure-active-directory","content":"To enable nBold to securely access your Microsoft 365 environment through the Microsoft Graph APIs, the first step is to create a dedicated app registration. An Azure AD app registration identifies a third-party app such as nBold, and defines the permissions you wan to grant to it. To learn more, you can refer to How and why applications are added to Azure AD. To create a new app registration, follow these steps: Open your Azure Active Directory portalSelect App registrations from the left menuClick New registration from the top barGive the app a name:  nBold  Select the option Accounts in this organizational directory only, as you want to restrict access to nBold to users from your own tenant.Define the web redirection URLs according to your environment: https://[WEB_PUBLICURL]/auth/service_account/return_admin_consent https://[WEB_PUBLICURL]/auth/grant/return https://[WEB_PUBLICURL]/auth/openid/returnAdminConsent https://[WEB_PUBLICURL]/auth/openid/return  Click RegisterFrom the Overview menu, copy the Application (client) ID, and keep it as we're gonna reuse it later.Open the Authentication menuEnsure that the Access tokens (used for implicit flows) and ID tokens (used for implicit and hybrid flows) options are checked from the Implicit grant and hybrid flows section, and save your updates if required.Open the Certificates and secrets menu and click New client secret. A client secret is a kind of a password for your app, so manage it carefully.Give a name to your client secret such as: nBold client secret  Select the expiration option, and click AddCopy the Secret Value value (be careful, it will only be shown once), and keep it as we're gonna reuse it later. Be careful You should use the Secret Value, not the Secret ID! Open the API permissions from the left menu and click Add a permission from the top barSelect Microsoft Graph, then from the permissions list, select the appropriate permissions as described in our Permissions References documentation.Click Add permissionsThen click Grant admin consent for... then Yes You're done, you've created your app registration for the nBold app. You should also have saved for later the Application (client) ID and Client secret that we're gonna use in the next steps. Congrats! You're now ready to deploy your nBold environment. "},{"title":"Next steps​","type":1,"pageTitle":"Install prerequisites","url":"/installation/prerequisites#next-steps","content":"Just follow the appropriate guide for your target deployment environment: Docker DeploymentAzure Deployment "},{"title":"Services Reference","type":0,"sectionRef":"#","url":"/references/services-reference","content":"Services Reference 📆 Generated: Wed, 22 Feb 2023 15:17:11 GMT This document lists all the services supported by the platform. Each service is specified with: ID: Service internal identifier.Name: Service nameDescription: Service descriptionRoles: Specifies in which context (namely the role assigned to a container) the service will be executed. ID\tName\tDescription\tRolesweb_svc\tWeb\tWeb service hosting the Microsoft Teams web client.\tstandalone, web api_svc\tAPI\tAPI service, used both by the webclient and by third-party apps (Power Platform and Logic Apps connectors, custom apps...).\tstandalone, api jobs_svc\tJobs\tService executing the different background worker processes, both triggered by the scheduler service and executed on-demand\tstandalone, jobs back_office_svc\tBack Office\tService hosting the back office web client, used by the platform administrators to manage the platform\tstandalone, back-office scheduler_svc\tScheduler\tService scheduling and triggering the execution of jobs by the jobs service\tstandalone, scheduler","keywords":""},{"title":"Upgrading","type":0,"sectionRef":"#","url":"/upgrading","content":"","keywords":""},{"title":"Versioning strategy​","type":1,"pageTitle":"Upgrading","url":"/upgrading#versioning-strategy","content":"nBold follows semantic versioning format: MAJOR.MINOR.PATCH The default latest tag of our Docker images always refers to the latest stable release tag. You can also pin your version, for instance: nboldhq/app-platform:v2 pins the major version to 2 but allows minor and patch version upgradesnboldhq/app-platform:v2.2 pins the minor version to 2.2 but allows only patch upgrades Backward compatibility None of the functionality is backported to older versions. If you wish to get the latest bug fixes and security updates you need to upgrade to a newer version. About database schema Please note that database schema changes require running migrations when you're upgrading. However, we consider the schema as an internal API and therefore schema changes are in general not considered a breaking change. Version changes are documented in our Changelog. "},{"title":"Upgrading strategy​","type":1,"pageTitle":"Upgrading","url":"/upgrading#upgrading-strategy","content":"nBold offers two default options to manage upgrades in your environment when we're publishing a new release. "},{"title":"Live upgrade​","type":1,"pageTitle":"Upgrading","url":"/upgrading#live-upgrade","content":"The live update mode is ideal for non-production environments (such as QA, UAT, etc.) as you'll continuously receive all the new releases automatically. In this mode, you'll receive all our updates (features, fixes, patches...) as soon as they're released. Here's a sequence diagram of the live updates process: sequenceDiagram autonumber participant st as nBold&lt;br /&gt;Continuous Deployment participant acr as Your dedicated Azure&lt;br /&gt;Container Registry participant nonprod as Non-production&lt;br /&gt;containers st-&gt;&gt;acr: Publish updated image acr-&gt;&gt;nonprod: Triggers update Webhook nonprod-&gt;&gt;nonprod: Update image and restart Legend: After a new release has been published and tested in our nBold Cloud environments, our continuous deployment process pushes this updated image of the application directly to a dedicated Azure Container Registry (ACR) hosted in your own Azure tenant.ACR automatically triggers a webhook for each container instance of nBold you're runningAll your containers are updated automatically. "},{"title":"Staged upgrade​","type":1,"pageTitle":"Upgrading","url":"/upgrading#staged-upgrade","content":"The staged update mode is ideal for production environments as you'll be able to control the entire release process. In this mode, you'll receive updates between 2 weeks / 1 month after the public release in our own nBold Cloud environments, except for hotfixes and security patches that will be released at the same time as our own production environments. Here's a sequence diagram of the staged updates process: sequenceDiagram autonumber participant st as nBold participant gcr as GitHub Container Registry participant it as Your IT department participant nonprod as Non-production&lt;br /&gt;containers participant prod as Production containers st-&gt;&gt;gcr: Publish updated image st-&gt;&gt;it: Sending release notes it-&gt;&gt;it: Validate release notes and breaking changes it-&gt;&gt;nonprod: Start non-production update process nonprod-&gt;&gt;gcr: Pull the updated image nonprod-&gt;&gt;nonprod: Update image and restart it-&gt;&gt;nonprod: Validates the update it-&gt;&gt;prod: Start production update process prod-&gt;&gt;gcr: Pull the updated image prod-&gt;&gt;prod: Update image and restart it-&gt;&gt;prod: Validates the update Legend: After a new release has been published and tested in our nBold Cloud environments, our continuous deployment process pushes this updated image of the application to our secured GitHub Container Registry (GCR).We're sending the release notes to all our nBold Self-Hosted customers.Your IT department validates the release notes and its breaking changes.Once validated, your IT department starts the non-production update processThe non-production containers are pulling the updated nBold image from our GCRYour non-production containers are updated and restarted.Your IT department validates the update in non-production.Once validated in non-production, your IT department starts the production update processThe production containers are pulling the updated nBold image from our GCRYour production containers are updated and restarted.Your IT department validates the update in production. Specific technical and organizational constraints? We’re of course available to discuss with you what would be the best solution that encompass your specific technical and organizational constraints. "},{"title":"Monitoring","type":0,"sectionRef":"#","url":"/monitoring","content":"","keywords":""},{"title":"Uptime monitoring​","type":1,"pageTitle":"Monitoring","url":"/monitoring#uptime-monitoring","content":"To monitor their uptime, each container exposes an HTTP endpoint at /monitoring/ping, that answers to HEAD and GET requests with a 200 empty response. tip You can use the user-agent HTTP header to identify the monitoring service sending the requests. As of today, here are the uptime monitors we're supporting: MonikaAzure Front Door "},{"title":"Monika​","type":1,"pageTitle":"Monitoring","url":"/monitoring#monika","content":"Monika is the default option when running your own nBold platform using our sample Docker deployment project. A sample basic configuration file for monitoring the uptime and latency of the application containers would look like this: probes: - id: api_probe name: API ping monitoring endpoint description: Monitors the /monitoring/ping endpoint of the nBold api service interval: 10 requests: - method: HEAD url: 'http://salestim_api:3000/monitoring/ping' timeout: 7000 alerts: - query: response.status != 200 message: &quot;🔥 API Service is DOWN. Expected 200 but returned {{ response.status }}.&quot; incidentThreshold: 1 recoveryThreshold: 3 - id: web_probe name: Web ping monitoring endpoint description: Monitors the /monitoring/ping endpoint of the nBold web service interval: 10 requests: - method: HEAD url: 'http://salestim_web:3000/monitoring/ping' timeout: 7000 alerts: - query: response.status != 200 message: &quot;🔥 WEB Service is DOWN. Expected 200 but returned {{ response.status }}.&quot; incidentThreshold: 1 recoveryThreshold: 3 - id: jobs_probe name: JOBS ping monitoring endpoint description: Monitors the /monitoring/ping endpoint of the nBold jobs service interval: 10 requests: - method: HEAD url: 'http://salestim_jobs:3000/monitoring/ping' timeout: 7000 alerts: - query: response.status != 200 message: &quot;🔥 JOBS Service is DOWN. Expected 200 but returned {{ response.status }}.&quot; incidentThreshold: 1 recoveryThreshold: 3 - id: scheduler_probe name: SCHEDULER ping monitoring endpoint description: Monitors the /monitoring/ping endpoint of the nBold scheduler service interval: 10 requests: - method: HEAD url: 'http://salestim_scheduler:3000/monitoring/ping' timeout: 7000 alerts: - query: response.status != 200 message: &quot;🔥 SCHEDULER Service is DOWN. Expected 200 but returned {{ response.status }}.&quot; incidentThreshold: 1 recoveryThreshold: 3 notifications: - id: webhook_notification type: webhook data: url: 'https://YOUR_WEBHOOK_URL' - id: teams_notification type: teams data: url: 'https://YOUR_TEAMS_WEBHOOK_URL'  To tailor this example, you can refer to Monika's configuration documentation. "},{"title":"Azure Front Door​","type":1,"pageTitle":"Monitoring","url":"/monitoring#azure-front-door","content":"Azure Front Door comes with health probes that are used to perform load-balancing and achieve failover in case of a container malfunction. Keep in mind that strictly speaking, Azure Front Door is not an uptime monitoring app. To see a detailed Azure Front Door configuration, see our Azure resources reference documentation. You can also refer to the Azure Front Door Health probes documentation. Warning Since Azure Front Door has many edge environments globally, health probe volume for your backends can be quite high, ranging from 25 requests every minute to as high as 1200 requests per minute, depending on the configured probe frequency. For instance, with the default probe frequency of 30 seconds, the requests volume on your backend would be about 200 requests per minute. "},{"title":"Logging​","type":1,"pageTitle":"Monitoring","url":"/monitoring#logging","content":"Our platform comes with a configurable logging module that generates logs as configured by the Logging configuration. Persisting log files Log files persistence is not enabled by default and we recommend to use an external log ingestion solution in production environments. As nBold comes with a native connector for Microsoft Application Insights, the easiest and recommended way to collect and centralize all the logs and traces, is to enable and configure the connector from the Application Insights configuration. Application Insights is part of the Azure Monitor service and uses an Azure Log Analytics Workspace under the hood as a storage. From Application Insights, you can live-monitor the whole nBold platform, investigate issues using traces and events, detect performance bottlenecks... Learn more about Microsoft Application Insights. "},{"title":"Application Performance Monitoring (APM)​","type":1,"pageTitle":"Monitoring","url":"/monitoring#application-performance-monitoring-apm","content":"As nBold comes with a native connector for Microsoft Application Insights, the easiest and recommended way to collect and centralize APM metrics, is to enable and configure the connector from the Application Insights configuration. Application Insights is part of the Azure Monitor service and uses an Azure Log Analytics Workspace under the hood as a storage. From Application Insights, you can live-monitor the whole nBold platform, investigate issues using traces and events, detect performance bottlenecks... Learn more about Microsoft Application Insights. "},{"title":"Collecting metrics​","type":1,"pageTitle":"Monitoring","url":"/monitoring#collecting-metrics","content":""},{"title":"Metrics collector​","type":1,"pageTitle":"Monitoring","url":"/monitoring#metrics-collector","content":"The nBold platform relies on Prometheus to collect and centralize all its metrics. Prometheus is an open-source software application that is used for event monitoring. It collects metrics such as requests count, duration and exceptions from applications and records them in a time-series database. Prometheus is also used for monitoring CPU status and memory/disk-space usage so it can be used and be represented in a meaningful display. Prometheus has become widely known and used in software industries due to its open-source and ease of use. Prometheus is a stand alone and self containing application that run by pulling data from services using worker systems that runs periodically. "},{"title":"Collect application metrics​","type":1,"pageTitle":"Monitoring","url":"/monitoring#collect-application-metrics","content":"To expose their metrics, each SalesTIm container exposes an HTTP endpoint at /monitoring/metrics, that answers to GET requests with a 200 response, using the Prometheus exporter format. Exported metrics could be configured from the Prometheus Configuration options. Metrics exposed: Default metrics from prom-client.http_requests_total: Counter for total requests received, has labels route, method, statushttp_request_duration_seconds: - Duration of HTTP requests in seconds, has labels route, method, status Notes Standard nodejs exposed metrics are prefixed by st_The labels route and status are normalized: route: will normalize id like route paramsstatus: will normalize to status code family groups, like 2XX or 4XX. How to secure the metrics endpoint? In production, you can secure the /monitoring/metrics endpoint to prevent any technical information leak. To do so, define the PROMETHEUS_EXPORTER_AUTH_TOKEN property from the Prometheus Configuration options. tip A convenient way to generate a secure token is to use the openssl command, such as: # The rand command encodes the produced random bytes in base64. This encoding converts bytes to alphanumeric characters, including the characters `=`, `+`, and `/`. These characters are filtered to have passwords without special characters and prevent url encoding issues. It reduces the random character of the token a little bit, but is not a concern when the token is more than 10 characters. openssl rand -base64 29 | tr -d &quot;=+/&quot; | cut -c1-25  "},{"title":"Collect Redis cache metrics​","type":1,"pageTitle":"Monitoring","url":"/monitoring#collect-redis-cache-metrics","content":"Redis metrics can be exported by using a Redis Prometheus exporter container. Most items from the INFO command are exported, see Redis INFO command documentation for details. "},{"title":"Collect Redis queues metrics​","type":1,"pageTitle":"Monitoring","url":"/monitoring#collect-redis-queues-metrics","content":"nBold uses the Bull module to manage its asynchronous jobs. Bull is a Queue package for handling distributed jobs and messages in NodeJS. To monitor Bull queues, you can use a Bull Prometheus exporter container. Most items from the INFO command are exported, see Redis INFO command documentation for details. Metrics exposed:| Metric | type | description | |------------------------------|---------|-------------| | bull_queue_completed | counter | Total number of completed jobs | | bull_queue_complete_duration | summary | Processing time for completed jobs | | bull_queue_active | counter | Total number of active jobs (currently being processed) | | bull_queue_delayed | counter | Total number of jobs that will run in the future | | bull_queue_failed | counter | Total number of failed jobs | | bull_queue_waiting | counter | Total number of jobs waiting to be processed | "},{"title":"Collect uptime metrics​","type":1,"pageTitle":"Monitoring","url":"/monitoring#collect-uptime-metrics","content":"If you're using Monika to monitor your platform uptime, you can customize its container configuration to make it expose some useful metrics. To do so, you must customize Monika's container startup command to use the --prometheus, such as: # Run Monika in the background and expose its Prometheus metrics to the 3010 port. command = [&quot;monika&quot;, &quot;-c&quot;, &quot;/config/monika.yml&quot;, &quot;--prometheus&quot;, &quot;3010&quot;]  Of course, you can also use this technique to expose metrics from any Prometheus-compatible uptime monitoring solution. Metrics exposed: Default metrics from prom-clientmonika_request_status_code_info: (gauge) HTTP status codemonika_request_response_time_seconds: (histogram) Duration of probe request in secondsmonika_request_response_size_bytes: (gauge) Size of response size in bytesmonika_probes_total: (gauge) Total of all probe "},{"title":"Auditing​","type":1,"pageTitle":"Monitoring","url":"/monitoring#auditing","content":"To see the list au audited events, you can refer to the Events reference documentation, and look for events with the Tracking configuration: Enabled: trueAudit trail: true Exporting audit trails from the audit database Our Events reference documentation also specifies the mapping between an audited event and its representation in the audit database: Table: Tracking CodeColumns: Tracking Audited fields  "},{"title":"Configuration Reference","type":0,"sectionRef":"#","url":"/references/configuration-reference","content":"","keywords":""},{"title":"Platform's Services​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#platforms-services","content":"Platform's services configuration "},{"title":"Common App Configuration​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#common-app-configuration","content":"Defines common configuration for all the services  Environment Variable\tStatus\tDescriptionAPP_DEPLOY\tOptional ☑️\t(string) Arbitrary string to identify the current application deploy, such as uat, qa, production. Defaults to &quot;&quot;. APP_ROLE\tOptional ☑️\t(string) Defines the services that will be executed by the app. Could be standalone (in that case, all the services will be executed in parallel), web, api, jobs, scheduler. WARNING: The standalone role is NOT suitable for production environments. Defaults to standalone. APP_PORT\tOptional ☑️\t(number) Application server port. Defaults to the PORT environment variable if defined, or to 3000. LOG_LEVEL\tOptional ☑️\t(string) Logging level. Uses the npm logging levels error / warn / info / http / verbose / debug / silly (highest to lowest). Defaults to info. LOG_PERSISTENCY_ENABLED\tOptional ☑️\t(boolean) Enable logs persistency as files in the directory defined by LOG_PERSISTENCY_DIRECTORY. Defaults to false. LOG_PERSISTENCY_DIRECTORY\tOptional ☑️\t(string) Defines logs persistency directory location. Defaults to /logs. "},{"title":"Web Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#web-service","content":"Web service (Web application UI)  Environment Variable\tStatus\tDescriptionWEB_PUBLICURL\tOptional ☑️\t(string) Web server public URL. Defaults http://localhost. WEB_CDN_PUBLICURL\tOptional ☑️\t(string) Public URL of the CDN used by the web service to serve static assets. Defaults to &quot;&quot; (means that the web server is serving the static assets itself). WEB_SESSION_SECRET\tOptional ☑️\t(string) Secret string used to encrypt session data. Defaults to an UUID v4 string generated at runtime. WEB_TIMEOUT\tOptional ☑️\t(string) Web server requests timeout. Can be a string accepted by the ms (https://www.npmjs.com/package/ms) module. Defaults to 5s. "},{"title":"API Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#api-service","content":"API service (REST API)  Environment Variable\tStatus\tDescriptionAPI_PUBLICURL\tOptional ☑️\t(string) API server public URL. Defaults to http://localhost/api/v1.0. API_TIMEOUT\tOptional ☑️\t(string) API server requests timeout. Can be a string accepted by the ms (https://www.npmjs.com/package/ms) module. Defaults to 5s. "},{"title":"Scheduler Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#scheduler-service","content":"Scheduler service (Manages execution plans for scheduled jobs)  Environment Variable\tStatus\tDescriptionSCHEDULER_TIMEZONE\tOptional ☑️\t(string) Timezone used for scheduling. See https://en.wikipedia.org/wiki/List_of_tz_database_time_zones for valid values. Defaults to CET SCHEDULER_SETUP_ON_STARTUP\tOptional ☑️\t(boolean) Starts setup of backing services on startup. Defaults to true SCHEDULER_SERVICE_ACCOUNTS_TOKENS_RENEWAL_ENABLED\tOptional ☑️\t(boolean) Enable the RENEW_SERVICE_ACCOUNT_TOKENS scheduled job. Defaults to true SCHEDULER_SERVICE_ACCOUNTS_TOKENS_RENEWAL_SCHEDULE\tOptional ☑️\t(string) Job schedule using the CRON syntax (See https://en.wikipedia.org/wiki/Cron). Defaults to 0 6 * * 0 (At 06:00 on every Sunday). SCHEDULER_MICROSOFT_TEAMS_PERMANENT_MEMBERSHIP_POLICY_ENABLED\tOptional ☑️\t(boolean) Enable the PERMANENT_MEMBERSHIP_POLICY scheduled job. Defaults to true SCHEDULER_MICROSOFT_TEAMS_PERMANENT_MEMBERSHIP_POLICY_SCHEDULE\tOptional ☑️\t(string) Job schedule using the CRON syntax (See https://en.wikipedia.org/wiki/Cron). Defaults to */15 * * * * (At every 15th minute). SCHEDULER_MICROSOFT_TEAMS_LIFECYCLE_POLICY_ENABLED\tOptional ☑️\t(boolean) Enable the LIFECYCLE_POLICY scheduled job. Defaults to true SCHEDULER_MICROSOFT_TEAMS_LIFECYCLE_POLICY_SCHEDULE\tOptional ☑️\t(string) Job schedule using the CRON syntax (See https://en.wikipedia.org/wiki/Cron). Defaults to 0 9 * * 0 (At 09:00 on every Sunday). SCHEDULER_QUEUES_RETENTION_POLICY_ENABLED\tOptional ☑️\t(boolean) Enable the QUEUES_RETENTION scheduled job. Defaults to true SCHEDULER_QUEUES_RETENTION_POLICY_SCHEDULE\tOptional ☑️\t(string) Job schedule using the CRON syntax (See https://en.wikipedia.org/wiki/Cron). Defaults to *0 1 * * * (Every day at 01:00). SCHEDULER_MICROSOFT_GRAPH_SUBSCRIPTIONS_MANAGER_ENABLED\tOptional ☑️\t(boolean) Enable the GRAPH_SUBSCRIPTIONS_MANAGER scheduled job. Defaults to true SCHEDULER_MICROSOFT_GRAPH_SUBSCRIPTIONS_MANAGER_SCHEDULE\tOptional ☑️\t(string) Job schedule using the CRON syntax (See https://en.wikipedia.org/wiki/Cron). Defaults to *0 2 * * * (Every day at 02:00). "},{"title":"Jobs Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#jobs-service","content":"Jobs service (Scheduled and on-demand background tasks)  Environment Variable\tStatus\tDescriptionJOBS_POLICY_RETENTION_GRACE_PERIOD\tOptional ☑️\t(number) Grace retention period for all jobs, defined in ms. Default to &quot;2419200000&quot; (28 days). "},{"title":"Required Backing Services​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#required-backing-services","content":"Required backing services configuration "},{"title":"Redis​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#redis","content":"Redis service used for caching, distributed state and message queuing  Environment Variable\tStatus\tDescriptionREDIS_HOST\tOptional ☑️\t(string) Redis server host. Defaults to localhost. REDIS_PORT\tOptional ☑️\t(number) Redis server port. Defaults to 6379. REDIS_DATABASE_INDEX\tOptional ☑️\t(number) Redis server database index. Defaults to 0. REDIS_TLS\tOptional ☑️\t(boolean) Defines if the application must use TLS to connect to the redis server. Defaults to false. REDIS_TIMEOUT\tOptional ☑️\t(number) Redis connection timeout in ms. Defaults to 30000. REDIS_PASSWORD\tOptional ☑️\t(string) Password used to connect to Redis server. Defaults to &quot;&quot;. REDIS_KEYS_PREFIX\tOptional ☑️\t(string) Namespace prefix for all redis keys managed by the application. Defaults to st:. "},{"title":"Application Database​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#application-database","content":"Application data storage  Environment Variable\tStatus\tDescriptionDB_APPLICATION_CLIENT\tOptional ☑️\t(string) Database engine client among mysql / mariadb / postgres / mssql (Currently only postgres is officially supported). Defaults to postgres. DB_APPLICATION_DIALECT_OPTIONS\tOptional ☑️\t(string) Database engine specific dialect options as a stringified json. Defaults to {&quot;ssl&quot;: false}. DB_APPLICATION_HOST\tOptional ☑️\t(string) Database server host. Defaults to localhost. DB_APPLICATION_PORT\tOptional ☑️\t(number) Database server port. Defaults to 5432. DB_APPLICATION_DATABASE_NAME\tOptional ☑️\t(string) Database name. Defaults to st_application_db. DB_APPLICATION_USER\tOptional ☑️\t(string) Database user name. Defaults to st_application_db_user. DB_APPLICATION_PASSWORD\tOptional ☑️\t(string) Database password. Defaults to st_application_db_password. DB_APPLICATION_LOGGING\tOptional ☑️\t(boolean) Enable database advanced logging. Defaults to false. "},{"title":"Microsoft Cosmos DB​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-cosmos-db","content":"Nosql database used to manage user and organization data.  Environment Variable\tStatus\tDescriptionMICROSOFT_COSMOSDB_ENDPOINT\tOptional ☑️\t(string) Microsoft Cosmos DB URL. Defaults to https://localhost:8081. MICROSOFT_COSMOSDB_SECRET\tOptional ☑️\t(string) Secret key used to connect to Microsoft Cosmos DB. Defaults to the default Cosmos DB emulator secret key. MICROSOFT_COSMOSDB_DATABASE\tOptional ☑️\t(string) Name of the Microsoft Cosmos DB database (Has to be include four collections named: users, customers, requests and apps). Defaults to st_application_cosmosdb. MICROSOFT_COSMOSDB_CONTAINER_PARTITION_KEY\tOptional ☑️\t(string) Property acting as a partition key in each collection. Defaults to /tenantId. MICROSOFT_COSMOSDB_MAXRETRYATTEMPTSONTHROTTLEDREQUESTS\tOptional ☑️\t(number) Maximum number of retries in the case where the request fails because the Azure Cosmos DB service has applied rate limiting on the client. Defaults to 9. MICROSOFT_COSMOSDB_MAXRETRYWAITTIMEINSECONDS\tOptional ☑️\t(number) Maximum retry time in seconds for the Azure Cosmos DB service. Defaults to 60. MICROSOFT_COSMOSDB_DISABLE_SSL_VERIFICATION\tOptional ☑️\t(boolean) Disable SSL verification when connecting to Cosmos DB. WARNING: This option should NOT be set to true in production. Defaults to false. "},{"title":"Microsoft Azure Storage​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-azure-storage","content":"Blob storage used for storing images (templates pictures).  Environment Variable\tStatus\tDescriptionMICROSOFT_AZURE_STORAGE_CONNECTION_STRING\tOptional ☑️\t(string) Microsoft Azure Storage connection string. Defaults to the default Azure Storage emulator connection string. MICROSOFT_AZURE_STORAGE_TEMPLATES_PICTURES_CONTAINER\tOptional ☑️\t(string) Name of the container that hosts catalog templates pictures. Defaults to st_templatespictures_container. "},{"title":"Microsoft Identity Platform​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-identity-platform","content":"Microsoft Identity Platform  Environment Variable\tStatus\tDescriptionMICROSOFT_IDENTITY_PLATFORM_URL\tOptional ☑️\t(string) Base URL of the Microsoft identity platform (May vary in non global environments such as GCC / DOD, or when using a proxy such as GraphShield). Defaults to https://login.microsoftonline.com. "},{"title":"Microsoft Azure AD​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-azure-ad","content":"Microsoft Azure AD  Environment Variable\tStatus\tDescriptionMICROSOFT_AZURE_AD_APP_CLIENT_ID\tRequired ✅\t(string) Microsoft Azure AD app registration client ID. No defaults. MICROSOFT_AZURE_AD_APP_CLIENT_SECRET\tRequired ✅\t(string) Microsoft Azure AD app registration client secret. No defaults. MICROSOFT_AZURE_AD_APP_LEGACY_CLIENT_ID\tRequired ✅\t(string) Legacy Microsoft Azure AD app registration client ID. No defaults. MICROSOFT_AZURE_AD_APP_LEGACY_CLIENT_SECRET\tRequired ✅\t(string) Legact Microsoft Azure AD app registration client secret. No defaults. "},{"title":"Microsoft Graph​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-graph","content":"Microsoft Graph  Environment Variable\tStatus\tDescriptionMICROSOFT_GRAPH_URL\tOptional ☑️\t(string) Base URL of the Microsoft Graph service (May vary in non global environments such as GCC / DOD, or when using a proxy such as GraphShield). Defaults to https://graph.microsoft.com. MICROSOFT_GRAPH_DEFAULT_SCOPE\tOptional ☑️\t(string) Default requested scope during authentication to the Microsoft Graph service in client credential authentication mode. Defaults to https://graph.microsoft.com/.default. "},{"title":"Optional Backing Services​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#optional-backing-services","content":"Optional backing services that can be used to enhance the platform capabilities. "},{"title":"Mail Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#mail-service","content":"When you want to send approval and other notifications emails from your own tenant using the Microsoft Graph instead of our own mailing service.  Environment Variable\tStatus\tDescriptionMAIL_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with an email service for notifications. Defaults to &quot;false&quot;. MAIL_PROVIDER\tOptional ☑️\t(string) Mailer service (As of today, only &quot;sendgrid&quot; is supported). Defaults to &quot;sendgrid&quot;. MAIL_SECRET\tOptional ☑️\t(string) Secret key used to authenticate against the mailer service. Defaults to &quot;&quot;. MAIL_FROM_ADDRESS\tOptional ☑️\t(string) Default email sender (FROM:). Defaults to &quot;notifications@salestim.io&quot;. MAIL_ACTION_MSG_ORIGINATOR\tOptional ☑️\t(string) Message originator used to enable outlook actionalbe messages (as used by the team creation request approval process). Defaults to &quot;&quot;. "},{"title":"Connected Apps Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#connected-apps-service","content":"Connected apps service configuration  Environment Variable\tStatus\tDescriptionCONNECTEDAPPS_SERVICE_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with our connected apps platform. Defaults to &quot;true&quot;. CONNECTEDAPPS_SERVICE_URL\tOptional ☑️\t(string) Connected apps server root URL. Defaults to &quot;https://connected-apps.nbold.io/connected-apps&quot;. CONNECTEDAPPS_TRAY_URL\tOptional ☑️\t(string) Connected apps tray embedded root URL. Defaults to &quot;https://tray.io/graphql&quot;. CONNECTEDAPPS_TRAY_TOKEN\tOptional ☑️\t(string) Connected apps tray embedded master token "},{"title":"Audit Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#audit-service","content":"Audit service configuration  Environment Variable\tStatus\tDescriptionAUDIT_SERVICE_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with the auditing service. Defaults to false. AUDIT_SERVICE_URL\tOptional ☑️\t(string) Events collector root URL. Defaults to http://localhost:8001. AUDIT_SERVICE_PORT\tOptional ☑️\t(number) Auditing service port. Defaults to 8010. AUDIT_SERVICE_AUTH_HEADER\tOptional ☑️\t(string) HTTP header used to pass the authentication token to the events collector service. Defaults to X-Auth-Token. AUDIT_SERVICE_AUTH_CLIENT_TOKEN\tOptional ☑️\t(string) Token used to authenticate from clients against the events collector service for tracking operations. Defaults to &quot;&quot;. AUDIT_SERVICE_AUTH_SERVER_TOKEN\tOptional ☑️\t(string) Token used to authenticate from servers (s2s) against the events collector service for tracking operations. Defaults to &quot;&quot;. AUDIT_SERVICE_AUTH_ADMIN_TOKEN\tOptional ☑️\t(string) Token used to authenticate from servers (s2s) against the events collector service for administration operations. Defaults to &quot;&quot;. AUDIT_SERVICE_TRACK_ENDPOINT\tOptional ☑️\t(string) Tracking endpoint of the events collector service. Defaults to /api/v1/s2s/event. AUDIT_SERVICE_TRACK_METHOD\tOptional ☑️\t(string) HTTP verb used to post events. Defaults to POST. "},{"title":"Analytics Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#analytics-service","content":"Analytics service configuration  Environment Variable\tStatus\tDescriptionANALYTICS_SERVICE_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with the analytics service. Defaults to true. ANALYTICS_SERVICE_URL\tOptional ☑️\t(string) analytics service URL. Defaults to http://localhost:5001. ANALYTICS_SERVICE_PORTAL\tOptional ☑️\t(string) URL of the analytics portal. Defaults to http://localhost:3000/analytics. ANALYTICS_SERVICE_SETUP_TOKEN\tOptional ☑️\t(string) An UUID token used to signify that an instance has permissions to create the initial User. This is created upon the first launch of Metabase, by the first instance; once used, it is cleared out, never to be used again. Defaults to ``. ANALYTICS_SERVICE_ENCRYPTION_SECRET\tOptional ☑️\t(string) When set, this will encrypt database credentials stored in the application database. Requirement: minimum 16 characters base64-encoded string. Defaults to ``. ANALYTICS_SERVICE_EMBEDDING_SECRET_KEY\tOptional ☑️\t(string) analytics service server secret used to sign embedded reports JWT tokens. Defaults to ``. ANALYTICS_SERVICE_USER\tOptional ☑️\t(string) Login of the user used to access the list of available analytics. Defaults to ``. ANALYTICS_SERVICE_PASSWORD\tOptional ☑️\t(string) Password of the user used to access the list of available analytics. Defaults to ``. ANALYTICS_SERVICE_SETUP_INTERNAL_COLLECTION_NAME\tOptional ☑️\t(string) Name of the collection owning the available analytics for internal use (accessible from the back-office). Defaults to internal. ANALYTICS_SERVICE_SETUP_EXTERNAL_COLLECTION_NAME\tOptional ☑️\t(string) Name of the collection owning the available analytics for external use (accessible by end-users). Defaults to external. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_CLIENT\tOptional ☑️\t(string) Database engine client among mysql / mariadb / postgres / mssql (Currently only postgres is officially supported). Defaults to postgres. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_DIALECT_OPTIONS\tOptional ☑️\t(string) Database engine specific dialect options as a stringified json. Defaults to {&quot;ssl&quot;: false}. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_HOST\tOptional ☑️\t(string) Database server host. Defaults to localhost. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_PORT\tOptional ☑️\t(number) Database server port. Defaults to 5432. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_SSL_MODE\tOptional ☑️\t(string) Specify ssl policy. Defaults to require. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_DATABASE_NAME\tOptional ☑️\t(string) Database name. Defaults to st_audit_db. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_USER\tOptional ☑️\t(string) Database user name. Defaults to st_audit_db_user. ANALYTICS_SERVICE_SETUP_APPLICATION_DB_PASSWORD\tOptional ☑️\t(string) Database password. Defaults to st_audit_db_password. ANALYTICS_SERVICE_SETUP_AUDIT_DB_CLIENT\tOptional ☑️\t(string) Database engine client among mysql / mariadb / postgres / mssql (Currently only postgres is officially supported). Defaults to postgres. ANALYTICS_SERVICE_SETUP_AUDIT_DB_DIALECT_OPTIONS\tOptional ☑️\t(string) Database engine specific dialect options as a stringified json. Defaults to {&quot;ssl&quot;: false}. ANALYTICS_SERVICE_SETUP_AUDIT_DB_HOST\tOptional ☑️\t(string) Database server host. Defaults to localhost. ANALYTICS_SERVICE_SETUP_AUDIT_DB_PORT\tOptional ☑️\t(number) Database server port. Defaults to 5432. ANALYTICS_SERVICE_SETUP_AUDIT_DB_SSL_MODE\tOptional ☑️\t(string) Specify ssl policy. Defaults to require. ANALYTICS_SERVICE_SETUP_AUDIT_DB_DATABASE_NAME\tOptional ☑️\t(string) Database name. Defaults to st_audit_db. ANALYTICS_SERVICE_SETUP_AUDIT_DB_USER\tOptional ☑️\t(string) Database user name. Defaults to st_audit_db_user. ANALYTICS_SERVICE_SETUP_AUDIT_DB_PASSWORD\tOptional ☑️\t(string) Database password. Defaults to st_audit_db_password. "},{"title":"Search service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#search-service","content":"Search service  Environment Variable\tStatus\tDescriptionSEARCH_SERVICE_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with the search service. Defaults to false. SEARCH_SERVICE_URL\tOptional ☑️\t(string) Search service URL. Defaults to http://localhost:20001. SEARCH_SERVICE_HOST\tOptional ☑️\t(string) Search service host. Defaults to &quot;&quot;. SEARCH_SERVICE_PORT\tOptional ☑️\t(string) Search service port. Defaults to &quot;20001&quot;. SEARCH_SERVICE_MASTER_KEY\tOptional ☑️\t(string) Master key used to perform admin operations on the search service. Defaults to &quot;&quot;. "},{"title":"Intercom Service​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#intercom-service","content":"Intercom service  Environment Variable\tStatus\tDescriptionINTERCOM_SERVICE_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with Intercom for in-app end-users chat and support. Defaults to false. INTERCOM_SERVICE_CRYPTO_SECRET\tOptional ☑️\t(string) Secret key used to generate hmac digest to secure connectivity between the client ans the Intercom service. Defaults to &quot;&quot;. INTERCOM_SERVICE_APP_ID\tOptional ☑️\t(string) Intercom application ID used for authentication against the Intercom service. Defaults to &quot;&quot;. INTERCOM_SERVICE_ACCESS_TOKEN\tOptional ☑️\t(string) Intercom access token used for server-side authentication against the Intercom service. Defaults to &quot;&quot;. "},{"title":"Microsoft Commercial Marketplace​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-commercial-marketplace","content":"Service used by the SAAS environment to enable the &quot;Purchase from Microsoft Teams&quot; scenarios integrated with the Microsoft Commercial Marketplace.  Environment Variable\tStatus\tDescriptionMICROSOFT_COMMERCIAL_MARKETPLACE_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with the Microsoft Marketplace. Defaults to &quot;false&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_LANDING_PAGE_URL\tOptional ☑️\t(string) URL of the Microsoft Marketplace landing page. Defaults to http://localhost/microsoft-marketplace/order. MICROSOFT_COMMERCIAL_MARKETPLACE_CONNECTION_WEBHOOK_URL\tOptional ☑️\t(string) URL of the Microsoft Marketplace webhook URL. Defaults to http://localhost/api/v1.0/microsoft_marketplace/notifications_handler. MICROSOFT_COMMERCIAL_MARKETPLACE_TENANT_ID\tOptional ☑️\t(string) Tenant ID used for authentication to the Microsoft Marketplace landing page. Defaults to &quot;&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_FRONTEND_APP_ID\tOptional ☑️\t(string) Microsoft Azure client ID used for authentication to the Microsoft Marketplace landing page. Defaults to &quot;&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_FRONTEND_APP_SECRET\tOptional ☑️\t(string) Secret instrumentation key used server-side to authenticate against the Microsoft Marketplace Front-end service. Defaults to &quot;&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_BACKEND_APP_ID\tOptional ☑️\t(string) Microsoft Azure client ID used for interactions with the Microsoft Marketplace API. Defaults to &quot;&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_BACKEND_APP_SECRET\tOptional ☑️\t(string) Secret instrumentation key used server-side to authenticate against the Microsoft Marketplace back-end service. Defaults to &quot;&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_PUBLISHER_ID\tOptional ☑️\t(string) Publisher ID from the Microsoft Marketplace registration. Defaults to &quot;&quot;. MICROSOFT_COMMERCIAL_MARKETPLACE_OFFER_ID\tOptional ☑️\t(string) Offer ID from the Microsoft Marketplace registration. Defaults to &quot;&quot;. "},{"title":"Instrumentation​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#instrumentation","content":"Instrumentation "},{"title":"Prometheus​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#prometheus","content":"Metrics exporter for Prometheus   Environment Variable\tStatus\tDescriptionPROMETHEUS_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable the /monitoring/metrics endpoint to expose platform's key metrics and be polled by a Prometheus server. Defaults to false. PROMETHEUS_EXPORTER_AUTH_TOKEN\tOptional ☑️\t(string) Token used to authenticate against the Prometheus exporter endpoint /monitoring/metrics through the X-Auth-Token HTTP header or the token url parameter (for instance: /monitoring/metrics?token=YOUR_AUTH_TOKEN). Defaults to &quot;&quot;. PROMETHEUS_EXPORTER_COLLECT_DEFAULT_METRICS\tOptional ☑️\t(boolean) Collect and expose all the default node.js metrics to Prometheus. Defaults to true. PROMETHEUS_EXPORTER_COLLECT_GARBAGE_COLLECTOR_METRICS\tOptional ☑️\t(boolean) Collect and expose node.js garbage collector metrics to Prometheus. Defaults to false. "},{"title":"Microsoft Application Insights​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-application-insights","content":"Microsoft Application Insights  Environment Variable\tStatus\tDescriptionMICROSOFT_APPINSIGHTS_INTEGRATION_ENABLED\tOptional ☑️\t(boolean) Enable integration with Azure Application Insights service. Defaults to false. MICROSOFT_APPINSIGHTS_LIVE_METRICS_ENABLED\tOptional ☑️\t(boolean) Enable collection and push of live metrics to the Azure Application Insights service. Defaults to false. MICROSOFT_APPINSIGHTS_INSTRUMENTATION_SECRET\tOptional ☑️\t(string) Secret instrumentation key used server-side to authenticate against the Azure Application Insights service. Defaults to &quot;&quot;. MICROSOFT_APPINSIGHTS_CONNECTION_STRING\tOptional ☑️\t(string) Connection string used client-side to connect to the Azure Application Insights service . Defaults to &quot;&quot;. "},{"title":"Advanced Tuning​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#advanced-tuning","content":"Advanced Tuning "},{"title":"Microsoft Teams Team Templates Business Rules​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-teams-team-templates-business-rules","content":"Business rules for Microsoft Teams team templates  Environment Variable\tStatus\tDescriptionBR_MICROSOFT_TEAMS_TEAM_TEMPLATES_APPROVERS_MAX\tOptional ☑️\t(number) Maximum number of users that could be defined as approvers in a template. Defaults to 10. BR_MICROSOFT_TEAMS_TEAM_TEMPLATES_PERMANENTOWNERS_MAX\tOptional ☑️\t(number) Maximum number of users that could be defined as permanent owners in a template. Defaults to 20. BR_MICROSOFT_TEAMS_TEAM_TEMPLATES_PERMANENTMEMBERS_MAX\tOptional ☑️\t(number) Maximum number of users that could be defined as permanent members in a template. Defaults to 20. "},{"title":"Microsoft Teams Team Creation Requests Business Rules​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-teams-team-creation-requests-business-rules","content":"Business rules for Microsoft Teams team creation requests  Environment Variable\tStatus\tDescriptionBR_MICROSOFT_TEAMS_TEAM_CREATION_RESUESTS_REQUESTEDOWNERS_MAX\tOptional ☑️\t(number) Maximum number of users that could be invited as owners as part of a new team creation request. Defaults to 20. BR_MICROSOFT_TEAMS_TEAM_CREATION_RESUESTS_REQUESTEDMEMBERS_MAX\tOptional ☑️\t(number) Maximum number of users that could be invited as members as part of a new team creation request. Defaults to 20. "},{"title":"Webhooks​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#webhooks","content":"Webhooks configuration  Environment Variable\tStatus\tDescriptionWEBHOOKS_USER_AGENT\tOptional ☑️\t(string) HTTP user agent passed as a header with each request. Defaults to nBold-Webhook/v5.3.0. WEBHOOKS_RETRY_INTERVAL\tOptional ☑️\t(number) Interval in ms between two attempts. Defaults to 10000. WEBHOOKS_MAX_RETRY\tOptional ☑️\t(number) Maximum number of retry before failing. Namely if it is set to 2, the module will try 3 times before failing. Defaults to 2. WEBHOOKS_TIMEOUT\tOptional ☑️\t(number) Timeout in ms before aborting the request if the server is unresponsive. Defaults to 5000. "},{"title":"Microsoft Graph Rate Limiter​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-graph-rate-limiter","content":"Microsoft Graph rate limiter configuration  Environment Variable\tStatus\tDescriptionMICROSOFT_GRAPH_LIMITER_MAXCONCURRENT\tOptional ☑️\t(number) How many jobs can be executing at the same time. Consider setting a value instead of leaving it null, it can help your application's performance, especially if you think the limiter's queue might get very long. Defaults to null (unlimited) MICROSOFT_GRAPH_LIMITER_MINTIME\tOptional ☑️\t(number) How long to wait in ms after launching a job before launching another one. Defaults to 50. MICROSOFT_GRAPH_LIMITER_HIGHWATER\tOptional ☑️\t(number) How long can the queue be? When the queue length exceeds that value, the selected strategy is executed to shed the load. Defaults to null (unlimited). MICROSOFT_GRAPH_LIMITER_STRATEGY\tOptional ☑️\t(number) Which strategy to use when the queue gets longer than the high water mark (See https://www.npmjs.com/package/bottleneck#strategies). Strategies are never executed if highWater is null. Defaults to 1 (leak). MICROSOFT_GRAPH_LIMITER_PENALTY\tOptional ☑️\t(number) The penalty value in ms used by the BLOCK strategy. Defaults to 5000. MICROSOFT_GRAPH_LIMITER_RESERVOIR\tOptional ☑️\t(number) How many jobs can be executed before the limiter stops executing jobs. If reservoir reaches 0, no jobs will be executed until it is no longer 0. New jobs will still be queued up. Defaults to null (unlimited). MICROSOFT_GRAPH_LIMITER_RESERVOIRREFRESHINTERVAL\tOptional ☑️\t(number) Every reservoirRefreshInterval milliseconds, the reservoir value will be automatically updated to the value of reservoirRefreshAmount. The reservoirRefreshInterval value should be a multiple of 250. Defaults to null (unlimited). MICROSOFT_GRAPH_LIMITER_RESERVOIRREFRESHAMOUNT\tOptional ☑️\t(number) The value to set reservoir to when reservoirRefreshInterval is in use. Defaults to null (disabled). MICROSOFT_GRAPH_LIMITER_RESERVOIRINCREASEINTERVAL\tOptional ☑️\t(number) Every reservoirIncreaseInterval milliseconds, the reservoir value will be automatically incremented by reservoirIncreaseAmount. The reservoirIncreaseInterval value should be a multiple of 250. Defaults to null (disabled) MICROSOFT_GRAPH_LIMITER_RESERVOIRINCREASEAMOUNT\tOptional ☑️\t(number) The increment applied to reservoir when reservoirIncreaseInterval is in use. Defaults to null (disabled). MICROSOFT_GRAPH_LIMITER_RESERVOIRINCREASEMAXIMUM\tOptional ☑️\t(number) The maximum value that reservoir can reach when reservoirIncreaseInterval is in use. Defaults to null (disabled). "},{"title":"Microsoft Planner Rate Limiter​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-planner-rate-limiter","content":"Microsoft Planner rate limiter configuration  Environment Variable\tStatus\tDescriptionMICROSOFT_PLANNER_LIMITER_MAXCONCURRENT\tOptional ☑️\t(number) How many jobs can be executing at the same time. Consider setting a value instead of leaving it null, it can help your application's performance, especially if you think the limiter's queue might get very long. Defaults to null (unlimited) MICROSOFT_PLANNER_LIMITER_MINTIME\tOptional ☑️\t(number) How long to wait in ms after launching a job before launching another one. Defaults to 50. MICROSOFT_PLANNER_LIMITER_HIGHWATER\tOptional ☑️\t(number) How long can the queue be? When the queue length exceeds that value, the selected strategy is executed to shed the load. Defaults to null (unlimited). MICROSOFT_PLANNER_LIMITER_STRATEGY\tOptional ☑️\t(number) Which strategy to use when the queue gets longer than the high water mark (See https://www.npmjs.com/package/bottleneck#strategies). Strategies are never executed if highWater is null. Defaults to 1 (leak). MICROSOFT_PLANNER_LIMITER_PENALTY\tOptional ☑️\t(number) The penalty value in ms used by the BLOCK strategy. Defaults to 5000. MICROSOFT_PLANNER_LIMITER_RESERVOIR\tOptional ☑️\t(number) How many jobs can be executed before the limiter stops executing jobs. If reservoir reaches 0, no jobs will be executed until it is no longer 0. New jobs will still be queued up. Defaults to null (unlimited). MICROSOFT_PLANNER_LIMITER_RESERVOIRREFRESHINTERVAL\tOptional ☑️\t(number) Every reservoirRefreshInterval milliseconds, the reservoir value will be automatically updated to the value of reservoirRefreshAmount. The reservoirRefreshInterval value should be a multiple of 250. Defaults to null (unlimited). MICROSOFT_PLANNER_LIMITER_RESERVOIRREFRESHAMOUNT\tOptional ☑️\t(number) The value to set reservoir to when reservoirRefreshInterval is in use. Defaults to null (disabled). MICROSOFT_PLANNER_LIMITER_RESERVOIRINCREASEINTERVAL\tOptional ☑️\t(number) Every reservoirIncreaseInterval milliseconds, the reservoir value will be automatically incremented by reservoirIncreaseAmount. The reservoirIncreaseInterval value should be a multiple of 250. Defaults to null (disabled) MICROSOFT_PLANNER_LIMITER_RESERVOIRINCREASEAMOUNT\tOptional ☑️\t(number) The increment applied to reservoir when reservoirIncreaseInterval is in use. Defaults to null (disabled). MICROSOFT_PLANNER_LIMITER_RESERVOIRINCREASEMAXIMUM\tOptional ☑️\t(number) The maximum value that reservoir can reach when reservoirIncreaseInterval is in use. Defaults to null (disabled). "},{"title":"Microsoft Cosmos DB Rate Limiter​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#microsoft-cosmos-db-rate-limiter","content":"Microsoft Cosmos DB rate limiter configuration  Environment Variable\tStatus\tDescriptionMICROSOFT_COSMOSDB_LIMITER_MAXCONCURRENT\tOptional ☑️\t(number) How many jobs can be executing at the same time. Consider setting a value instead of leaving it null, it can help your application's performance, especially if you think the limiter's queue might get very long. Defaults to null (unlimited) MICROSOFT_COSMOSDB_LIMITER_MINTIME\tOptional ☑️\t(number) How long to wait in ms after launching a job before launching another one. Defaults to 50. MICROSOFT_COSMOSDB_LIMITER_HIGHWATER\tOptional ☑️\t(number) How long can the queue be? When the queue length exceeds that value, the selected strategy is executed to shed the load. Defaults to null (unlimited). MICROSOFT_COSMOSDB_LIMITER_STRATEGY\tOptional ☑️\t(number) Which strategy to use when the queue gets longer than the high water mark (See https://www.npmjs.com/package/bottleneck#strategies). Strategies are never executed if highWater is null. Defaults to 1 (leak). MICROSOFT_COSMOSDB_LIMITER_PENALTY\tOptional ☑️\t(number) The penalty value in ms used by the BLOCK strategy. Defaults to 5000. MICROSOFT_COSMOSDB_LIMITER_RESERVOIR\tOptional ☑️\t(number) How many jobs can be executed before the limiter stops executing jobs. If reservoir reaches 0, no jobs will be executed until it is no longer 0. New jobs will still be queued up. Defaults to null (unlimited). MICROSOFT_COSMOSDB_LIMITER_RESERVOIRREFRESHINTERVAL\tOptional ☑️\t(number) Every reservoirRefreshInterval milliseconds, the reservoir value will be automatically updated to the value of reservoirRefreshAmount. The reservoirRefreshInterval value should be a multiple of 250. Defaults to null (unlimited). MICROSOFT_COSMOSDB_LIMITER_RESERVOIRREFRESHAMOUNT\tOptional ☑️\t(number) The value to set reservoir to when reservoirRefreshInterval is in use. Defaults to null (disabled). MICROSOFT_COSMOSDB_LIMITER_RESERVOIRINCREASEINTERVAL\tOptional ☑️\t(number) Every reservoirIncreaseInterval milliseconds, the reservoir value will be automatically incremented by reservoirIncreaseAmount. The reservoirIncreaseInterval value should be a multiple of 250. Defaults to null (disabled) MICROSOFT_COSMOSDB_LIMITER_RESERVOIRINCREASEAMOUNT\tOptional ☑️\t(number) The increment applied to reservoir when reservoirIncreaseInterval is in use. Defaults to null (disabled). MICROSOFT_COSMOSDB_LIMITER_RESERVOIRINCREASEMAXIMUM\tOptional ☑️\t(number) The maximum value that reservoir can reach when reservoirIncreaseInterval is in use. Defaults to null (disabled). "},{"title":"Tests​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#tests","content":"Unit and integration tests configuration "},{"title":"Integration tests​","type":1,"pageTitle":"Configuration Reference","url":"/references/configuration-reference#integration-tests","content":"Integration tests configuration  Environment Variable\tStatus\tDescriptionSCHEDULER_INTEGRATION_TESTS_ENABLED\tOptional ☑️\t(boolean) Enable the integration_tests_triggered scheduled job. Defaults to false SCHEDULER_INTEGRATION_TESTS_SCHEDULE\tOptional ☑️\t(string) Job schedule using the CRON syntax (See https://en.wikipedia.org/wiki/Cron). Defaults to 0 6 * * 0 (At 06:00 on every Sunday). "},{"title":"nBold Events Documentation","type":0,"sectionRef":"#","url":"/references/events-reference","content":"","keywords":""},{"title":"Connected Apps​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps","content":""},{"title":"Connected apps opened​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-opened","content":"ID: connected_apps_opened Description: When a user has opened the connected apps modal Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps server started​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-server-started","content":"ID: connected_apps_server_started Description: When a connected apps served has started Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps server stopped​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-server-stopped","content":"ID: connected_apps_server_stopped Description: When a connected apps served has stopped Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solution instance installed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solution-instance-installed","content":"ID: user_connected_apps_solution_instance_installed Description: When a user has installed a connected apps solution instance Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solution instance configured​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solution-instance-configured","content":"ID: user_connected_apps_solution_instance_configured Description: When a user has configured a connected apps solution instance Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solution instance enabled​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solution-instance-enabled","content":"ID: user_connected_apps_solution_instance_enabled Description: When a user has enabled a connected apps solution instance Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solution instance uninstalled​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solution-instance-uninstalled","content":"ID: user_connected_apps_solution_instance_uninstalled Description: When a user has uninstalled a connected apps solution instance Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solution instance upgraded​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solution-instance-upgraded","content":"ID: user_connected_apps_solution_instance_upgraded Description: When a user has upgraded a connected apps solution instance Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps category viewed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-category-viewed","content":"ID: user_connected_apps_category_viewed Description: When a user has viewed a connected apps category Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solutions search​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solutions-search","content":"ID: user_connected_apps_solutions_search Description: When a user has searched for a connected apps solution Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Connected apps solution viewed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#connected-apps-solution-viewed","content":"ID: user_connected_apps_solution_viewed Description: When a user has viewed a solution Category: connected-apps Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Jobs​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#jobs","content":""},{"title":"Scheduled job completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#scheduled-job-completed","content":"ID: scheduled_job_run_completed Description: When a scheduled job has been executed and is done Category: jobs Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Graph Subscriptions​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-graph-subscriptions","content":""},{"title":"Graph subscriptions renewal completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#graph-subscriptions-renewal-completed","content":"ID: microsoft_graph_subscriptions_renewal_completed Description: When the Graph subscriptions renewal job is done for a specific tenant Category: microsoft-graph-subscriptions Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: scheduled_jobs) Database table: evt_microsoft_graph_subscriptions_renewal_completed Database columns: _timestampeventn_ctx_event_idstatuserror_codeerror_message Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Graph subscriptions created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#graph-subscriptions-created","content":"ID: microsoft_graph_subscription_created Description: When the Graph subscriptions job has created a new subscription Category: microsoft-graph-subscriptions Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: graph_subscriptions) Database table: evt_microsoft_graph_subscription_created Database columns: _timestampeventn_ctx_event_idsubscription_idsubscription_expirationresourcechange_type Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Graph subscriptions notification received​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#graph-subscriptions-notification-received","content":"ID: microsoft_graph_subscription_notification_received Description: When the Graph subscriptions job has received a new notification about a resource Category: microsoft-graph-subscriptions Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: graph_subscriptions) Database table: evt_microsoft_graph_subscription_notification_received Database columns: _timestampeventn_ctx_event_idsubscription_idsubscription_expirationnotification_idnotification_change_typenotification_resource Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Graph subscriptions lifecycle notification received​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#graph-subscriptions-lifecycle-notification-received","content":"ID: microsoft_graph_subscription_lifecycle_notification_received Description: When the Graph subscriptions job has received a new notification about a subscription's lifecycle Category: microsoft-graph-subscriptions Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: graph_subscriptions) Database table: evt_microsoft_graph_subscription_lifecycle_notification_received Database columns: _timestampeventn_ctx_event_idsubscription_idsubscription_expirationevent Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Identity​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-identity","content":""},{"title":"Microsoft Identity Access Token Refreshed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-identity-access-token-refreshed","content":"ID: microsoft_identity_access_token_refreshed Description: When a Microsoft Identity access token has been refreshed Category: microsoft-identity Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_identity_access_token_refreshed Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Identity Access Token Refresh Failed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-identity-access-token-refresh-failed","content":"ID: microsoft_identity_access_token_refresh_failed Description: When a Microsoft Identity access token refresh has failed Category: microsoft-identity Payload schema: No schema Logging: ✅ enabled (Log level: warn) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_identity_access_token_refresh_failed Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Lists​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-lists","content":""},{"title":"Microsoft Teams list tab cloned​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-list-tab-cloned","content":"ID: microsoft_teams_list_tab_cloned Description: When a Microsoft Teams list tab has been cloned Category: microsoft-lists Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams list created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-list-created","content":"ID: microsoft_teams_list_created Description: When a Microsoft Teams list has been created Category: microsoft-lists Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams list item created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-list-item-created","content":"ID: microsoft_teams_list_item_created Description: When a Microsoft Teams list item has been created Category: microsoft-lists Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams list view created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-list-view-created","content":"ID: microsoft_teams_list_view_created Description: When a Microsoft Teams list view has been created Category: microsoft-lists Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace","content":""},{"title":"Microsoft Marketplace subscription plan updated​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-plan-updated","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_plan_changed Description: When a Microsoft Marketplace subscription plan has been updated Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace subscription quantity updated​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-quantity-updated","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_quantity_changed Description: When a Microsoft Marketplace subscription quantity has been updated Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace subscription renewed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-renewed","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_renewed Description: When a Microsoft Marketplace subscription has been renewed Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace subscription suspended​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-suspended","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_suspended Description: When a Microsoft Marketplace subscription has been suspended Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace subscription unsubscribed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-unsubscribed","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_unsubscribed Description: When a Microsoft Marketplace subscription has been unsubscribed Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace subscription reinstated​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-reinstated","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_reinstated Description: When a Microsoft Marketplace subscription has been reinstated Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Marketplace subscription unknown action detected​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-marketplace-subscription-unknown-action-detected","content":"ID: MICROSOFT_COMMERCIAL_MARKETPLACE_subscription_unknown_action_detected Description: When an unknown Microsoft Marketplace subscription action has been detected Category: microsoft-marketplace Payload schema: No schema Logging: ✅ enabled (Log level: error) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Office​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-office","content":""},{"title":"Microsoft Teams Office tab cloned​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-office-tab-cloned","content":"ID: microsoft_teams_office_tab_cloned Description: When a Microsoft Teams Office tab has been cloned Category: microsoft-office Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Onenote​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-onenote","content":""},{"title":"Microsoft Teams OneNote tab cloned​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-onenote-tab-cloned","content":"ID: microsoft_teams_onenote_tab_cloned Description: When a Microsoft Teams OneNote tab has been cloned Category: microsoft-onenote Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams OneNote notebook copy failed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-onenote-notebook-copy-failed","content":"ID: microsoft_teams_onenote_notebook_copy_failed Description: When a Microsoft Teams OneNote notebook copy has failed Category: microsoft-onenote Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams OneNote notebook created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-onenote-notebook-created","content":"ID: microsoft_teams_onenote_notebook_created Description: When a Microsoft Teams OneNote notebook has been created Category: microsoft-onenote Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Planner​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-planner","content":""},{"title":"Microsoft Teams Planner tab cloned​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-planner-tab-cloned","content":"ID: microsoft_teams_planner_tab_cloned Description: When a Microsoft Teams Planner tab has been cloned Category: microsoft-planner Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Planner plan created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-planner-plan-created","content":"ID: microsoft_planner_plan_created Description: When a Microsoft Planner plan has been created Category: microsoft-planner Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Planner bucket created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-planner-bucket-created","content":"ID: microsoft_planner_bucket_created Description: When a Microsoft Planner bucket has been created Category: microsoft-planner Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Planner task created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-planner-task-created","content":"ID: microsoft_planner_task_created Description: When a Microsoft Planner task has been created Category: microsoft-planner Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Admin Consent​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-admin-consent","content":""},{"title":"Microsoft Teams admin consent success​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-admin-consent-success","content":"ID: microsoft_teams_admin_consent_success Description: When an administrator has successfully granted consent to a Microsoft Teams service account Category: microsoft-teams-admin-consent Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_teams_admin_consent_success Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams admin consent error​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-admin-consent-error","content":"ID: microsoft_teams_admin_consent_error Description: When an administrator has failed to grant consent to a Microsoft Teams service account Category: microsoft-teams-admin-consent Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_teams_admin_consent_error Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams App​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-app","content":""},{"title":"Microsoft Teams app context loaded​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-app-context-loaded","content":"ID: microsoft_teams_app_context_loaded Description: When a user loads the Microsoft Teams app Category: microsoft-teams-app Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams teams searched​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-teams-searched","content":"ID: microsoft_teams_teams_searched Description: When a user starts a search for teams from the Microsoft Teams app Category: microsoft-teams-app Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: search) Database table: evt_microsoft_teams_teams_searched Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams team creation requests opened from the Microsoft Teams app​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-team-creation-requests-opened-from-the-microsoft-teams-app","content":"ID: microsoft_teams_team_creation_requests_opened Description: When a user opens the team creation requests audit trail Category: microsoft-teams-app Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams team creation request created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-team-creation-request-created","content":"ID: microsoft_teams_team_creation_request_created Description: When a user creates a new team creation request from the Microsoft Teams app Category: microsoft-teams-app Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Approval​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-approval","content":""},{"title":"Team creation approval triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-creation-approval-triggered","content":"ID: team_creation_approval_triggered Description: When a team creation approval workflow is triggered Category: microsoft-teams-approval Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Team creation approval requested​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-creation-approval-requested","content":"ID: team_creation_approval_requested Description: When a team creation approval workflow is requested Category: microsoft-teams-approval Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: team_creation_approval) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams team creation approval email sent​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-team-creation-approval-email-sent","content":"ID: microsoft_teams_team_creation_approval_email_sent Description: When a Microsoft Teams team creation approval email is sent Category: microsoft-teams-approval Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Team creation approved​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-creation-approved","content":"ID: team_creation_approved Description: When a team creation was approved from an approval workflow Category: microsoft-teams-approval Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: team_creation_approval) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Team creation rejected​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-creation-rejected","content":"ID: team_creation_rejected Description: When a team creation was rejected from an approval workflow Category: microsoft-teams-approval Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: team_creation_approval) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Apps​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-apps","content":""},{"title":"Microsoft Teams app installed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-app-installed","content":"ID: microsoft_teams_app_installed Description: When a Microsoft Teams app is installed Category: microsoft-teams-apps Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Lifecycle Policy​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-lifecycle-policy","content":""},{"title":"Lifecycle policy control triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#lifecycle-policy-control-triggered","content":"ID: microsoft_teams_lifecycle_policy_control_triggered Description: When the lifecycle policy control job is triggered Category: microsoft-teams-lifecycle-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ✅ enabled (Plan: &quot;0 9 * * 0&quot;) "},{"title":"Lifecycle policy control organization run triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#lifecycle-policy-control-organization-run-triggered","content":"ID: microsoft_teams_lifecycle_policy_control_organization_run_triggered Description: When the lifecycle policy control job is triggered for an organization Category: microsoft-teams-lifecycle-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Permanent lifecycle control completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permanent-lifecycle-control-completed","content":"ID: microsoft_teams_lifecycle_policy_control_organization_run_completed Description: When the lifecycle policy control job is done for a specific tenant Category: microsoft-teams-lifecycle-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Team inactivity detected​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-inactivity-detected","content":"ID: microsoft_teams_team_inactive Description: When a team is detected as inactive Category: microsoft-teams-lifecycle-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: undefined) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Team expiration detected​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-expiration-detected","content":"ID: microsoft_teams_team_expired Description: When a team is detected as inactive and the grace period has ended Category: microsoft-teams-lifecycle-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: undefined) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Messages​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-messages","content":""},{"title":"permission denied to acces channel messages on Graph API​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permission-denied-to-acces-channel-messages-on-graph-api","content":"ID: acces_messages_denied Description: When a user try to acces channel message without permission Category: microsoft-teams-messages Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Permanent Membership Policy​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-permanent-membership-policy","content":""},{"title":"Permanent membership policy control triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permanent-membership-policy-control-triggered","content":"ID: microsoft_teams_permanent_membership_policy_control_triggered Description: When the permenent membership policy control job is triggered Category: microsoft-teams-permanent-membership-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ✅ enabled (Plan: &quot;/15 * * *&quot;) "},{"title":"Permanent membership policy control organization run triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permanent-membership-policy-control-organization-run-triggered","content":"ID: microsoft_teams_permanent_membership_policy_control_organization_run_triggered Description: When the permenent membership policy control job is triggered for an organization Category: microsoft-teams-permanent-membership-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Permanent membership policy control completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permanent-membership-policy-control-completed","content":"ID: microsoft_teams_permanent_membership_policy_control_completed Description: When the permenent membership policy control job is done for a specific tenant Category: microsoft-teams-permanent-membership-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: microsoft_teams_permanent_membership_policy) Database table: evt_microsoft_teams_permanent_membership_policy_control_completed Database columns: _timestampeventn_ctx_event_idstatuserror_codeerror_message Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Permanent membership policy team user invited​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permanent-membership-policy-team-user-invited","content":"ID: microsoft_teams_permanent_membership_policy_team_user_invited Description: When the permanent membership policy control job has invited a user to a team (as a member or as an owner) Category: microsoft-teams-permanent-membership-policy Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: policies) Database table: evt_microsoft_teams_permanent_membership_policy_team_user_invited Database columns: _timestampeventn_ctx_event_iduser_iduser_display_nameteam_idteam_display_namerole Organization webhooks: ✅ enabled (Category: permanent_membership_policy) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Permanent membership policy channel user invited​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#permanent-membership-policy-channel-user-invited","content":"ID: microsoft_teams_permanent_membership_policy_channel_user_invited Description: When the permanent membership policy control job has invited a user to a channel (as a member or as an owner) Category: microsoft-teams-permanent-membership-policy Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: policies) Database table: evt_microsoft_teams_permanent_membership_policy_channel_user_invited Database columns: _timestampeventn_ctx_event_iduser_iduser_display_nameteam_idteam_display_namechannel_idchannel_display_namerole Organization webhooks: ✅ enabled (Category: undefined) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Service Account​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-account","content":""},{"title":"Microsoft Teams Service Accounts Tokens Renewal Triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-accounts-tokens-renewal-triggered","content":"ID: microsoft_teams_service_accounts_tokens_renewal_triggered Description: When a Microsoft Teams Service Accounts Tokens Renewal job is triggered Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ✅ enabled (Plan: &quot;0 6 * * 0&quot;) "},{"title":"Microsoft Teams Service Accounts Tokens Renewal Organization Run Triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-accounts-tokens-renewal-organization-run-triggered","content":"ID: microsoft_teams_service_accounts_tokens_renewal_organization_run_triggered Description: When a Microsoft Teams Service Accounts Tokens Renewal job is triggered for a specific organization Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams service account registration success​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-account-registration-success","content":"ID: microsoft_teams_service_account_registation_success Description: When a user has successfully registered a Microsoft Teams service account Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams service account registration error​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-account-registration-error","content":"ID: microsoft_teams_service_account_registation_error Description: When a user has failed to register a Microsoft Teams service account Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams service account deletion success​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-account-deletion-success","content":"ID: microsoft_teams_service_account_deletion_success Description: When a user has successfully deleted a Microsoft Teams service account Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams service account deletion error​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-account-deletion-error","content":"ID: microsoft_teams_service_account_deletion_error Description: When a user has failed to delete a Microsoft Teams service account Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams service account tokens renewal completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-service-account-tokens-renewal-completed","content":"ID: microsoft_teams_service_account_tokens_renewal_completed Description: When the Microsoft Teams service account tokens renewal has completed Category: microsoft-teams-service-account Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Signin​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-signin","content":""},{"title":"Microsoft Teams signin context loaded​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-signin-context-loaded","content":"ID: microsoft_teams_signin_context_loaded Description: When a user loads the Microsoft Teams signin component Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams SSO signin success​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-sso-signin-success","content":"ID: microsoft_teams_sso_signin_success Description: When a user successfully signed in from Microsoft Teams using SSO Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams SSO signin error​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-sso-signin-error","content":"ID: microsoft_teams_sso_signin_error Description: When an error occured while a user signed in from Microsoft Teams using SSO Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams SSO signin authorization flow success​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-sso-signin-authorization-flow-success","content":"ID: microsoft_teams_sso_signin_authorization_flow_success Description: When a user was granted the appropriate permissions from Microsoft Teams using SSO Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams SSO signin authorization flow error​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-sso-signin-authorization-flow-error","content":"ID: microsoft_teams_sso_signin_authorization_flow_error Description: When an error occured while a user was trying to be granted the appropriate permissions from Microsoft Teams using SSO Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams interactive signin success​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-interactive-signin-success","content":"ID: microsoft_teams_interactive_signin_success Description: When a user successfully signed in from Microsoft Teams using an interactive flow Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams interactive signin error​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-interactive-signin-error","content":"ID: microsoft_teams_interactive_signin_error Description: When an error occured while a user tried to sign in from Microsoft Teams using an interactive flow Category: microsoft-teams-signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ❌ disabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Teams Template Catalog​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-teams-template-catalog","content":""},{"title":"Microsoft Teams team template created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-team-template-created","content":"ID: microsoft_teams_team_template_created Description: When a Microsoft Teams team template is created Category: microsoft-teams-teams-template-catalog Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_teams_team_template_created Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams team template updated​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-team-template-updated","content":"ID: microsoft_teams_team_template_updated Description: When a Microsoft Teams team template is updated Category: microsoft-teams-teams-template-catalog Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_teams_team_template_updated Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams team template deleted​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-team-template-deleted","content":"ID: microsoft_teams_team_template_deleted Description: When a Microsoft Teams team template is deleted Category: microsoft-teams-teams-template-catalog Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_microsoft_teams_team_template_deleted Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Microsoft Teams Teams​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#microsoft-teams-teams","content":""},{"title":"Team provisioning triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-provisioning-triggered","content":"ID: team_provisioning_triggered Description: When a user requests a new team Category: microsoft-teams-teams Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Team created​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-created","content":"ID: team_created Description: When a team has been created Category: microsoft-teams-teams Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: undefined) System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Team provisioning completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-provisioning-completed","content":"ID: team_provisioning_completed Description: When the provisioning of a team has been completed Category: microsoft-teams-teams Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: team) System webhooks: ✅ enabled (URL: &quot;https://prod-104.westeurope.logic.azure.com:443/workflows/2404b31f94f14db4b8b0f5055b86a484/triggers/manual/paths/invoke?api-version=2016-06-01&amp;sp=%2Ftriggers%2Fmanual%2Frun&amp;sv=1.0&amp;sig=XJsOT190B7SF6NVER7pGKe5MCsq0NjhwrN_yjOrszFY&quot;) Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Team template attached​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-template-attached","content":"ID: team_template_attached Description: When a template has been attached to a team Category: microsoft-teams-teams Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Team deletion detected​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#team-deletion-detected","content":"ID: team_deletion_detected Description: When the deletion of a team has been detected Category: microsoft-teams-teams Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Template deletion detected​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#template-deletion-detected","content":"ID: template_deletion_detected Description: When the deletion of a template has been detected Category: microsoft-teams-teams Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Miro​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#miro","content":""},{"title":"Miro tab cloned​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#miro-tab-cloned","content":"ID: miro_tab_cloned Description: When a Miro tab has been cloned Category: miro Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: tabs) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Organizations​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#organizations","content":""},{"title":"Organizations enrichment triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#organizations-enrichment-triggered","content":"ID: organizations_enrichment_triggered Description: When an organizations enrichment has been triggered Category: organizations Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Organization enrichment triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#organization-enrichment-triggered","content":"ID: organization_enrichment_triggered Description: When an organization enrichment has been triggered Category: organizations Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Rbac​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#rbac","content":""},{"title":"RBAC settings updated​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#rbac-settings-updated","content":"ID: rbac_settings_updated Description: A user has updated the role-based access control settings Category: rbac Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_rbac_settings_updated Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Remote Objects​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#remote-objects","content":""},{"title":"Remote object updated​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#remote-object-updated","content":"ID: remote_object_updated Description: When a remote object has been updated Category: remote-objects Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: remote_objects) Database table: evt_remote_object_updated Database columns: Organization webhooks: ✅ enabled (Category: remote_objects) System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Reporting​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#reporting","content":""},{"title":"Analytics opened​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#analytics-opened","content":"ID: analytics_opened Description: Analytics opened Category: reporting Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: analytics) Database table: evt_analytics_opened Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Retention Policy​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#retention-policy","content":""},{"title":"Queues retention policy control triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#queues-retention-policy-control-triggered","content":"ID: queues_retention_policy_control_triggered Description: When queues retention policy control job is triggered Category: retention-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ✅ enabled (Plan: &quot;0 1 * * *&quot;) "},{"title":"Queue retention policy control completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#queue-retention-policy-control-completed","content":"ID: queue_retention_policy_control_completed Description: When a queue retention policy control job is completed Category: retention-policy Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Server​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#server","content":""},{"title":"Server instance starting​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#server-instance-starting","content":"ID: server_starting Description: When a server instance is starting Category: server Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Server instance startup aborted​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#server-instance-startup-aborted","content":"ID: server_startup_aborted Description: When a server instance startup has been aborted Category: server Payload schema: No schema Logging: ✅ enabled (Log level: error) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Server instance started​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#server-instance-started","content":"ID: server_startedDescription: When a server instance has startedCategory: serverPayload schema:  { &quot;type&quot;: &quot;object&quot;, &quot;keys&quot;: { &quot;loaded_services_count&quot;: { &quot;type&quot;: &quot;number&quot;, &quot;flags&quot;: { &quot;presence&quot;: &quot;required&quot; }, &quot;rules&quot;: [ { &quot;name&quot;: &quot;min&quot;, &quot;args&quot;: { &quot;limit&quot;: 0 } } ] } } }  Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Server instance stopping​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#server-instance-stopping","content":"ID: server_stopping Description: When a server instance is stopping Category: server Payload schema: No schema Logging: ✅ enabled (Log level: warn) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Server instance stopped​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#server-instance-stopped","content":"ID: server_stopped Description: When a server instance has stopped Category: server Payload schema: No schema Logging: ✅ enabled (Log level: warn) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Services​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#services","content":""},{"title":"Service account refresh tokens expired​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-account-refresh-tokens-expired","content":"ID: service_account_refresh_token_expired Description: When a service account access token is detected as expired, and that it can't be refreshed using a refresh token that has expired Category: services Payload schema: No schema Logging: ✅ enabled (Log level: error) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: scheduled_jobs) Database table: evt_service_account_refresh_token_expired Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service account tokens renewal completed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-account-tokens-renewal-completed","content":"ID: service_account_token_renewal_completed Description: When the service account tokens renewal job has renewed a service account tokens Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: scheduled_jobs) Database table: evt_service_account_token_renewal_completed Database columns: _timestampeventn_ctx_event_idstatuserror_codeerror_message Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service account missing permissions​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-account-missing-permissions","content":"ID: service_account_missing_permissions Description: When the service account is trying to perform an operation that requires permissions it has not been granted for Category: services Payload schema: No schema Logging: ✅ enabled (Log level: error) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service account missing licenses​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-account-missing-licenses","content":"ID: service_account_missing_licenses Description: When the service account is trying to perform an operation that requires a license it has not been assigned Category: services Payload schema: No schema Logging: ✅ enabled (Log level: error) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Services starting​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#services-starting","content":"ID: services_starting Description: When a server instance is starting its services Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Services started​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#services-started","content":"ID: services_started Description: When a server instance has started its services Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service starting​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-starting","content":"ID: service_starting Description: When a service is starting Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service started​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-started","content":"ID: service_started Description: When a service has been started Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service stopping​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-stopping","content":"ID: service_stopping Description: When a service is stopping Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Service stopped​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#service-stopped","content":"ID: service_stopped Description: When a service has stopped Category: services Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Services stopping​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#services-stopping","content":"ID: services_stopping Description: When a server instance is stopping its services Category: services Payload schema: No schema Logging: ✅ enabled (Log level: warn) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Services stopped​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#services-stopped","content":"ID: services_stopped Description: When a server instance has stopped its services Category: services Payload schema: No schema Logging: ✅ enabled (Log level: warn) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Setup​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#setup","content":""},{"title":"Setup triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#setup-triggered","content":"ID: setup_triggered Description: When setup has been triggered Category: setup Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Setup done​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#setup-done","content":"ID: setup_done Description: When setup is done Category: setup Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"CosmosDB to SQL migration​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#cosmosdb-to-sql-migration","content":"ID: cosmosdb_to_sql_migration_triggered Description: When CosmosDB to SQL migration is triggered Category: setup Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Azure Storage to SQL migration​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#azure-storage-to-sql-migration","content":"ID: azstorage_to_sql_migration_triggered Description: When Azure Storage to SQL migration is triggered Category: setup Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Signin​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#signin","content":""},{"title":"User signed in​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#user-signed-in","content":"ID: user_signedin Description: When a user has signed in Category: signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_user_signedin Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"User signed out​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#user-signed-out","content":"ID: user_signedout Description: When a user has signed out Category: signin Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_user_signedout Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"User unauthorized​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#user-unauthorized","content":"ID: user_unauthorized Description: When a user has been denied access to a resource Category: signin Payload schema: No schema Logging: ✅ enabled (Log level: warn) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: security) Database table: evt_user_unauthorized Database columns: Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Subscriptions​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#subscriptions","content":""},{"title":"Subscription update notification received​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#subscription-update-notification-received","content":"ID: subscription_update_notification_receivedDescription: When a subscription update notification has been receivedCategory: subscriptionsPayload schema:  { &quot;type&quot;: &quot;object&quot;, &quot;flags&quot;: { &quot;presence&quot;: &quot;required&quot; }, &quot;keys&quot;: { &quot;origin&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;flags&quot;: { &quot;only&quot;: true, &quot;presence&quot;: &quot;required&quot; }, &quot;allow&quot;: [ &quot;microsoft&quot;, &quot;chargebee&quot; ] }, &quot;payload&quot;: { &quot;type&quot;: &quot;object&quot;, &quot;flags&quot;: { &quot;presence&quot;: &quot;required&quot; } } } }  Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Tests​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#tests","content":""},{"title":"Integration tests triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#integration-tests-triggered","content":"ID: integration_tests_triggered Description: When integration tests have been triggered Category: tests Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Integration tests done​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#integration-tests-done","content":"ID: integration_tests_done Description: When integration tests are done Category: tests Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Trello​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#trello","content":""},{"title":"Trello tab cloned​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#trello-tab-cloned","content":"ID: trello_tab_cloned Description: When a Trello tab has been cloned Category: trello Payload schema: No schema Logging: ✅ enabled (Log level: verbose) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ✅ enabled (Category: tabs) System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Webhooks​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#webhooks","content":""},{"title":"Webhook Run Triggered​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#webhook-run-triggered","content":"ID: webhook_run_triggered Description: When a webhook run is triggered Category: webhooks Payload schema: No schema Logging: ✅ enabled (Log level: debug) Telemetry: ✅ enabled Audit trail: ❌ disabled Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ✅ enabled Scheduling: ❌ disabled "},{"title":"Webhook executed​","type":1,"pageTitle":"nBold Events Documentation","url":"/references/events-reference#webhook-executed","content":"ID: webhook_run_executed Description: When a webhook has been executed Category: webhooks Payload schema: No schema Logging: ✅ enabled (Log level: info) Telemetry: ✅ enabled Audit trail: ✅ enabled (Category: webhooks) Database table: evt_webhook_run_executed Database columns: _timestampeventn_ctx_event_ideventhook_idhook_namehook_config_urlrun_idpayloadrun_start_daterun_end_daterun_durationrun_attemptsrun_statusrun_failed_reason Organization webhooks: ❌ disabled System webhooks: ❌ disabled Queuing: ❌ disabled Scheduling: ❌ disabled "},{"title":"Changelog","type":0,"sectionRef":"#","url":"/CHANGELOG","content":"","keywords":""},{"title":"5.3.0 (2023-02-16)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#530-2023-02-16","content":""},{"title":"Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#features","content":"analytics: Added analytics UI integration (327155d)analytics: Added initial setup if integration enabled (31eb58f)analytics: Configured int and prd connectivity (8a8253e)analytics: updated db schema (3c456aa)api: Added GetTeamsByTemplate endpoint (96a0b3a)bo: analytics and operations persistence (932b2fc)bo: Analytics loaded from internal collection (f78d44f)bo: back-office v1 (52504f4)bo: Handle env without analytics enabled (1fcd096)bo: initialized ui (80bc65c)bo: operations + analytics (6b052f4)business-graph: added basic client and server (608a63d)db: Added subscription model to sequelize + db (e994fde)db: documented models (91663d4)hosting: Updated self-hosted docker compose files (724926a)infra: initialized migration code from cosmosdb and az storage to sql (c2d41d4)lifecycle: Added control for concealed info in usage reports (5d6ae6c)lifecycle: alpha (81d7b5b)lifecycle: improved jobs data with teams count + processed (4a1f6f1)lifecycle: job scheduled every hour (ea71bac)self: Added docker compose for self-hosted (4367a32)ui: Basic UI v2 (2b975cb) "},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes","content":"bo: updated startup command (dcdae84)docker: fixed docker compose for self-hosted (2fc3b61)lifecycle: disabled concealed data option check (7ba5816)lifecycle: updated concealed option handling (48819ce)package: Updated manifests descriptions (f1c3f18)provisioning: Fixed sensitivity labels issue (e01c8a4)ui: Fixed moble text rendering of placeholders (48a3424) "},{"title":"5.2.0 (2023-01-20)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#520-2023-01-20","content":""},{"title":"Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#features-1","content":"api: System app authorized to access all tenants logs (176df5b)api: Updated system app id and system webhook url (d526ab9)auth: Added support for multiple client id across services (edbe838)exports: Template and settings export is limited to change mgrs (859609c)provisioning: Failure to update mailnickname results in a warning, not an error. Automated truncature to 50 characters. (8398106)queues: Added scheduled job (29982d0)queues: Added INT startup script (f629832)queues: Added queue_read_only and queue_allow_retry (2a3adaa)queues: Added queues dashboard options (3137879)queues: Added queues-dashboard service (07d3829)queues: Jobs dashboard support for queues mgmt options (fc15905)queues: New fine-grained queues options (177543f)queues: New queues options + Webhooks priorities (dddc1cf)reply to channel message (7c946e0)search: Added search client (ab15901)setup: Included setup scripts in scheduler startup sequence (9d87298)signin: Added support for multiple app regs (f0d3d18)subscriptions: Data model + events + db operations v0 (dd6641c)templates: System templates can now be deleted (aa6e9e8)update channel (3047db1) "},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-1","content":"approval: Fixed email approval process when triggered from a card in Outlook (c232860)BadGateway error (de51c1d)better error form (5d59185)catalog: ON/OFF sorting filters in templates catalog are not working #1471 (8c2610c)channel displayName length (061d6c0)deeplinks: Fixed open team and open tab deep links (67f746c)error create channel (12204e8)error for expired service account and channel name already exist (ca70f4c)home: Fixed rendering issues in templates and requests (602e41b)issue #257 (4467d38)less-test (558bffd)nbold v5 (a8d04ec)not modified graph send 503 (79c2679)not modified graph send 503 (cb67041)repliesMessage to replyToMessage (73fc482)send full response (ff8106a)webhooks: Disabled system webhooks for token renewal (aa969aa)webhooks: Fixed approval webhooks definition (e777a45)workflow on push (705dd01) "},{"title":"5.1.0 (2022-10-21)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#510-2022-10-21","content":""},{"title":"Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#features-2","content":"api: added the ChannelMessage.Send permission to the service account scopes (921a960)microsoft-lists: added the microsoft_teams_list_tab_cloned event + tracking capabilities (15ed9c9)onenote: added permission check and audit trail event to the onenote module (d09f76c)package: added new v2 package for publication on the Teams store (2dfd3d5)package: updated package template to ease customization (68884e8)planner: new telemetry and audit events (see events-specification-microsoft-planner.js) (331e35b)sensitivity-labels: added service_account_missing_licenses telemetry event (a9a4c3e)service_account: added the service_account_refresh_token_expired event for alerting (2de5aee)sessions: updated session mgmt to use a Redis store using the redis package (31afa79) "},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-2","content":"approval: added instrumentation to the approval email process (029d708), closes #843approval: fixed approval email template path (0c32a08)auditing: updated auditing integration configuration (0c7aafd)authorization: included legacy admin consent from the login page using konami code (ecddbfc)azure-storage: updated Azure Storage setup to create containers using the blog public access (67dd7c2)cicd: fixed cicd infrastructure paths (65a7b3b)fix fails (5720e20)intercom: fixed error handling in getintercomconfiguration (d81721c)intercom: fixed intercom initialization error (0282135)intercom: temporarily disabled rate limiter for intercom configuration api endpoint (ac2480d)lists: fix for INT environment (e2faf1f)lists: fixed lists cloning + Feat OneNote and Office (98abe25)office: fix for Office viewer as a tab (2e7eccb)onenote: fixed onenote error from graph (70ef987)permissions: adjusted default permissions scopes (3ffc386)service-account: fixed service account update + added template export function (9d94e88)signin: better error handling for Apple devices (0ce86e5)signin: changed error management in signin process to cope with fetch (6c0703c)signin: fixed admin consent success and error pages using async await for teams-js (3e41da8)signin: fixed non-sso signin after migration to teams-js v2 (5c67280)signin: fixed teams-js initialization in non-sso signin (9b14e29)signin: fixed typo in signin module (ca6cf59)signin: reenabled redirect with sso (8bdcd46)signin: service account registration (36e9b4e)signin: updated grant consent behavior (33c47a6)teams-js: upgraded teams-js dependency to v2.2 (efe0261), closes #1291teams: updated @microsoft/teams-js to v2.3.0 (6f08d18)telemetry: fixed new telemetry settings (6d7b5b9)throttling: temporarily disabled throttling in /events/specifications (7ddf1ca) "},{"title":"4.24.0 (2022-06-23)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4240-2022-06-23","content":""},{"title":"Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#features-3","content":"api: added getTeamMembers api endpoint (bce1257)application-insights: reenabled application insights in build (2383038)docker: added monitoring components to docker stack (prometheus, exporters...) (d6417aa)docker: docker image now runs without a root-level account (419d3b1)indexing: added robots.txt to prevent indexation from search bots (fb955b7)microsoft-lists: microsoft Lists cloning support in provisioning (98d2b33)npm: added NODE_ENV to npm start commands for each deploy (493f823)packages: enabled configurable properties for the targeted home package (7bf6d28)rbac: prevent early access to connected apps and reports to admins (273c4db)reports: updated /reports endpoints to reflect roles requirements (01535b6)templates: available teams when creating a template is now from /me/joinedTeams (fc5adbb), closes #1219 "},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-3","content":"api: fixed api / webhooks codes (6341937)api: re-enaled cache for user roles + changed error management (a55164a)app-instghts: disabled legacy page tracking (572b182)assets: rebuilt cdn assets (7ccd6ce)assets: reverted cdn assets to previous build (0ee187e)audit-trails: fixed provisioning audit trails stucked at 0% (291351b), closes #1231cdn: removed cdn directory from docker image (aecaeb3)cdn: removed cdn from .env config files (1bc13c6)cicd: fixed cicd image name for integration (5d46063)cicd: updated cicd docker image (a7f94a5)cicd: updated cicd script to build and push using github sha as version (fa5492e)deps: added explicit deps to vm2 and he modules (e1ed798)docker: fixed docker image build (df9f75e)docker: reverted dockerfile until issue with the api service resolution (b0eb106)intercom: fixed intercom access from login page in case of admin consent request (4ca430a)license: fixed display of license from the settings tab (345f5b5)locales: fixed cdn locales url (bf65051)manifests: fixed manifests loading directory in configuration module (d42f887)packages: added missing images in packages (703ebd8)permissions: added Sites.Manage.All to the service account required permissions (d09a8cc)planner: fixed Planner tab configuration URLs using the latest version (6dc419f), closes #1222planner: provisioning now preserves tasks checklists order (26fe2e4), closes #1150power-automate: fixed issue with power automate triggers (d66a883)power-automate: fixed Power Automate issues with API and webhooks (15d6d0c)provisioning: updated /provisioning validation schema to accept members display names (5ed8a47)rate-limiter: replaces rate limiter redis store with the default in-memory (2172036)redis: updated redis cache client initialization from connect to ready (ccd59bf)search: fixed in-app search from the homepage (d4254e7), closes #1224service-account: fixed issue with service account registration (1bc33ee)services: updated services loading logging (238034e)setup: fixed setup scripts path in package.json (258a15c)teardown: fixed case when the service doesn't start properly and exits (86beb45)timeout: disabled timeout module until further investigation (90e0e32)timeout: reenabled timeout in web and api service (226becb)timeout: updated timeout behavior for web and api (192ddde) "},{"title":"4.23.0 (2022-05-19)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4230-2022-05-19","content":""},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-4","content":"app-instghts: disabled app-instghts client-side script (4d9f792) "},{"title":"4.22.0 (2022-05-19)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4220-2022-05-19","content":""},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-5","content":"app-insights: disabled client-side app-insights integration (ceef679) "},{"title":"4.21.0 (2022-05-19)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4210-2022-05-19","content":""},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-6","content":"build: updated production cdn scripts (9ac4a51) "},{"title":"4.20.0 (2022-05-19)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4200-2022-05-19","content":""},{"title":"4.19.0 (2022-05-19)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4190-2022-05-19","content":""},{"title":"Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#features-4","content":"api: added /catalog/templates endpoints for granular management (922da0e)bot: added bot packages (ac7b42f)connected-apps: added connected-apps button + embed (1a578c8), closes #1176events: fixed connectivity to events server (3c5e8f5)metadata: added metadata query api (612a66f)rbac: added governance manager role in rbac settings (1c4ae58), closes #1178reports: added &quot;user_report_viewed&quot; analytics event (4610b4d)reports: added reports categorization + dynamic reports height (a4b72b2)reports: added reports navigation and dynamic loading (b9e9aca)webhooks: updated webhook creation to support Tray (0c48af7) "},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-7","content":"api: fixed issue with delete archive and rename teams operations (7b61164), closes #78connected-apps: fixed iframe to host communication (18a3c8b)connected-apps: whitelisted connected-apps test environment url (95d1730)db: fixed events db name in PRD (469fab5)git: fixed large log files in commits (0093061) "},{"title":"4.18.0 (2022-03-08)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4180-2022-03-08","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes","content":"github organization: updated refs to our previous GitHub org (f94bd83) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs","content":"changelog: fixed changelog broken links (e1673bc)changelog: fixed refs to our former GitHub org (281311d)docs: fixed invalid links in generated docs (275269f)docs: updated WEBSITES_DOCS constant URL (fae4f33) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring","content":"github: updated deps for our new GitHub org (ddba4c7) "},{"title":"4.17.0 (2022-03-04)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4170-2022-03-04","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-1","content":"packages: fixed manifest rendering in json format (f489706)packages: fixed settings tab name in manifests (e033c49)provisioning: fix planner provisioning issue (7d9b83a) "},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features","content":"onenote: oneNote tabs are now cloned just as other Office tabs (92ab7a7) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-1","content":"contributing: updated contributing guide (4dd9535)docs references: updated generated assets for docs site (faa5d03) "},{"title":"4.16.0 (2022-02-14)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4160-2022-02-14","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-2","content":"packages: updated packages to remove the docs tab and the configurable tab (53352d0) "},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-1","content":"i18n: integrated updates from i18n (4408e06) "},{"title":"4.15.0 (2022-02-14)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4150-2022-02-14","content":""},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-2","content":"packages: packages version is now synchronized with the platform version (c1b37ff) "},{"title":"4.14.0 (2022-02-13)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4140-2022-02-13","content":""},{"title":"4.13.0 (2022-02-13)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4130-2022-02-13","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-3","content":"cdn: updated production cdn assets (975dc30) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-2","content":"licences: updated licences mentions to SalesTim SAS (85c71c7) "},{"title":"4.12.0 (2022-02-10)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4120-2022-02-10","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-4","content":"homepage: fixed issue preventing the homepage to load (2344d13), closes #1096 "},{"title":"4.11.0 (2022-02-10)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4110-2022-02-10","content":""},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system","content":"packages: updated dev packages to include a docs tab (b62de1c) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-5","content":"docs: fixed events_reference doc generation (69efd2f) "},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-3","content":"branding: updated all references to salestim to nbold (7fa4943) "},{"title":"4.10.0 (2022-02-08)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#4100-2022-02-08","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-6","content":"provisioning: fixed tab configuration after MS graph update (c57f24d), closes #1108 "},{"title":"📦 CI​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-ci","content":"docs: updated build script to generate docs assets (ce7856f)references: included all assets from app-platform repo into build (977800b) "},{"title":"4.9.0 (2022-02-08)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#490-2022-02-08","content":""},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-3","content":"changelog: removed breaking change alert from a previous commit (adabd64)permissions: updated the list of permissions scopes in the &quot;hosting&quot; documentation (84d67d0) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-1","content":"connected-apps: removed references to the @salestim/connected-apps module (31017ca) "},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-4","content":"branding: updated packages logo and tabs to match the nbold brand (1090604) "},{"title":"4.8.1 (2022-01-25)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#481-2022-01-25","content":""},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-1","content":"dependencies: bump node-fetch from 2.6.1 to 2.6.7 (38458ce)deps: bump node-fetch from 2.6.1 to 2.6.7 in /src/libs/github (c74459b)deps: bump node-fetch from 2.6.1 to 2.6.7 in /src/libs/webhooks (8a06244) "},{"title":"4.8.0 (2022-01-25)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#480-2022-01-25","content":""},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-2","content":"npx: updated all references to npx in package.json to include the --yes option (10e69b0) "},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-5","content":"channels: clone channel settings as part of the provisioning process #592 (f7369bc)naming convention: added console logging to preview naming conventions and see detailed errors (9e30f7b)service account: force account selection during service account update (3a1aed5)service account: users granted as teams_service_admin now can access and manage app settings (ac1d28b), closes #1062 "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-7","content":"provisioning: fix: Settings not copied as part of the provisioning (1b98c41), closes #1079security: any unexpected error in web or app is now managed to prevent debug info leak (4c3191a)security: excessive error verbosity (ISMS #39) (86a208d)security: preparation for fixing potential XSS security issue (14b0212)service account: disabled cache for organization API endpoints (6626ce5), closes #1086 "},{"title":"4.7.0 (2021-12-11)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#470-2021-12-11","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-8","content":"permanent_membership: fixed help label displaying the maximum number of permanent members (683048e) "},{"title":"4.6.0 (2021-12-11)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#460-2021-12-11","content":""},{"title":"4.5.0 (2021-12-11)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#450-2021-12-11","content":""},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-6","content":"permanent_membership: updated permanent membership limit to 30 owners and 50 members (3f2b24b), closes #1068 "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-9","content":"private_channels: fixed reuester not added to private channels (85e983d), closes #914provisioning: fixed app installation issue (0450461) "},{"title":"4.4.1 (2021-12-09)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#441-2021-12-09","content":""},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-10","content":"cdn: fixed cdn production version (e56f9e1)jobs: prevent jobs deletion on complete (7d13b2b) "},{"title":"4.4.0 (2021-12-09)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#440-2021-12-09","content":""},{"title":"🧪 Tests​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-tests","content":"auth: added mocks for Microsoft Identity platform API to fully isolate tests (858269e)db: mocked Sequelize module using sequelize-mock to isolate unit tests (f5c8386)github: mocked github api to isolate unit tests (4e2a5db) "},{"title":"Others​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#others","content":"merge: fixed merge issue (4bc341c) "},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-7","content":"analytics: included analytics script based on plausible (self-hosted) (6e4f841)analytics: new analytics capabilities based on self-hosted Plausible (89f8607)logs: added LOG_PERSISTENCY_DIRECTORY option to define logs location if persistency is enabled (d4a5c2a)prometheus: prometheus exporter now supports X-Auth-Token to secure the /metrics endpoint (239043d) "},{"title":"⚡ Performance Improvements​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-performance-improvements","content":"prometheus: disabled gc metrics as there is a dep incompatibility with prometheus-gc-stats (9f58ae1) "},{"title":"📦 CI​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-ci-1","content":"dependabot: updated dependabot.yml to not exclude dev-dependencies and improve PR tagging (8ad1c9f)deps: assets rebuilt (67cf5cc)docker: added github action to build push docker image to azure and gh registries (f9d4386)jobs: reschedules jobs in PRD (3bd4469)prometheus: enabled prometheus exporter for all environments (9045259)prometheus: included npm rebuild in GH action for INT to rebuild native components (36010fc)redis: pPR now targets the non-production redis server (e7fe447)terraform: updated terraform azure provider and added new resources (0931ff7) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-2","content":"i18n: removed references to DE in packages (4e95d1a)webclient: moved webclient to /src/client to isolate it from the web service (4ef4e50) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-4","content":"adr: added proposed adr for redis connections (cache and queues) monitoring (511d000)analytics: added ADR 0006-web-analytics to validate our app analytics platform (72ba99a)audits: rebuild audit log files (372775c)hosting: changed site navigation to cope with long toc (71dbc22)hosting: updated the description of all the services and events of the platform (932f16c)package: added :help entries to package.json to describe each script (b25aed4)records: finalized importing all records as md (11f3191)self-hosted: added diagram for additional operations services (uptime, metrics...) (35c8d47)self-hosted: added draft of architecture data-flow (bc91ee6)self-hosted: added power-platform setup documentation (ee9cf9c)self-hosted: created new pages for permissions, provisioning and permanent membership jobs (d2def02)self-hosted: fixed broken links and intercom integration (14f5ff4)self-hosted: fixed nav (1e4bfa2)self-hosted: included an export to docx and pdf script as part of the docs npm script (18e3be6)self-hosted: self-hosted docs rebuild (8de66f5)self-hosted: updated Azure resources from the terraform script (6103a0b)self-hosted: updated azure resources with additional monitoring services (32febe3)self-hosted: updated cloud vs self comparison by including networking differences (1e910a2)self-hosted: updated core architecture documents (7855b2c)self-hosted: updated novigation structure and included azure docs (7072734)self-hosted: updated self-host documentation with terraform projects and docker guide (5d15ef1)self-hosted: updated the updates management doc describing upgrade options (d249331) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-11","content":"approval: fixed error during loading of the avatar picture in initApprovalsConsumer (57e1224)flow: fixed flow storage location by including the /vomules/flow/storage empty folder in git (9614eca)i18n: added support for nl-be, nl-nl and da-dk as fallbacks to en-us to i18n module (329e417), closes #968logging: better error management when the log file transport can't access the target directory (916e765)prometheus: fixed express exporter issue by explicitely including prom-client in deps (a19478c)provisioning: fixed issue with channel calendar and yammer tabs provisioning (742c6f6), closes #1054tab-config: fixed tab configuration page when adding the app as a custom tab in a team (df588eb) "},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-3","content":"deps-dev: bump @jest/globals from 27.2.4 to 27.2.5 (9a31712)deps-dev: bump @jest/globals from 27.2.5 to 27.3.0 (bfd4179)deps-dev: bump @jest/globals from 27.3.0 to 27.3.1 (e648460)deps-dev: bump eslint-plugin-import from 2.24.2 to 2.25.1 (6343d25)deps-dev: bump eslint-plugin-import from 2.25.1 to 2.25.2 (37c5e46)deps-dev: bump eslint-plugin-jest from 24.5.0 to 24.6.0 (1df9017)deps-dev: bump eslint-plugin-jest from 24.6.0 to 25.0.1 (9b0be3b)deps-dev: bump eslint-plugin-jest from 25.0.1 to 25.0.5 (483820b)deps-dev: bump eslint-plugin-jest from 25.0.5 to 25.0.6 (9e44516)deps-dev: bump eslint-plugin-jest from 25.0.6 to 25.2.1 (6e46bf9)deps-dev: bump eslint-plugin-jest from 25.2.1 to 25.2.2 (945aff5)deps-dev: bump eslint-plugin-jest from 25.2.2 to 25.3.0 (75f7e0c)deps-dev: bump eslint-plugin-promise from 5.1.0 to 5.1.1 (8fcb63f)deps-dev: bump jest from 27.2.4 to 27.2.5 (f6d2fa4)deps-dev: bump jest from 27.2.5 to 27.3.0 (84d40b0)deps-dev: bump jest from 27.3.0 to 27.3.1 (671c0bb)deps: bump @microsoft/microsoft-graph-client from 3.0.0 to 3.0.1 (be275e5)deps: bump @nboldhq/i18n from 16e383e to a00fb74 (0f82811)deps: bump ajv from 8.6.3 to 8.8.0 (fa25f0f)deps: bump bull from 3.29.2 to 3.29.3 (439a537)deps: bump cronstrue from 1.117.0 to 1.119.0 (72e25ea)deps: bump cronstrue from 1.119.0 to 1.122.0 (9fb7623)deps: bump express-rate-limit from 5.4.0 to 5.4.1 (231d6b1)deps: bump express-rate-limit from 5.4.1 to 5.5.0 (676997b)deps: bump express-rate-limit from 5.5.0 to 5.5.1 (54e406e)deps: bump ioredis from 4.27.10 to 4.27.11 (f3d71a7)deps: bump ioredis from 4.27.11 to 4.28.0 (b70e63c)deps: bump ioredis from 4.28.0 to 4.28.1 (3e0d236)deps: bump nock from 13.1.3 to 13.1.4 (ca6d9a0)deps: bump node from 16-alpine to 17-alpine (65cf3e7)deps: bump node-red from 2.0.6 to 2.1.3 (2b8da2f)deps: bump pg-mem from 2.0.1 to 2.1.5 (30b319b)deps: bump pg-mem from 2.1.5 to 2.1.6 (0dc4493)deps: bump sequelize from 6.6.5 to 6.7.0 (5856381)deps: bump sequelize from 6.7.0 to 6.8.0 (c786a3e)deps: bump ua-parser-js from 0.7.28 to 1.0.2 (aea2625)deps: bump unleash-proxy-client from 1.5.2 to 1.6.0 (f754f28)deps: bump validator from 13.6.0 to 13.7.0 (aad99b0)deps: bump validator from 13.6.0 to 13.7.0 in /src/libs/db (9210bf9)deps: bump zaproxy/action-baseline from 0.5.0 to 0.6.1 (42b9253)deps: updated deps from dependabot (86f3d90)docker: changed from npm ci to npm install (09fd42b)github: added github token for remote dependencies (059d4a7)ngrok: excluded /bin/ngrok directory from git (0c79ac0)node: locking app with a specific node.js version using nvm and .nvmrc (3d3af0e)npm: fixed npm install issue due to wrong npm version (f5593fe)packages: rebuilt packages (bef89fb)terraform: added monika, redis-exporter and bull-exporter to the dev iac (8c49630) "},{"title":"4.3.0 (2021-10-03)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#430-2021-10-03","content":""},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-3","content":"azure-storage: migrated from azure-storage to @azure/storage-blob (9cafb1c) "},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-4","content":"deps: updated npm deps (1b9af06) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-12","content":"libs: now using exclusively relative paths to require internal modules (d74b1fe) "},{"title":"📦 CI​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-ci-2","content":"github-actions: updated PRD scripts to use npm install instead of npm ci (f9fdfa0)terraform: first terraform iac project to host the the entire platform on a local docker server (33a1b01) "},{"title":"4.2.0 (2021-10-02)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#420-2021-10-02","content":""},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-8","content":"logs: enable log files persistency through a new LOG_PERSISTENCY_ENABLED environment variable (8aaede5) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-5","content":"events: docs auto-generation for events and services (3a8d9c7) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-4","content":"dist: removed all references to global variables (f9527e8)teardown: when an exit signal is catched, the service tries to shutdown gracefully (532c0a0) "},{"title":"🧪 Tests​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-tests-1","content":"jest: excluded tests folders from the dist generation (b282624)jest: included jest option modulePathIgnorePatterns to prevent inclusion of the /dist path (0a4951b)jest: tests (unit and e2e) and now running with the --silent switch (767902b)redis: using ioredis-mock instead of the INT redis instance for unit tests (748f712)unit-tests: re-enabled the whole unit tests suite (dd83840) "},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-5","content":"changelog: updated standard-version scripts for better changelog generation (71321b3)deps: bump unleash-server from 4.2.0-0 to 4.2.0-2 (28b7f8e)dist: removed /dist contents from git tracking (83b50fb)tests: reenabled unit tests in GitHub Actions build steps (20c3cc5) "},{"title":"4.1.0 (2021-10-01)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#410-2021-10-01","content":""},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-9","content":"monitoring: added Express Prometheus middleware, accessible at /monitoring/metrics (d22e8af)prometheus: included a new setting to enable the prometheus exporter + options (e42c9f7) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-6","content":"discovery: removed references to the discovery service (8fb9b9d)self-hosted: created the minimal documentation for self-hosting the platform (b47a524) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-5","content":"config: included addition logs during config loading (e92e622)config: included loaded config details in startup logs (51ab21d)config: reviewed all the settings and .env files for DEV and INT (2351802)feature-toggles: feature toggles service and proxy are now disabled by default (8bb306f)logging: better error handling by using the serialize-error module (e34d863)redis: implemented Redis retry strategy to retry on connection error (ed56b69)scripts: made scripts independent from the core engine (374473c) "},{"title":"🎨 Styling​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-styling","content":"configuration: refactored all .env files (577f323) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-13","content":"authentication: fixed issue authenticating against the api after client-side session expiration (3aaad5a)config: fixed dynamic PORT environment variable used by Azure for its containers (74cae14)deps: fixed missing references in api (829c293)github: fixed github assignees issue when ther's only one assignee (e9662a8)logging: better errors logs through tags and payload parsing/formatting (474a3c1)prometheus: express-prometheus-middleware module is now only loaded if the option is enabled (0889241)prometheus: fixed redis exporter and bull queue exporter configuration from docker compose file (fb36586)webclient: fixed issue #932 Deeplinks from home app are sending the users to the wrong team (f5ac611) "},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-6","content":"build: updated INT build (215aea4)build: updated int script (0c2c2d2)deps-dev: bump @jest/globals from 27.2.0 to 27.2.1 (298d8a6)deps: bump @nboldhq/i18n from 9ac2bf7 to 174838e (c9fa7e6)deps: bump @yaireo/tagify from 4.7.2 to 4.8.0 (5be4dcb)deps: bump alpinejs from 3.3.4 to 3.4.0 (1f3501d)deps: bump unleash-proxy-client from 1.4.0 to 1.5.2 (e426ebe)deps: fix deps issue between express prometheus and unleash server with prom-client (3c72949)deps: updated dependencies from GitHub (501d78c)npm: updated npm dependencies to their latest version (358c20b)npm: using npm ci instead of npm install in INT + added npm rebuild for native packages (e511c01)teams-packages: fixed Teams packages build after introducing publisher/product constants (0672f80)tests: disabled unit tests for testing in INT (77daeee)version: updated major version number to 4 (3e72aab) "},{"title":"3.10.2 (2021-09-21)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#3102-2021-09-21","content":""},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-7","content":"self-hosting: initialized the self-hosting docs published to dist (9f96583) "},{"title":"3.10.1 (2021-09-21)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#3101-2021-09-21","content":""},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-7","content":"deps: bump alpinejs from 3.3.3 to 3.3.4 (14b2230) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-14","content":"cache: fixed massive redis session keys creation for each http request (01d1edd)catalog: fix catalog audience targeting check feature (f87d465)cdn: added README.md root file to support UptimeRobot monitoring (e35db66)feature-toggles: fixed issue preventing catalog to launch (8a09416)service-account: fixed service account refresh after update (d149a6b) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-6","content":"api: moved api root from /v1.0 to /api/v1.0 (77b6f10)cdn: renamed /cdn/staging to cdn/integration (b282470)environment variables: refactored environment variables management (83e04f8)environments: environment variables preprocessing is now done from environment.js (ef9f499)guthub: migrated github ops token to the new format (0a7b5b9)monitoring: moved appinsights initialization to the instrumentation module (a6d342c)ms-graph: improved logging in getUserDirectoryRole function (3ca8863)ms-lists: removed ms-lists dependency (eb3c3d4)packages: renamed packages zip file name without &quot;automation&quot; for easier readibility (b8481ca) "},{"title":"📚 Docs​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-docs-8","content":"audits: added an automatically generated Audits Index (c8bd5d7)audits: added uptimerobot data export to npm run audit script (c1a6bd4)audits: updated audit index format (dcda3e4)depcheck: included depcheck as part of the audit reports generated from npm run audit (8fa391b)environment variables: moved ENVIRONMENT_VARIABLES.md to the root to prevent jekyll errors (50c9f3d)packages: new packages index (4742bd7) "},{"title":"3.10.0 (2021-09-16)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#3100-2021-09-16","content":""},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-10","content":"feature-toggles: enabled feature toggles service in all envs in std and role-specific mode (d139535) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-7","content":"feature-toggles: refactored service (40b92d9)mail-alerts: disabled mail alerts for all environments, keeping github for ppr and prd (a801824) "},{"title":"📦 CI​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-ci-3","content":"🎡 updated gh action scripts to use npm install for std (1f70df5)feature-toggles: added st-featuretoggles-prd-01 to GitHub actions CI/CD (0b4f397)feature-toggles: updated int gh action script to use npm install instead of npm ci (e133481)infrastructure: added two new audit scripts db:stats and cache:stats (24e7e0a) "},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-8","content":"appservice: added .deployment and deploy.sh scripts for fastest deployment (34e4980)ci-cd: updated github action scripts to use npm install instead of ci (ca1e403)deps-dev: bump adm-zip from 0.5.5 to 0.5.6 (ee38d21)deps: bump ajv from 8.6.2 to 8.6.3 (c37d3c6)deps: bump alpinejs from 3.3.2 to 3.3.3 (722d7b3)deps: bump applicationinsights from 2.1.6 to 2.1.7 (a57ffe2)deps: bump unleash-proxy-client from 1.3.0 to 1.4.0 (1242b6e)deps: bump zaproxy/action-baseline from 0.4.0 to 0.5.0 (2b37e25)deps: bump zaproxy/action-full-scan from 0.2.0 to 0.3.0 (dae08b1)feature-toggles: removed github action yml file (75cb6fa) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-15","content":"feature-toggles: disabled unleash on client-side (bdb73be)feature-toggles: updated gh action deployment script to use npm install instead of ci (56cbd0f)service-account: fixed refresh issue after updating or removing a service account (558eed7)service-account: fixed service account update from the settings tab (ce6732e), closes #946 "},{"title":"3.9.0 (2021-09-09)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#390-2021-09-09","content":""},{"title":"🚀 Features​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-features-11","content":"feature-toggles: configured smtp parameters for emailing from the Unleash service (2d191a2)feature-toggles: feature-toggles service is now enabled and available in standalone mode (ce4776d)feature-toggles: installed &quot;Unleash&quot; to implement feature toggles (cbcc222) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-16","content":"i18n: locales not loaded from the login and main pages (022e716) "},{"title":"3.8.1 (2021-09-09)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#381-2021-09-09","content":""},{"title":"🏭 Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-build-system-9","content":"deps: bump axios from 0.21.1 to 0.21.4 (d38112b)deps: updated axios (69f672b) "},{"title":"🐛 Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#-bug-fixes-17","content":"i18n: reintegrated locales to the cdn legacy folder in /dist (2b5159e)package: fixed issue with old teams home packages that were using query parameters (01d8897) "},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-8","content":"cdn: cdn assets are now distincts between staging and production (691a629)i18n: changed dist / cdn folder structure to enable &quot;staging&quot; and &quot;production&quot; (5652d38) "},{"title":"[3.7] (2021-09-09)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#37-2021-09-09","content":""},{"title":"🛠️ Code Refactoring​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#️-code-refactoring-9","content":"cdn: updated cdn root url for each environment(c52139e) https://dist.salestim.io/cdn/staginghttps://dist.salestim.io/cdn/production web: removed all legacy unused code (3e1893c) "},{"title":"Build System​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#build-system","content":"changelog: integrated commitzen and standard-version (ffe2d89) New changelog format generated from commits npm: updated npm scripts for the build/release process (823f430)changelog: added .versionrc to configure changelog generation (215156e)deps: bump @nboldhq/i18n from abe8038 to 3ec1717 (b70238f)deps: bump alpinejs from 3.3.1 to 3.3.2 (ff2d1c3)versions: extracted version bump from npm build scripts (73c9191) "},{"title":"Bug Fixes​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#bug-fixes-8","content":"login: fix issue with login attempts without admin consent (63f6f6b)rbac: fixed rbac control for restricted tabs (3206c06)npm: removed segfault-handler dependency (e08826e) "},{"title":"[3.6] (2021-09-02)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#36-2021-09-02","content":"fixed: API Error Solution for &quot;413 Request Entity Too Large&quot; error Probably the origin of this issue &quot;Impossible to create a new template in PPR&quot; #897Resolution: update express middlewares by specifying a body content limit to 50mb app.use(bodyParser.json({limit: '50mb'})) app.use(bodyParser.urlencoded({limit: '50mb', extended: false})) changed: Better error handling in tabs configuration Example: Error in in graphServices/getPlannerPlan. (PRD) #2002851Origin: Happens when the service account doesn't have access to the original plan Error: Error message: ForbiddenError status: 403Error response text: {&quot;error&quot;:{&quot;code&quot;:&quot;&quot;,&quot;message&quot;:&quot;You do not have the required permissions to access this item.&quot;,&quot;innerError&quot;:{&quot;date&quot;:&quot;2021-09-02T07:21:45&quot;,&quot;request-id&quot;:&quot;7773f54f-5056-4214-8f84-549360adfa28&quot;,&quot;client-request-id&quot;:&quot;7773f54f-5056-4214-8f84-549360adfa28&quot;}}}Error stack: Error: Forbidden Improvements: When this kind of exception happens (except for explicitely unsupported tabs such as Wiki or OneNote): The audit trail mention the error with the tab and application nameAn organization_configuration_issue_raised event is triggered and the issue is tracked in the corresponding table accessible from our admin portal, with this payload: issue_type: 'TAB_CONFIGURATION_ISSUE', tenant_id: customer.msTenantId, tenant_initial_domain: customer.msTenantInitialDomainName, tenant_default_domain: customer.msTenantDefaultDomainName, message: `&quot;${tabDisplayName}&quot; (${appDisplayName}${message})`, status: 'open', diagnostic_data: JSON.stringify({ tab_display_name: tabDisplayName, app_display_name: appDisplayName }) fixed: Team creation getting stuck at 10% #888 Changed the behavior of requests limiters by setting the maxConcurrent option to null.It appears that with a non-null value defined, some requests were leaked.See: https://github.com/SGrondin/bottleneck#constructorAlso fixes: Teams creation provisioning blocked at Planner tab #896Impossible to create a new template in PPR #897 added: Team provisioning audit trails are now saved in the events db from the team_provisioning_audit_entry_created event (in addition to beeing saved in the job)changed: Error alerts are now temporarily sent by email in addition to as a GitHub issue in all environments for debugging purposes.changed: Group updates operations for email nickname and sensitivity labels are now executed through distincts functionschanged: GitHub alerts issue creation is now managed by a request limiter to prevent beeing throttledrefactor: Connected Apps and Governance pages optimization /integration and /governance are now loaded from the main componentCleaned bundled js and css refactor: Client instrumentation initialization code is now running asynchronously and uses the client_state objectchanged: Issues in the ops repo are now created by our GitHub service account: Login: st-service-cicdtoken: st-opsScope: repoHas Access to the Ops repo with write access changed: The Connected Apps module is now managed from a dedicated repo to enable external contributors See: https://github.com/nboldhq/connected-apps added: Admin Dashboard Removed previously used AdminJsPurpose: Read/Write access to the production environment DB (Organizations, users, options, events and audit trails...)The admin dashboard is provided by the Forest Admin service. The admin backend is hosted from our Azure platform by the st-admin-backend-prd app service and published to https://admin-backend.salestim.io by Azure FrontDoor.The service is monitored by Uptime robot as Admin Backend from our Status Page. It uses the /forest/healthcheck endpoint. See https://docs.forestadmin.com/documentation/how-tos/maintain/monitor-your-forests-statusSee the Admin Backend README for more information. The Forest Admin UI for the production environment is accessible from: https://app.forestadmin.com/st-admin-backend/Production. added: cloc code statistics report generated as part of the build (lines, comments, code...) Report available from https://dist.salestim.io/audits/code/loc.logIncludes both absolute and relative (% of code) metrics changed: Migrated alpinejs from v2 to v3added: auth module Implements clientCredentialsFlow for automated tests and future service-account-free (application) mode. added: Queues monitoring dashboard Uses Bull BoardAccessible from the admin dashboard (Queues page) or /admin/queuesProtected with the same authentication than the whole /admin portal added: Tests and documentation for the i18n repo Initial test suite using Jest. See tests.Uses Jupyter notebook and the iJavascript kernel as an interactive documentation. See docs. changed: Private GitHub Packages Our individual packages are now published in our organization GitHub PackagesFor instance with the @salestim/ms-lists repo. package.json Incldes a publishConfig property that sets the access to restricted (to our organization) and defines GitHub Packages as the registry &quot;publishConfig&quot;: { &quot;access&quot;: &quot;restricted&quot;, &quot;registry&quot;: &quot;https://npm.pkg.github.com&quot; } Could be published using npm publish (and the appropriate token scope) From the @salestim/app-platform repo: .npmrc file defines: GitHub Packages as the registry for all packages from the @salestim scope through @salestim:registry=https://npm.pkg.github.com (local packages referenced as 'file:' are not impacted)The token to use to connect to GitHub Packages. To avoid to use a specific user personal access token, we're now using a new service account (that will be used for all the CI/CD operations) Microsoft Azure AD Account (required because GItHub enforces SSO) Name: CI/CD Service AccountLogin: service-cicd@salestim.com GitHub account: Login: st-service-cicdAccess Token name: st-cicd (SSO must be enabled)Scopes: read:packages The @salestim/ms-lists package can be referenced as a dependency using &quot;@salestim/ms-lists&quot;: &quot;^1.0.X&quot; changed: Remote git repo dependencies management The @nboldhq/i18n is public, and can therefore be referenced as a dependency by: &quot;@nboldhq/i18n&quot;: &quot;nBold/i18n&quot;NPM assumes that this is a public GitHub repo, therefore no protocol has to be defined fixed: Default values future deprecation for express-session middleware was generating warnings Errors: express-session deprecated undefined resave option; provide resave option node_modules/@adminjs/express/lib/buildAuthenticatedRouter.js:56:41express-session deprecated undefined saveUninitialized option; provide saveUninitialized option node_modules/@adminjs/express/lib/buildAuthenticatedRouter.js:56:41 Reason: From: https://github.com/expressjs/session#saveuninitialized The default value is true, but using the default has been deprecated, as the default will change in the future. From: https://github.com/expressjs/session#resave The default value is true, but using the default has been deprecated, as the default will change in the future. Fix: Set values for saveUninitialized and resave in AdminJSExpress.buildAuthenticatedRouter { saveUninitialized: false, resave: false } fixed: Default values for express.urlencoded middleware was generating warnings Errors: body-parser deprecated undefined extended: provide extended option src/app/app.js:211:21 Reason: See: https://expressjs.com/en/api.html#express.urlencoded Fix: Set values for extended and resave in app.use(express.urlencoded app.use(express.urlencoded({ extended: false })) added: Jupyter notebook as an interactive documentation for the webhooks module. Uses Jupyter notebook and the iJavascript kernelInstallation: # Install PIP Python installer sudo apt install pip # Install Jupyter notebook pip install notebook # Install nodejs prerequisites sudo apt-get install nodejs-legacy npm ipython ipython-notebook # Install ijavascript sudo npm install -g ijavascript # Start ijavascript install ijsinstall References: How to use the js kernel from vscode changed: Our Redis servers now enforce TLS v1.2 minimumadded: Daily job that cleans all jobs entries in cache older than 24h Uses the Bull queues Clean method fixed: The service account token renewal job failed in case of non-existing registered tenant (happens when a demo tenant expires for instance) Root cause: The refreshtokensimple operation was not calling the expected callback method, therefore the job was permanently flagged as active. changed: Replaced the external body-parser module with the one built in express (Starting Express 4.16+) See: https://medium.com/@mmajdanski/express-body-parser-and-why-may-not-need-it-335803cd048c changed: Homepage performance optimizations Unified client state: The whole client state (environmenty variables, Intercom configuration, user profile, organization configuration...) is now rendered directly from the server as JS variables, directly accessible to the client js code.From 6 to 0 requests during the initialization of the page Batched Microsoft Graph Requests: All the requests made to retreive teams and groups properties are now batched (per batch of 12 as the pagination)From 96 requests per page to 6 requests per page Serving static resources from our CDN All the html components are now rendered from the CDN instead of from out servers Cached infos used to authenticate calls to the platform's API All the server-side methods used during the authentication of api requests are now cached Retreive the organization from Cosmos DB: cosmosDbServices.getCustomerByTenantIdORGANIZATION_CACHE_DURATION: 1000 * 60 * 5, // 5 minutes Calculate the roles of the current user from its token graphServices.userHasDirectoryRoleUSER_ROLE_CACHE_DURATION: 1000 * 60 * 5, // 5 minutes added: App package customization from Microsoft Teams Admin Center Native feature described here: https://docs.microsoft.com/en-us/MicrosoftTeams/customize-apps N.B: It is only available for apps installed from the Teams Store, not sideloaded apps Changes: Updated the app manifest schema to v1.10Included the configurableProperties that defines what aspects of the package could be customized. See https://docs.microsoft.com/en-us/microsoftteams/platform/resources/schema/manifest-schema#configurablepropertiesN.B: developerUrl, privacyUrl and termsOfUseUrl customization is disabled. &quot;configurableProperties&quot;: [ &quot;name&quot;, &quot;shortDescription&quot;, &quot;longDescription&quot;, &quot;smallImageUrl&quot;, &quot;largeImageUrl&quot;, &quot;accentColor&quot;, // &quot;developerUrl&quot;, // &quot;privacyUrl&quot;, // &quot;termsOfUseUrl&quot; ] added: Jest test framework + coverage analysis Run test manually (also triggered by CI/CD GitHub action): npm run testTest report generated as part of the build:dist npm scriptReport is generated at ./docs/audits/tests/tests_report.txt and available from https://dist.salestim.io/audits/tests/tests_report.txt How to tead the report: Statement (Stmts) coverage Has each statement in the program been executed?Branch coverage Has each branch (also called DD-path) of each control structure (such as in if and case statements) been executed? For example, given an if statement, have both the true and false branches been executed? Another way of saying this is, has every edge in the program been executed?Function (Funcs) coverage Has each function (or subroutine) in the program been called?Line coverage has each executable line in the source file been executed? added: SonarQube analysis See: https://javascript.plainenglish.io/how-to-set-up-sonarqube-locally-on-a-react-typescript-project-ec02cd8e2626SonarQube Server is run from npm run sonar:server. See ./build/sonarqube/docker-compose.ymlHosted at: http://localhost:9000 SonarQube Scanner is run from npm run sonar:scanner. See ./build/sonarqube/sonarqube-scanner.js SonarQube Server MUST be running changed: Abstracted and dynamic configuration for Microsoft Graph and Microsoft Azure AD environments (National Cloud Deployments) The Microsoft Graph base URL is now defined from the MICROSOFT_GRAPH_BASEURL environment variable (default to https://graph.microsoft.com)The Microsoft Azure AD base URL is now defined from the MICROSOFT_IDENTITY_PLATFORM_BASEURL environment variable (default to https://login.microsoftonline.com) changed: Shared Channels support The code is ready to enable the support of shared channelsThis feature will be enabled when the support of shared channels will move from the /beta to /v1.0 Microsoft Graph endpoints changed: I18n resources now integrated as a private npm module Before: json resources files were downloaded from the public repository as part of the build process using a custom codeNow: The resources are integrated as a private npm package through a standard npm install (see package.json) fixed: Membership policies not reflected on the existing teams #788 fixed: Create/Update record in the teams directory table on creationchanged: The Governance job &quot;Permanent membership policy&quot; is now triggered by our scheduler (every 5 min)Supported scenarios: new member/owner added in a template &gt; Added to every team attached to the templatedeleted member/owner in team &gt; Re-invitedteam owner demoted to member &gt; Re-promoted as ownerdeleted member/owner in channel &gt; Re-invitedchannel owner demoted to member &gt; Re-promoted as owner added: 2 new audit trails are available in a new &quot;Governance&quot; tabadded: 2 new webhooks are available for notifications/tracking: permanent_membership_policy_team_user_invitedpermanent_membership_policy_channel_user_invited changed: regular users and the service account are now using different graph permission scopes (requires a new service account sign-in)Known issues: For the &quot;Permanent membership policy&quot; to work, the service account must be signed-in againThe &quot;Permanent membership policy&quot; will only apply to new created teams (See the &quot;Governance&quot;\\&quot;Teams Management&quot; tab) added: Run nBold platform using Docker Migrated development environment from &quot;Docker for WSL&quot; (WSL using the docker service hosted by Windows) to a native linux docker daemon (started on boot using service instead of systemd)Updated the CONTRIBUTING.md guideCreated npm scripts for building and starting each environment/role Build: npm run build:docker:[ENV]:[ROLE]Start: npm run start:docker:[ENV]:[ROLE] added: dist.salestim.io is now monitored by UptimeRobot as CDN. See https://status.salestim.comrefactor: Externalization of key features as private NPM modules Why: Self-contained, better isolationNo more cross-dependencies (Dependencies are dynamically injected at runtime)Modules dependencies are installed as node_modules by npm installIndividual configuration from environment variables with safe defaultsEach module could be externalized in its own dedicated repo later New NPM modules in the /src/modules folder CacheDBEventsGitHubi18nMailSandboxWebhooks changed: Team name now supports the &quot;_&quot; character. See: #849added: PPR and PRD GitHub Actions full deployment scripts 2 new scipts: st-ppr-all: Rebuild and deploy the full PPR environment from the ppr branchst-prd-all: Rebuild and deploy the full PRD environment from the production branch They are NOT triggered by a push NOR other GitHub events, but the they could be manually triggered from the GitHub Actions page: https://github.com/nboldhq/app-platform/actions/workflows/st-ppr-all.ymlhttps://github.com/nboldhq/app-platform/actions/workflows/st-prd-all.yml changed: OWASP ZAP Baseline Scan Static analysis checking. See rules: https://www.zaproxy.org/docs/alerts/GitHub action updated to v0.4.0 zaproxy/action-baseline@v0.4.0Executed evey day at 1am through GitHub Actions https://github.com/marketplace/actions/owasp-zap-baseline-scanLatest scan report is available in the &quot;OWASP Zap Baseline Scan&quot; issue. added: OWASP ZAP Full Scan Active pentest. See https://github.com/marketplace/actions/owasp-zap-full-scanExecuted evey day at 2am through GitHub ActionsLatest scan report is available in the &quot;OWASP Zap Full Scan&quot; issue. changed: Updated GitHub deployment actions versions Node v14Now NPM dependencies are cached using actions/cache@v2Dependencies are installed from cache using npm ci --ignore-scripts instead of npm install. See https://docs.npmjs.com/cli/v7/commands/npm-ci "},{"title":"[3.4] (2021-07-05)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#34-2021-07-05","content":"fixed: Channels are not provisioned #828 Detected in Ops: Error in /graphServices/cloningMissingChannels/createChannel. (PRD) #1757382 StackTrace: at createChannel (/home/site/wwwroot/src/microsoft/graph/graphServices.js:3599:19) at graphLimiter.submit (/home/site/wwwroot/src/microsoft/graph/graphServices.js:6780:48) Payload: {&quot;statusCode&quot;:400,&quot;code&quot;:&quot;BadRequest&quot;,&quot;message&quot;:&quot;Invalid OData type specified: &quot;Microsoft.Teams.Core.channel&quot;&quot;,&quot;requestId&quot;:&quot;1a7c87e9-483a-417f-b776-815aa90ef12c&quot;,&quot;date&quot;:&quot;2021-07-05T15:17:10.000Z&quot;,&quot;body&quot;:&quot;{&quot;code&quot;:&quot;BadRequest&quot;,&quot;message&quot;:&quot;Invalid OData type specified: \\&quot;Microsoft.Teams.Core.channel\\&quot;&quot;,&quot;innerError&quot;:{&quot;date&quot;:&quot;2021-07-05T15:17:10&quot;,&quot;request-id&quot;:&quot;1a7c87e9-483a-417f-b776-815aa90ef12c&quot;,&quot;client-request-id&quot;:&quot;f4a45710-a1cc-4f07-c641-9df1eb683c53&quot;}}&quot;} Root cause: Undocumented update for the v1.0 CreateChannel endpoint '@odata.type': '#Microsoft.Teams.Core.channel' is replaced by '@odata.type': '#Microsoft.Graph.channel'See: https://docs.microsoft.com/en-us/graph/api/channel-post?view=graph-rest-1.0&amp;tabs=http changed: Additional server protection with the Helmet package A bout Helmet: https://www.npmjs.com/package/helmetBenefits: Less security warnings in our automated pentestsBetter control over third-party client-side modules (mostly Intercom)We now have a better control over resources origins (scripts and css) and targets (Graph, Azure...) Configuration app.use( helmet({ contentSecurityPolicy: { useDefaults: true, directives: { 'frame-ancestors': [&quot;'self'&quot;, 'https://teams.microsoft.com'], 'default-src': [&quot;'self'&quot;, 'https://*.salestim.io', 'https://avi.nbold.dev', 'https://graph.microsoft.com', 'https://api-iam.intercom.io', 'wss://nexus-websocket-a.intercom.io', 'https://*.applicationinsights.azure.com/'], 'script-src': [&quot;'self'&quot;, 'https://dist.salestim.io', 'https://teams.microsoft.com', 'https://widget.intercom.io', 'https://js.intercomcdn.com', 'https://api-iam.intercom.io', &quot;'unsafe-eval'&quot;, &quot;'unsafe-inline'&quot;], 'script-src-attr': [&quot;'self'&quot;, 'https://dist.salestim.io', 'https://teams.microsoft.com', &quot;'unsafe-eval'&quot;, &quot;'unsafe-inline'&quot;], 'img-src': [&quot;'self'&quot;, 'data:', 'https://dist.salestim.io', 'https://developers.salestim.com/', 'https://teams.microsoft.com', 'https://stsaprd.blob.core.windows.net', 'https://static.intercomassets.com'] } } }) ) changed: /dist folder now accessible from dist.salestim.io instead of dist.salestim.io Related documents have been updated on tech hub and handbook changed: Static assets (Images, fonts, css, compiled js...) are now distributed through GitHub Pages as a CDN Static assets are now loaded from https://dist.salestim.io/clients/web changed: finalize dependency updates All our third-party dependencies are now up to date with their respective latest version, excluding: Alpine.js: migration impacts from v2 to v3 have to be evaluatedBootstrap: migration impacts from v4 to v5 have to be evaluated fixed: Coding style / security best practices issues Standard JS coding style linter: From 1600 to 8 identified issuesESLint security issues: From 1866 to 10 identified issues (only from the recent connected apps modules) changed: https://dist.salestim.io public assets About &quot;Dist&quot; All these assets are regenerated during each commitThese assets are public (but theoritically not crawled by search engines) Added: Third-party licenses reports. https://dist.salestim.io/audits/third_party/license_summary.txt Summarises the number of third-party dependencies for each license type https://dist.salestim.io/audits/third_party/license_report.csv Detailed report of all the third-party dependencies with their license type Added: SSL Certificate report for www.salestim.com (in addition to app.salestim.io) https://dist.salestim.io/audits/license_summary.txt changed: Dependency cleaning Why: A lot of dependencies are not used anymore (mostly replaced by another one, sometimes the associated feature is not implemented anymore) Results: Decreased deployment duration in integration from 8 to 3 min (1min for the entire build, 2 min to deploy to azure)GitHub dependency alerts reduced from 6 to 2 Removed modules: Production &quot;@octokit/rest&quot;: &quot;^16.36.0&quot;,&quot;ace-builds&quot;: &quot;^1.4.7&quot;,&quot;acorn&quot;: &quot;^7.4.1&quot;,&quot;advanced-search-query&quot;: &quot;^5.1.1&quot;,&quot;botbuilder&quot;: &quot;^4.13.3&quot;,&quot;cheerio&quot;: &quot;^1.0.0-rc.9&quot;,&quot;clearbit-logo&quot;: &quot;0.0.1&quot;,&quot;colorthief&quot;: &quot;^2.3.2&quot;,&quot;daemonite-material&quot;: &quot;^4.1.1&quot;,&quot;datatables&quot;: &quot;^1.10.18&quot;,&quot;datatables.net-bs4&quot;: &quot;^1.10.23&quot;,&quot;encodeurl&quot;: &quot;^1.0.2&quot;,&quot;escape-html&quot;: &quot;^1.0.3&quot;,&quot;eslint-plugin-react-hooks&quot;: &quot;^2.3.0&quot;,&quot;etag&quot;: &quot;^1.8.1&quot;,&quot;extract-data-from-text&quot;: &quot;^1.0.2&quot;,&quot;helmet&quot;: &quot;^3.21.2&quot;,&quot;into-stream&quot;: &quot;^5.1.1&quot;,&quot;jsforce&quot;: &quot;^1.10.1&quot;,&quot;knex&quot;: &quot;^0.21.16&quot;,&quot;knex-migrate&quot;: &quot;^1.7.4&quot;,&quot;masonry-layout&quot;: &quot;^4.2.2&quot;,&quot;merge-descriptors&quot;: &quot;^1.0.1&quot;,&quot;method-override&quot;: &quot;^3.0.0&quot;,&quot;modernizr&quot;: &quot;^3.11.7&quot;,&quot;node-email-reply-parser&quot;: &quot;^0.1.1&quot;,&quot;opencollective-postinstall&quot;: &quot;^2.0.2&quot;,&quot;parse-domain&quot;: &quot;^2.3.4&quot;,&quot;react&quot;: &quot;^16.14.0&quot;,&quot;react-dom&quot;: &quot;^16.14.0&quot;,&quot;restify&quot;: &quot;^8.5.1&quot;,&quot;serve-index&quot;: &quot;^1.9.1&quot;,&quot;summernote&quot;: &quot;^0.8.15&quot;,&quot;uikit&quot;: &quot;^3.6.21&quot;,&quot;underscore&quot;: &quot;^1.13.1&quot;,&quot;url-polyfill&quot;: &quot;^1.1.12&quot;,&quot;vcard-parser&quot;: &quot;^1.0.0&quot;, Development &quot;@microsoft/microsoft-graph-types&quot;: &quot;^1.37.0&quot;,&quot;adaptivecards&quot;: &quot;^2.6.0&quot;,&quot;archiver&quot;: &quot;^3.1.1&quot;,&quot;autoprefixer&quot;: &quot;^10.2.4&quot;,&quot;better-docs&quot;: &quot;^1.4.7&quot;,&quot;css-loader&quot;: &quot;^5.2.4&quot;,&quot;cssnano&quot;: &quot;^4.1.11&quot;,&quot;gulp-copy&quot;: &quot;^4.0.1&quot;,&quot;gulp-csso&quot;: &quot;^4.0.1&quot;,&quot;gulp-eslint&quot;: &quot;^6.0.0&quot;,&quot;gulp-exec&quot;: &quot;^4.0.0&quot;,&quot;gulp-htmlmin&quot;: &quot;^5.0.1&quot;,&quot;gulp-jsdoc3&quot;: &quot;^2.0.0&quot;,&quot;gulp-jslint&quot;: &quot;^1.0.10&quot;,&quot;gulp-markdown-toc&quot;: &quot;^1.1.0&quot;,&quot;gulp-plumber&quot;: &quot;^1.2.1&quot;,&quot;gulp-rename&quot;: &quot;^2.0.0&quot;,&quot;gulp-string-replace&quot;: &quot;^1.1.2&quot;,&quot;gulp-terser&quot;: &quot;^1.4.1&quot;,&quot;gulp-uglify&quot;: &quot;^3.0.2&quot;,&quot;gulplog&quot;: &quot;^1.0.0&quot;,&quot;jsdoc&quot;: &quot;^3.6.7&quot;,&quot;node-pandoc&quot;: &quot;^0.3.0&quot;,&quot;npm-license-crawler&quot;: &quot;^0.2.1&quot;,&quot;shx&quot;: &quot;^0.3.3&quot;,&quot;sloc&quot;: &quot;^0.2.1&quot;,&quot;snazzy&quot;: &quot;^8.0.0&quot;,&quot;style-loader&quot;: &quot;^2.0.0&quot;, "},{"title":"[3.3] (2021-06-18)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#33-2021-06-18","content":"fixed: Issue with flags on template language #814fixed: Salestim display in Pl-Pl fails to default to english #813fixed: Planner Provisioning not Working in PPR #812 Updated the app installation process, but the root cause seems to be that the service account didn't had access to the app (or may it needs to open it once... to be checked)Fixes this other related issue: &quot;Planner provisioning failing with same planner added in the tab in PPR&quot; #815 fixed: Provisioning stucked at &quot;Processing Request&quot; #807 The provisioning engine does not rely on the standard cloning feature anymoreFixed multiple 401 errors with token renewalNow the service account access token is refreshed on provisioning startup fixed: nBold app &amp; nBold home: BLANK #801 Analysis: Looks like the issue only affects some tenants (Maybe related to waves of migrations/deployments on MS side)Browser console stack trace: api.salestim.io/v1.0/me/roles:1 Failed to load resource: the server responded with a status of 403 (Forbidden) main.js:3049 Error retreiving user roles. error @ main.js:3049 main.js:3050 Object main.js:181 Error loading user roles{&quot;readyState&quot;:4,&quot;responseText&quot;:&quot;{\\&quot;message\\&quot;:\\&quot;This resource requires one of the following roles: AUTHORIZED_APP,AUTHENTICATED_USER\\&quot;}&quot;,&quot;responseJSON&quot;:{&quot;message&quot;:&quot;This resource requires one of the following roles: AUTHORIZED_APP,AUTHENTICATED_USER&quot;},&quot;status&quot;:403,&quot;statusText&quot;:&quot;Forbidden&quot;} (anonymous) @ main.js:181 Updates: Updated calls to the Microsoft Graph to retreive directory roles members using the new signature: https://docs.microsoft.com/en-us/graph/api/directoryrole-list-members?view=graph-rest-1.0&amp;tabs=http GET /directoryRoles/roleTemplateId={role-templateId}/members Side benefit, it's now done in one call instead of two. changed: Update to the GenerateHookSignature API operation and PowerPlatform action The endpoint signature now only accepts a json object for the payload parameter instead of a string, in order to avoid encoding issues. HookSignatureRequest: title: Hook Signature Request description: A HookSignatureRequest object comprised of the secret and payload. type: object properties: secret: description: Webhook secret type: string payload: description: Webhook payload type: object required: - secret - payload fixed: Folders Copy not working for a specific Template #749 Reference: Error in graphServices/cloneFiles/copyDriveItem/waitForTeamsAsyncOperation: https://github.com/nboldhq/Ops/issues/487448 Reported failed requests: Tuesday, April 6, 2021 7:13 AM:32:  Saved : Request saved with id 'e89081d1-955c-4ad4-b734-d0311bb21e7b-72bc4e4a-d71b-4a36-a2eb-40ff2a8a19f8-ed396cce-b38a-4b01-b2a4-5d4b68225031'Monday, April 5, 2021 5:39 PM:56:  Saved : Request saved with id 'e89081d1-955c-4ad4-b734-d0311bb21e7b-72bc4e4a-d71b-4a36-a2eb-40ff2a8a19f8-359c8faf-fb5a-4c82-9853-a8612b71594b'tid: e89081d1-955c-4ad4-b734-d0311bb21e7buid: 72bc4e4a-d71b-4a36-a2eb-40ff2a8a19f8teams context: {&quot;appIconPosition&quot;:28,&quot;appSessionId&quot;:&quot;b20a735e-13f4-4c01-8e47-3cbaf9a49602&quot;,&quot;chatId&quot;:&quot;&quot;,&quot;entityId&quot;:&quot;io.salestim.automation.home&quot;,&quot;frameContext&quot;:&quot;content&quot;,&quot;hostClientType&quot;:&quot;desktop&quot;,&quot;isFullScreen&quot;:false,&quot;isMultiWindow&quot;:false,&quot;jsonTabUrl&quot;:&quot;microsoft-teams-json-tab.azurewebsites.net&quot;,&quot;locale&quot;:&quot;en-us&quot;,&quot;loginHint&quot;:&quot;LAtarian@mccarthy.com&quot;,&quot;meetingId&quot;:&quot;&quot;,&quot;ringId&quot;:&quot;general&quot;,&quot;sessionId&quot;:&quot;1f4dc72c-d2c9-439d-d35b-c301d52a8741&quot;,&quot;sourceOrigin&quot;:null,&quot;subEntityId&quot;:&quot;&quot;,&quot;teamSiteDomain&quot;:&quot;mccarthy.sharepoint.com&quot;,&quot;teamSitePath&quot;:&quot;&quot;,&quot;teamSiteUrl&quot;:&quot;&quot;,&quot;tenantSKU&quot;:&quot;enterprise&quot;,&quot;theme&quot;:&quot;default&quot;,&quot;tid&quot;:&quot;e89081d1-955c-4ad4-b734-d0311bb21e7b&quot;,&quot;upn&quot;:&quot;LAtarian@mccarthy.com&quot;,&quot;userLicenseType&quot;:&quot;Unknown&quot;,&quot;userObjectId&quot;:&quot;72bc4e4a-d71b-4a36-a2eb-40ff2a8a19f8&quot;,&quot;userPrincipalName&quot;:&quot;LAtarian@mccarthy.com&quot;} Resolution: The graphHelper/getTeamsDriveChildren function was using the Graph SDK. Now replaced by a 'request' operation changed: In-product release notes now restricted to &quot;Change managers&quot;changed: Connected Apps features visibility The Connected Apps tab is only visible to users with the &quot;Change Manager&quot; role (OR teams service admin or global admin)The Audit Trails tab is only visible to users with the &quot;Change Manager&quot; AND &quot;Compliance Managers&quot; roles (OR teams service admin or global admin) "},{"title":"[3.1] (2021-05-30)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#31-2021-05-30","content":"fix: Error in approveApproval: Cannot retreive requester user (PRD) #790 Error message: at Object.logInternalServerError (/home/site/wwwroot/src/app/api/api-helper.js:32:20) at /home/site/wwwroot/src/app/api/routes/approvals/approvals.js:704:25 at Object.getUser (/home/site/wwwroot/src/microsoft/db/cosmosDB/cosmosDbServices.js:44:28) Root cause: At line 633 of approvals.js, the function is expecting a nBold internal user ID, and receives instead an Azure AD object ID. added: In-product release notes Implemented using the Headway appPublic release notes page: https://headwayapp.co/salestim-changelogMessage is shown in the home navigation bar only if there are unseen updatesThe counter uses eyecatching animations so users are nagged to click the badgeFor testing purposes, the unseen count could be reinitialized from the Advanced menu (8 clicks on the app icon) added: Webhooks run history A new internal event webhook_run_executed is triggered when a new webhook job is doneThe webhook job is tracked in our events tables evt_webhook_run_executed, with the following properties: Tenant IDWebhook IDRun IDPayloadStart dateEnd dateDuration (ms)AttemptsStatus: Succeeded/FailedFailed reason New API operations: getaudittrails, getaudittrail /audittrails/:code with code = 'webhook_run_executed' Accessible from the API Explorer From the Integration page, we now have a new tab &quot;Audit Trails&quot; that shows all the audit trails for the connected apps and webhooks for the last 28 days Support for I18ndownload audit trails as excel Availability: User need both CHANGE_MANAGER and COMPLIANCE_MANAGER to see this feature changed: Throttling headers are now included in CORS requests Rationale: CORS requests have limitations and show only a subset of headers: Cache-ControlContent-LanguageContent-TypeExpiresLast-ModifiedPragma Impact: This issue doesn't impact API requests made from a third-party client or server app, only web clientsSolution: In order to show more headers on the response, the server has to add a header to allow more extra headers. The API server now systematically includes the following headers: 'Access-Control-Expose-Headers': 'X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset, Retry-After' Headers could be iterated from the client by: for (var pair of res.headers.entries()) { console.log(pair[0]+ ': '+ pair[1]); } Control: Try to refresh an audit trail more than 6 times in a row to see the warning message. added: Advanced error diagnostic for issue: Error in graphHelper/userHasDirectoryRole/getDirectoryRoles #787 Role Template Id reference: https://docs.microsoft.com/en-us/azure/active-directory/roles/permissions-reference#all-rolesAdditional debug infos added at /home/site/wwwroot/src/microsoft/graph/graphHelper.js:1297:17 changed: JS bundles and mins are now excluded from eslint and standard audit reportschanged: Power Automate and Logic Apps connector labels Reference: https://docs.microsoft.com/en-us/connectors/custom-connectors/openapi-extensionsReviewed the following properties Summary &gt; Action title (Sentence cased)x-ms-summary &gt; Parameter + Response schema (Title Case)descriptionx-ms-visibility &gt; Operations, Parameters, Schemasx-ms-trigger-hint &gt; Operation (Sentence cased) Changed: Power Automate and Logic Apps connector default webhook name and description Now each trigger (starting with &quot;When...&quot;) sets its own default values for the webhook name and description changed: Migration to FontAwesome 5.15.3 Replaced the npm package &quot;font-awesome&quot; v4.7 to &quot;@fortawesome/fontawesome-free&quot; v5.15.3 added: Service account granted permissions are now visible from the &quot;Settings&quot; tabfixed: Check if the service account is a member of a team selected as template from the catalog Works again, using a new control technique added: The OpenAPI definition of the /hooks operation now describes the events and body schema of all the possible callbacks from all the supported webhooks. It follows the OpenAPI 3 Specification for CallbacksSee it live in API Explorer. changed: The TeamProvisioningCompletedNotificationPayload object (payload of the team_provisioning_completed webhook), now has an additional metadata property holding the metadata passed to the createTeamProvisioningJob operationchanged: Metadata Metadata passed through the createTeamProvisioningJob operation The createTeamProvisioningJob operation accepts an arbitrary json object that could be used as a naming convention tag, or for further reference from the APIInput: { &quot;metadata&quot;: {} } Storage Metadata passed through the createTeamProvisioningJob are stored as a &quot;freeform_metadata&quot; jsonb field on the &quot;team&quot; table in DB &quot;freeform_metadata&quot;: {} Metadata defined by a connected app When an event is raised, or a job is executed, a connected app can store/update metadata and associate them with an object (team, channel or tab)Storage To keep the DB schema static, we're leveraging a single partitioned jsonb field in PostgresqlConnected apps metadata are stored as a &quot;connectedapps_metadata&quot; field on &quot;team&quot;, &quot;channel&quot; and &quot;tab&quot; tables, each one partitioned in its own key: &quot;connectedapps_metadata&quot;: { &quot;CONNECTEDAPP_CONFIGURATION_ID&quot;: {} } fixed: Mobile app rendering issues preventing app publishing to the Teams store All the screen now have narrowed external marginsFixed the cards width on mobileRemoved query parameters from teams packages, it now relies only on the url path (/home, /catalog...)Debugging tool used to remotely access the browser console: https://www.npmjs.com/package/weinre "},{"title":"[3.0] (2021-04-16) - Codename \"Shodai\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#30-2021-04-16---codename-shodai","content":"added: API Explorer support for application authenticationchanged: API authentication documentation to support application mode: https://developers.salestim.com/api/authenticationadded: &quot;App&quot; tags in template naming convention Purpose: use the app id or name in the naming convention when there is no requester (the requester is an app)Tags: app.idapp.name added: New API operation &quot;GetTemplates&quot; that retreives all templates in an organization for app modeadded: New API operation &quot;UpdateTeam&quot;added: API and Connectors support for multiple access token types Supported access token types: on behalf of a user (OAuth 2.0 authorization code grant flow): https://docs.microsoft.com/en-us/graph/auth-v2-useras an app (OAuth 2.0 client credentials grant flow): https://docs.microsoft.com/en-us/graph/auth-v2-service changed: The &quot;GetUsers&quot; API operation now supports standard Microsoft Graph filters: https://docs.microsoft.com/en-us/graph/api/user-list?view=graph-rest-1.0&amp;tabs=http#optional-query-parameterschanged: The &quot;GetJob&quot; operation is now only visible in connectors through searchchanged: Approval documentation on Tech Hub Now includes these options: Approval email sent by nBold: This is the default and easiest option, works without any configuration.Approval email sent by your organization: If you need advanced security/compliance control over your notification emails.Microsoft Teams Approval App: A Microsoft Teams native experience, that you can customize using Power Automate or Logic Apps.Use your own custom app: Bring your own aproval workflow as a custom application. See: https://developers.salestim.com/nocode/approval changed: Teams packages generation now includes a tag in their names and descriptions to flag the target environment Example: &quot;name&quot;: { &quot;short&quot;: &quot;nBold-(PPR)&quot;, &quot;full&quot;: &quot;nBold Governance Automation-(PPR)&quot; } changed: Audience targeting Syntax Test is restricted to users with the &quot;Change Manager&quot; rolechanged: Audience targeting Syntax Test Now you can test your audience targeting rules against a specific user profile and see live results.Once a test user profile is loaded, it can be updated through a json editor to perform live tests.The json editor component supports: en, zh-CN, pt-BR, tr, ja, fr-FR, de, ru added: Template-level sensitivity labels UI updates Home Replaced &quot;Classification&quot; by &quot;Sensitivity Labels&quot; in the home UIUpdated i18n strings in french and english to reflect this update Catalog When accessing the &quot;New template&quot; or &quot;Edit template&quot; form, a check is performed to control if the current user has consented to all the permissions associated with the Catalog Manager role (especially in this context the InformationProtectionPolicy.Read permission)If not, the user is asked to grant the app new permissions added: New Tech Hub article: &quot;Use Active Directory schema extensions in naming conventions and audience targeting rules&quot; https://developers.salestim.com/nocode/ad-schema-extensions changed: Removed the useless top bar from the &quot;Integration&quot; and &quot;Settings&quot; app tabschanged: Releases and Installation options in Tech Hub &quot;Releases&quot; and &quot;Installation Options&quot; now have their own pages: https://developers.salestim.com/platform/releaseshttps://developers.salestim.com/platform/installation-options Installation options now includes a specific chapter &quot;Supported customizations&quot;: https://developers.salestim.com/platform/installation-options.html#supported-customizations added: New RBAC role &quot;Change Manager&quot; Purpose: Deliver preview features to selected usersUpdated documentation: RBAC: https://developers.salestim.com/platform/rbacTargeted Release: https://developers.salestim.com/platform/releases.html#targeted-release changed: Updated all references to the general channel of a team to use the /v1.0/teams/${teamId}/primaryChannel endpointadded: Approval trigger &amp; actions for connectors #connectors Triggers: When a team creation approval is requested: Trigger: https://developers.salestim.com/connectors/connectors-actions.html#when-a-team-creation-approval-is-requestedWebhook: https://developers.salestim.com/api/webhooks.html#supported-events When a team creation is approved: Trigger: https://developers.salestim.com/connectors/connectors-actions.html#when-a-team-creation-is-approvedWebhook: https://developers.salestim.com/api/webhooks.html#team-creation-approved When a team creation is rejected: Trigger: https://developers.salestim.com/connectors/connectors-actions.html#when-a-team-creation-is-rejectedWebhook: https://developers.salestim.com/api/webhooks.html#team-creation-rejected Actions: Approve team creation: https://developers.salestim.com/api/reference/Apis/ApprovalsApi.html#approveteamcreationReject team creation: https://developers.salestim.com/api/reference/Apis/ApprovalsApi.html#rejectteamcreation added: nBold Connector for Azure Logic Apps documentation #logicapps https://developers.salestim.com/connectors/logic-apps-connector "},{"title":"[2.2] Codename \"Kakuryu\" - (2021-04-07)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#22-codename-kakuryu---2021-04-07","content":"added: New Power Platform actions #powerplatform Actions: Delete a team: DeleteTeamArchive a team: ArchiveTeamUnarchive team: UnarchiveTeamAdd team member: AddTeamMember See: https://developers.salestim.com/connectors/connectors-actions.html#actions added: API Explorer development mode Add ?dev=true to the API Explorer URL to access the list of servers (PRD, PPR...)Example: https://developers.salestim.com/api/explorer.html?dev=true changed: Power Platform information from the &quot;Integration&quot; tab #powerplatform From the integration tab, a message in the card header indicates if the webhook is a custom one, or created from Power PlatformFrom the webhook details, if the webhook is coming from Power Platform, is shows the workflow ID, name and operation changed: API and Power Platform &quot;Hooks&quot; endpoint are now restricted to integration managers by RBAC API operations: GetHooksEventsCreateHookDeleteHookGenerateHookSignature Power Platform triggers and actions: TeamCreatedHookTeamProvisioningCompletedHook added: New Power Platform connector triggers: team_created and team_provisioning_done #powerplatform Triggers: When a new team is created (team_created) When a team is provisioned using a template (team_provisioning_done) Implemented as dynamic webhooks (webhooks are created/deleted directly by Power Platform)Documentation: https://developers.salestim.com/nocode/power-platform-actions.html#triggers added: New Power Platform connector test connection endpoint #powerplatform Used by Power Platform to test the active connection to the APIEndpoint: GET GA_API_PATH + '/monitoring/test_api_connection'See: https://docs.microsoft.com/en-us/connectors/custom-connectors/test-connection changed: Power Platform operations versioning #powerplatform All operations are now versioned and tagged using either &quot;Poduction&quot; or &quot;Preview&quot;See: https://docs.microsoft.com/en-us/connectors/custom-connectors/operational-versioning added: New Power Platform documentation section: &quot;Update the Power Platform Connector&quot; #powerplatform See https://developers.salestim.com/nocode/power-platform-connector.html#_3-update-the-power-platform-connector added: New Power Platform actions and triggers documentation #powerplatform Power Platform documentation now splitted between &quot;Connector&quot; (how to install it) and &quot;Triggers and Actions&quot; (reference) See https://developers.salestim.com/nocode/power-platform-actions added: New Power Platform &quot;teams&quot; actions #powerplatform GetTeamGetTeamChannelsGetTeamPrimaryChannelCreateTeamChannelGetTeamChannelTabsCreateTeamChannelTab added: New Power Platform action &quot;GenerateHookSignature&quot; #powerplatform Purpose: bring Power Platform the capability to verify the signature generated from a webhook secret.Testing procedure: Create a new &quot;Automated cloud flow&quot; and skip the assistantAdd a &quot;When a HTTP request is received&quot; trigger Paste a payload schema from: https://developers.salestim.com/api/webhooks.html#supported-events Add a &quot;Compose&quot; action and name it &quot;Get Webhook Signature Header&quot; Retreive the &quot;X-nBold-Signature&quot; header using this formula triggerOutputs()['headers']['X-nBold-Signature'] Add a &quot;Compose&quot; action and name it &quot;Get Webhook Payload&quot; Retreive the payload using this formula triggerBody() Add a nBold action &quot;Generate a signature from a secret and a webhook payload&quot; Set the secret value previously used during the webhook creationSet the &quot;Webhook payload&quot; to the result of the &quot;Get Webhook Payload&quot; action You can then compare the signature retreived from the &quot;Get Webhook Signature Header&quot; action with the signature calculated from the nBold &quot;GenerateHookSignature&quot; action. If they match, it means that the request was effectively coming from nBold. added: Webhooks payloads examples and schema #api The documentation now includes payload examples for the following events team_created and team_provisioning_completed.See: https://developers.salestim.com/api/webhooks.html#supported-events fixed: API explorer errors #api The API openapi definition is up to dateLogin / Logout works from the API Explorer changed: API Rate Limits #api Each endpoint is now governed by a limit defined by a &quot;tier&quot; Tier 1: 6 rpmTier 2: 20 rpmTier 3: 60 rpm Documentation: Rate limits by tiers: https://developers.salestim.com/api/rate-limitsThrottling guidance: https://developers.salestim.com/api/throttling added: Global Node/Express timeout #api Implemented the connect-timeout moduleAll the API requests now timeout after 5 seconds changed: TechHub &quot;Code Copy&quot; feature #techhub New &quot;Copy Code&quot; plugin that doesn't interfer with the language tag + Complete review of all the code blocks changed: Naming convention page #techhub Naming conventions page in Tech Hub was updated to reflect the new team name length (to 264) and authorized characters (such as &quot;|&quot;) fixed: Approval workflow: multiple and unreadable automated emails #629added GitHub actions have now a workflow_dispatch trigger so that actions could be started manuallyfixed: Audience Targeting - syntax display issue #739fixed: Naming Convention - policy display issue #737changed: Azure Application Insights configuration #AAI Client-side events New &quot;Page View&quot; events to track pages and high UI-level activities: { name: 'loginsso', pageType: 'page' }, { name: 'home', pageType: 'page' }, { name: 'newprovisioningrequest', pageType: 'popin' }, { name: 'myprovisioningrequests', pageType: 'popin' }, { name: 'catalog', pageType: 'page' }, { name: 'newtemplate', pageType: 'popin' }, { name: 'edittemplate', pageType: 'popin' }, { name: 'integration', pageType: 'page' }, { name: 'hooks', pageType: 'tab' }, { name: 'newhook', pageType: 'popin' }, { name: 'savehooks', pageType: 'form' }, { name: 'connectedapps', pageType: 'tab' }, { name: 'settings', pageType: 'page' }, { name: 'permissionmodel', pageType: 'tab' }, { name: 'serviceaccountupdate', pageType: 'tab' }, { name: 'serviceaccountremove', pageType: 'tab' }, { name: 'serviceaccountcheck', pageType: 'tab' }, { name: 'approvalsettings', pageType: 'tab' }, { name: 'rbacsettings', pageType: 'tab' }, { name: 'systeminformation', pageType: 'tab' }, { name: 'systeminformationenvironment', pageType: 'tab' }, { name: 'systeminformationlicense', pageType: 'tab' }, { name: 'systeminformationlegal', pageType: 'tab' }, { name: 'unauthorized', pageType: 'page' } &quot;Page View&quot; events properties: Standard properties (Automatically collected): Page view URL: 'https://avi.nbold.dev/catalog...' Browser version: 'Edg 89.0' Country or region: 'France' State or province: 'Paris' City: 'Paris' Page view load time: '744 ms' Event time: '3/27/2021 3:58:26 PM (Local time)' pageView/id: '2b20a209e20d47dba44a640e998f21f9' View page name: 'catalog' // page code Performance: '500ms-1sec' Telemetry type: 'pageView' Operation name: '/catalog' Operation Id: '2b20a209e20d47dba44a640e998f21f9' Parent Id: '2b20a209e20d47dba44a640e998f21f9' Session Id: 'nyoxDPSyVJGI17qyptv5hg' // User and Auth ID defined through appInsights.setAuthenticatedUserContext User Id: 'uASTl' // Anonymous user id generated by AAI Auth Id: 'gmeyer@salestimelite100.onmicrosoft.com' // Set by nBold as the user UPN Account Id: 'af54e9f5-6b9e-488f-b1e7-d97ff21b1cf3' // Set by nBold as the tenant ID Device type: 'Browser' Device model: 'Other' Operating system: 'Windows 10' Client IP address: '0.0.0.0' // Cloud role and instance defined through envelope.tags['ai.cloud.role'] and envelope.tags['ai.cloud.roleInstance'] Cloud role name: 'webclient' // Set by nBold for the web app Cloud role instance: 'gmeyer@salestimelite100.onmicrosoft.com' // Set by nBold as the user UPN SDK version: 'javascript:2.5.11' Sample rate: '1' Custom properties: companyName: null // From the user profile refUri: https://teams.microsoft.com/ tenantDefaultDomainName: salestimelite100.onmicrosoft.com // From the organization tenantInitialDomainName: salestimelite100.onmicrosoft.com // From the organization hostClientType: web // From the Teams context preferredLanguage: en // From the user profile userObjectId: c12e8c68-ba71-47ed-84bb-ab68e8452bf3 // From the Teams context displayName: Guillaume Meyer // From the Teams context department: null // From the user profile jobTitle: null // From the user profile locale: en-us // From the Teams context email: gmeyer@salestimelite100.onmicrosoft.com // From the user profile tid: af54e9f5-6b9e-488f-b1e7-d97ff21b1cf3 // From the Teams context upn: gmeyer@salestimelite100.onmicrosoft.com // From the Teams context Server-side events Identified by: { 'Cloud role name': 'app:ppr', // Role of the container. Use the format ROLE:ENVIRONMENT 'Cloud role instance': 'st-app-ppr-01'// The unique container name. Use the format st-ROLE-ENVIRONMENT-INSTANCE } N.B: Role instance name: We don't use os.hostname (that may change as containers are refreshed)Instead, we rely on the WEBSITE_SITE_NAME environment variableSee: https://github.com/projectkudu/kudu/wiki/Azure-runtime-environment added: New server roles: Service Discovery, Scheduler Service Discovery: Exposes through an api endpoint the whole configurationScheduler: Schedule jobs and distribute workload through workersInfrastructure changes: PPR environment: st-app-ppr-01st-api-ppr-01st-job-ppr-01st-connectedapps-ppr-01 (new)st-discovery-ppr-01 (new)st-scheduler-ppr-01 (new) PRD environment: st-api-prd-01st-api-prd-02st-app-prd-01st-app-prd-02 (new)st-connectedapps-prd-01 (new)st-discovery-prd-01 (new)st-events-prdst-job-prd-01st-job-prd-02 (new)st-scheduler-prd-01 (new) Changed: &quot;Layered&quot; App Service Plans Purposes: Create more isolation between the architecture layers (web, api, jobs...)Ease performance monitoring and scalability Each layer now has its own app service plan to scale it more easily st-serviceplan-app-prd (Web servers) st-app-prd-01st-app-prd-02 st-serviceplan-api-prd (API servers) st-api-prd-01st-api-prd-02st-connectedapps-prd-01st-discovery-prd-01st-events-prd st-serviceplan-job-prd (Jobs servers) st-job-prd-01st-job-prd-02st-scheduler-prd-01 changed: Application logs collection No more custom log files stored and managed by the application. Everything is managed through Docker containers logs that dynamically collects console/stdout logs added: Status monitoring for recently added services (connectedapps, discovery, scheduler, eventscollector) Updated status page: https://status.salestim.com/ added: Application Insights Integration Purpose: Control Azure Application Insights integration through environment variablesMICROSOFT_APPINSIGHTS_INTEGRATION_ENABLEDD: Enable/Disable the integration with Azure Application Insights in UI and Servers changed: GitHub Integration Purpose: Control GitHub integration through environment variablesGITHUB_INTEGRATION_ENABLED: Enable/Disable the creation of GitHub issues on alerts changed: SendGrid Alert Emails Integration Purpose: Control SendGrid integration through environment variablesMAIL_ALERTS_ENABLED: Enable/Disable sending emails on alerts changed: Intercom Integration Purpose: Control Intercom integration through environment variablesINTERCOM_INTEGRATION_ENABLED: Enable/Disable Intercom integration in UI and Servers fixed: API reference documentation #api Regenerated from the updated API openapi definition Accessible here: https://developers.salestim.com/api/reference/ fixed: Naming convention in inserting named and numerical character references in team name, description and welcome message Example: When using &quot;R&amp;D&quot; in a team name (from the UI or the API), the generated name is &quot;R&amp;&quot;Origin: The EJS templating system escapes special charactersResolution: Unescape the result of the EJS templating operationModule: We're now using the HE module (for HTML Entities) to decode named and numerical characters changed: Log files are not published to the ops repository anymorefixed: Requested members are not cleared between two requestsfixed: Audience checkbox appears as checked even if it was previously saved as &quot;disabled&quot; fixed a regression in template form processing as the audienceTargeting targeting was processed as &quot;false&quot; (as a string) instead of false (as a boolean)Fixed the &quot;Check Syntax&quot; operation changed: Team name length and authorized characters The maximum team name length has been updated to 264, which is the limit of the underlying group name (See: https://docs.microsoft.com/en-us/microsoft-365/solutions/groups-naming-policy?view=o365-worldwide#things-to-look-out-for) This limit is validated by combining the lengths of both the requested team name and the dynamic naming convention The &quot;|&quot; character is now authorized changed: New cloned planner plans naming convention Updated the function clonePlannerTabCloned Planner plans are now followinf the naming convention: const planName = `${teamDisplayName} - ${sourcePlanDisplayName}` added: Channels calendar tabs configuration After the channel calendar has been cloned, the provisioning process now generates the right contentUrl property value from the configuration object: const tabUrl = `https://teams.microsoft.com/l/channel/${channelId}/tab%3a%3a${tabId}?label=${tabDisplayName}&amp;groupId=${teamId}&amp;tenantId=${tenantId}` changed: TechHub documentation for RBAC and Audience Targeting Audience targeting: Included docs and example for the user.groups.direct tagUpdated RBAC docs to include our new roles, catalog managers and integration managers changed: TechHub now uses Algolia for its full-text search engine.changed: nBold Connector for Power Platform documentation Updated the &quot;Abstract&quot; sectionAdded an introductory message describing the purpose of each stepAdded a few minor additional stepsAdded blog articles links to the &quot;Getting Started&quot; sectionGraph permissions are now alphabetically orderedAdded a visual process overviewAdded a plugin that enables to copy to your clipboard code blocks (such as names or URLs) in one click (easier that having to select precisely then copy)Added text zones to paste temporarily the client id and secrets while executing the procedure (avoid using a notepad...)Steps are now numbered for easier reference changed: Environment variables As a best practice, dotenv is not loaded anymore through a require from the app code itself.It's instead pre-loaded through the node --require dotenv/config command-line option: In execution mode, from the package.json scripts: node --require dotenv/config src/index.jsIn development mode, from the launch.json file: &quot;program&quot;: &quot;${workspaceFolder}/src/index.js&quot;, &quot;runtimeArgs&quot;: [ &quot;--require&quot;, &quot;dotenv/config&quot; ], .env file has been refactored and comments improved changed: Teams packages generation The multiplicity of packages to generate, based on so many files, generated issues and made this process tedious and prone to errors.Now all the packages (Standalone and Home) are automatically generated from only two template files.All the variables are stored in the .env configuration fileHere is the up-to-date list of generated packages (we now have the home package for int and uat too), all of them still accessible from https://dist.salestim.io/packages/[PACKAGE_FILE]: io.salestim.automation.standalone.dev.zip io.salestim.automation.standalone.int.zip io.salestim.automation.standalone.ppr.zip io.salestim.automation.standalone.prd.zip io.salestim.automation.standalone.uat.zip io.salestim.automation.targeted.home.dev.zip io.salestim.automation.targeted.home.int.zip io.salestim.automation.targeted.home.ppr.zip io.salestim.automation.targeted.home.prd.zip io.salestim.automation.targeted.home.uat.zip added: Webhooks Webhooks enable organizations to trigger automated operations outside of the nBold platform, such as in a custom application, or in an automation tool such as Power Automate or Zapier.See the online doc: https://developers.salestim.com/api/webhooks Power Platform Connector v1 #534 Available actions: GetMyCatalogTemplates: Returns a collection of catalog templates, filtered by the audience targeting rules for the connected userGetCatalogTemplates: Returns all the catalog templates, restricted to catalog administratorsCreateTeamProvisioningJob: Create a new team based on a template, returns a provisioning job IDGetJob: Returns the current status of a provisioning request Documentation: https://developers.salestim.com/nocode/power-platform.html changed: Updated list of downloadable packages: https://dist.salestim.io/packages/io.salestim.automation.standalone.dev.zip https://dist.salestim.io/packages/io.salestim.automation.standalone.int.zip https://dist.salestim.io/packages/io.salestim.automation.standalone.ppr-pre-sso.zip # PPR without sso https://dist.salestim.io/packages/io.salestim.automation.standalone.ppr.zip # PPR with SSO https://dist.salestim.io/packages/io.salestim.automation.standalone.prd-pre-sso.zip # PRD without SSO https://dist.salestim.io/packages/io.salestim.automation.standalone.prd.zip # PRD with SSO https://dist.salestim.io/packages/io.salestim.automation.standalone.uat.zip https://dist.salestim.io/packages/io.salestim.automation.targeted.home.dev.zip https://dist.salestim.io/packages/io.salestim.automation.targeted.home.ppr.zip https://dist.salestim.io/packages/io.salestim.automation.targeted.home.prd.zip # PRD with SSO changed: Migrate to the New Microsoft Graph Team Membership Management API in v1 #624 Now members are added through teams membership, instead of groups membershipsAdd member to channel: https://docs.microsoft.com/en-us/graph/api/channel-post-members?view=graph-rest-beta&amp;tabs=httpCreate channel: https://docs.microsoft.com/en-us/graph/api/channel-post?view=graph-rest-1.0&amp;tabs=http fix: Prevent auto-fill on text and pickers fields Problem: Under certain circumstances (when using teams from a chromium-based browser), the browser shows a list of previously selected values for forms fields team name, descriptionadditional members (More problematic as is masks the dropdown list of values) Disabling this behavior is now enforced by using a hack to prevent the browser to use autofill on selectize fields Chromium has hard-coded values to prevent autofill on password fields, see: https://stackoverflow.com/questions/30053167/autocomplete-off-vs-false fix: Regression on tabs provisioning in PPR environment. Root cause: the teamsAppId property from the tab object is deprecated from the v1.0 endpointResolution: Instead of tab.teamsAppId, use tab.teamsApp.id fix: Service account owner check on templates for RBAC users displays the wrong message in PPR environment. The non-tenant-admin user were not able to retreive service account id from our API, making oi appear as a non-owner.Resolution: Catalog admins can now access the service account ID (as long as we're using a delegated mode with a service account) fix: Mandatory membership is not enforced in provisioning form in PPR environment. This feature was available for standard (non-sso) authenticated users.Resolution: It is now enforced for sso-connected users fix: Naming convention @tags (and audience targeting) are not displayed properly in PPR environment. The 'tagify' component we're using introduced a new bug in their latest version when rendering non-sanitized labelsResolution: Tags labels (the one visible in the dropdown) now don't use the character '&gt;' anymore (replaced by ':') fix: #security updated bull-board to v1.2.0 due a a vulnerability in highlight.js. See https://github.com/advisories/GHSA-7wwv-vh3v-89cqfixed: RBAC settings for catalog managers not applied in PPR environment.fixed: Naming convention tags are not properly displayed in PPR environment.changed: The &quot;Compliance&quot; tab is no hidden in PPR environment.fix: Placeholder label in the RBAC tab (tabs.settings.rbac.catalogManagers.placeholder) in PPR environment.fixed: Cannot save a new template due to an error with Summernote plugin in PPR environment.changed: SSO login page optimization JS and CSS bundled and minifiedRemoved unnecessary js librariesIntercom is only loaded in case of admin consent required changed: Admin consent page Two buttons: Consent as an administratorI'm not an administrator &gt; Talk to support fix: Removing the emoji in the &quot;not admin consented&quot; messageadded: Connected Apps server in productionfix: Show channel by default for requesters / owners / members #350 The IsFavoriteByDefault channel property is now officially supported by Microsoft: See #6792During the provisioning process, nBold replicate the IsFavoriteByDefault property value from the original channel to the cloned/created one. fixed: JOB RENEWSERVICEACCOUNTTOKENS: Task execution failed: Error in renewServiceAccountTokens/cosmosDbServices/updateCustomer: {&quot;code&quot;:429,&quot;body&quot;:&quot;{\\&quot;code\\&quot;:\\&quot;429\\&quot;,\\&quot;message\\&quot;:\\&quot;Message: {\\\\&quot;Errors\\\\&quot;:[ (PRD) #655 This exception was causing global service interruption because this job was putting access to cosmosdb in throttled modeImplemented a rate limiter for update operations (similar to the graph limiter) using the Bottleneck packageJob rescheduled every sunday at 6am throught cron 0 6 * * 0 changed: Enable Microsoft Teams App SSO for the Home package #393added: Role-Based Access Control (RBAC) for Catalog Management #625added: Events Services (events.salestim.io) Abstract: Why: We're too tied to Intercom today, and Intercom lacks many ad-hoc reporting capabilitiesPurpose: Having a self-hosted events collector, a multiplexer, a Data Warehouse and a reports serverPreliminary analysis: See New events data collection platform #636Relies on EventNative The events service is comprised of two main workloads: Events Collector API: A global and unified events collector API for the whole nBold application platform. Examples of collected events: Client-side: navigation across pages, clicks...Server-side: containers start/stop, exceptions, new team provisioned, team template created... The events collector API is accessible through a unique endpoint events.salestim.io. Events Multiplexer ETL: An workflow that sends collected events to our DWH (Data WareHouse). Our DWH relies on an Azure-managed PostgreSQL database that can be accessed through our Reports Server. Infrastructure: EventNative docker image ksense/eventnative from Docker HubCustom docker image st-events-serverACR (Azure Container Registry) as a private docker registry: stregistry.azurecr.iost-events-prd app service that hosts the API and multiplexerAzure Front Door exposes the st-events-prd app service to events.salestim.ioEvents collected from events.salestim.io are pushed to our DWH, an Azure-managed PostgreSQL service, exposed at st-pgsql-prd.postgres.database.azure.com, in the events database. Learn more: See the README file from the Events Server repository. added: Reports Server (reports.salestim.io) Abstract: A self-service report server that may query multiple data source, especially our DWHRelies on RedashAccessible from reports.salestim.io Infrastructure: The Redash instance uses the Bitnami Redash image and hosts: Redash server rolesAn embedded Redis instanceAn embedded PostgreSQL instance The Azure VM is st-reports-prd added: Mandatory Owners &amp; Members (Security Policy) #623changed: Pre-production Home Package A new home package for the pre-production environment is now accessible here: https://dist.salestim.io/packages/io.salestim.automation.targeted.home.ppr.zip fixed: Mobile Icon format issue #642 Fixed by updating the accentColor property from manifests files from #a60a2d to #000000 fixed: #security Dependency Alert: build(deps): bump find-my-way from 2.2.3 to 2.2.5 #627changed: Status monitoring Services status is now monitored by both UptimeRobot and Azure Front DoorAlerts are now sent to: monitoring.alerts@salestim.com (Guillaume and Alex)Teams DevOps\\Ops channel Uptime Robot configuration: Websites are monitored as usual (basic HTTP GET probe every 5 min): Help CenterTech HubWebsite App Services: Use the HTTP method HEAD on /monitoring/ping on port 443. The only accepted UP status code is 200. PPR health probe frequency: 15 minPRD health probe frequency: 1 min Azure Front Door configuration: See: https://docs.microsoft.com/en-us/azure/frontdoor/front-door-health-probesMonitors all instances from the PPR and PRD backend pools Use the HTTP method HEAD on /monitoring/ping on port 443. The only accepted UP status code is 200.Since Front Door has many edge environments globally, health probe volume for your backends can be quite high - ranging from 25 requests every minute to as high as 1200 requests per minute, depending on the health probe frequency configured. With the default probe frequency of 30 seconds, the probe volume on your backend should be about 200 requests per minute.PPR health probe frequency: 255 seconds (higher possible value)PRD health probe frequency: 30 seconds fixed: An unhandledRejection has been detected. (PRD) #607 Impact: In some circumstances, the provisioning service may shutdown unexpectedly if the cloning operation raises an unknown errorResolution: Better processing of the error raised by Microsoft Graph fixed: [Provisionning Issue] - Impossible to create a team #604 related ops issue: Error cloning missing tabs in /graphServices/cloneTabsSettingsAndContents/cloningMissingChannelsAndTabs. (PRD) #357899Impacted code: GraphServices.js line 3100 // Depending on App Id switch (localSourceTab.teamsAppId.toLowerCase()) { Root cause: the teamsAppId property from the tab object is deprecated from the beta endpointResolution: Instead of tab.teamsAppId, use tab.teamsApp.id { &quot;id&quot;:&quot;07ebdc9b-8419-4f64-9cb4-1ab3c8ca96c3&quot;, &quot;displayName&quot;:&quot;testPA&quot;, &quot;teamsAppId&quot;:null, &quot;sortOrderIndex&quot;:&quot;10000&quot;, &quot;messageId&quot;:&quot;1593427526382&quot;, &quot;webUrl&quot;:&quot;https://teams.microsoft.com/l/entity/a6b63365-31a4-4f43-92ec-710b71557af9/...&quot;, &quot;configuration&quot;: { &quot;entityId&quot;:&quot;/providers/Microsoft.PowerApps/apps/98591a33-3382-4e71-aedb-c87000c39203&quot;, &quot;contentUrl&quot;:&quot;https://apps.powerapps.com/play/providers/Microsoft.PowerApps/apps/...&quot;, &quot;removeUrl&quot;:null, &quot;websiteUrl&quot;:&quot;https://apps.powerapps.com/play/providers/Microsoft.PowerApps/apps/...&quot;, &quot;dateAdded&quot;:&quot;2020-06-29T10:45:25.929Z&quot; }, &quot;teamsApp&quot;:{ &quot;id&quot;:&quot;a6b63365-31a4-4f43-92ec-710b71557af9&quot;, &quot;externalId&quot;:null, &quot;displayName&quot;:&quot;Power Apps&quot;, &quot;distributionMethod&quot;:&quot;store&quot; } } fixed: End-users are not able to see templates #594 Implementation app.js: Updated bodyParser json and urlencoded to a limitof '200mb' api.js: Disabled the helmet protection moduleDisabled the express-rate-limit module mainForms.js Replaced native fetch calls with their JQuery counterparts Resources: http://jsandersblog.azurewebsites.net/2020/04/23/azure-app-service-authentication-cors-error-easy-auth/https://social.msdn.microsoft.com/Forums/en-US/ffd280ce-323d-4083-bfef-3cba7b02de09/linux-app-service-throwing-request-body-too-large-when-uploading-file-to-my-service?forum=windowsazurewebsitespreviewFetch behavior: https://javascript.info/fetch-crossorigin fixed: Issue in templates Title in catalog #584 Removed 'UrlEncoding' in display changed: Support for the German language, both inside the product and for the manifests Supported language / countries: 'de-at' // Austria 'de-ch' // Switzerland 'de-de' // Germany 'de-li' // Liechtenstein 'de-lu' // Luxembourg changed: Teams packages generation Now during the build, teams manifests are generated using a template that inserts localized strings from our internationalization repo.Purpose, avoid future errors and make our localization process more simpleRelated issue #585 fixed: Build process is never ending, generating deployment errors Origin: Due to the new use of i18n server in the build process to dynamically insert locales variables to the teams manifests files, the default dev mode was using an &quot;auto-reload&quot; mode that prevented the build process to stop as it cas constantly listening for changes. fix: Disable the live-reload mode of the i18n module even in dev mode fixed: #security [INFODISC01] Verbosity errors leaks internal infrastructure information #566 Rationale: During the audit of uat.salestim.io, SYNETIS auditors have identified a medium vulnerability, allowing them to disclose some internal information about “CosmoDB” and more.When a POST request is made to the endpoint “/updateUser” if a value of a field is incorrectly set, the server return an error in JSON. Instead of a simple message, the error display lot of interesting information regarding the infrastructure of CosmoDB and the Azure Storage. This could be useful to perform another attack like SSRF (Server-Side Request Forgery).Example of POST request sent to the server with a bad value in “user%5Bid%5D=”: Implementation: Returned errors from CosmosDB are not returned anymore, replaced by custom one fixed: #security [INFODISC02] The endpoint “/refreshToken” send a JWT token in GET #565 Rationale: During the audit of uat.salestim.io, SYNETIS auditors have identified a medium vulnerability, which could be dangerous if the request was intercepted or if the content of this request was logged by a tool.Sometimes, the application made a GET request to “/refreshToken/[TOKEN_HERE]” to ask a Bearer token to Microsoft Graph API. The problem is, because the token is sent in GET, this could be present in logs and could be dangerous in case of compromising of the server, because all JWT tokens could be easily readable. Implementation: The /refreshToken endpoint is now implemented to only accept POST requests with the refresh token as the POST body fixed: #security [IMPROP02] Admin of an organization can modify the data of another admin (not in the same org) which can lead to account takeover #564 Rationale: During the audit of uat.salestim.io, SYNETIS auditors have identified a high vulnerability, allowing them to modify the data of another admin which is in another organization.Modification to such data could compromise customers and users. This vulnerability can also be used to craft a malicious payload and to create a Cross-Site Scripting (XSS) stored on the victim profil configuration.When an administrator open the configuration tab in https://uat.salestim.io/forms?stEntityId=io.salestim.automation.settings, he can modify his data (Provider Id for example) and save them. Implementation: The global former /updateCustomer endpoint is deprecated and not available anymore, now replaced by three more granular endpoints /updateCatalog/updateApprovalSettings/deleteServiceAccount fixed: #security [IMPROP03] A user can impersonate another user when sending the approval email for creating a team #563 Rationale: During the audit of uat.salestim.io, SYNETIS auditors have identified a high vulnerability, allowing them to impersonate another user when a team creation need an approval step.When a user create a new team, if the template used is configured to have a team approved, an email is sent to the user with the “approval” role for the team.When user send the request, a POST request is sent to the endpoint “/v1.0/jobs/provisioning” that includes information about the requester. Implementation: on the client side (createRequestFromForm), now only the minimal information are sent (content of the form and the template ID), using this structure: { team: { name: '', description: '', welcomeMessage: '', membership: { owners: [], members: [] } }, template: { id: '' } } On the server side (/jobs/createProvisioningJob), the requester information, template information and the organization information are retreived directly from the bearer token instead of passed by the client fixed: #security [SXSS01] Cross-Site Scripting (XSS) stored on 'name' and 'description' field in template creation #567 Rationale: During the audit of uat.salestim.io, SYNETIS auditors have identified a medium vulnerability, allowing them to create a stored Cross-Site Scripting (XSS) on templates by using a weakness in the field “description.This stored XSS could be dangerous because it’s reflected on all users. In case of admin account compromised, this could be impactful against the organization.When the creation of a model is saved, a POST request is sent to “/updateCustomer”. The vulnerable field is customer[formsSettings][templates][ID][templateConfiguration][description] and customer[formsSettings][templates][ID][templateConfiguration][name]When user’s try to create a new team, this will load all templates configuration and the JavaScript payload too Implementation: Direct html tag injection through our templating engine is now prevented by encoding the strings to prevent js injection from the following fields: template nametemplate descriptionteam nameteam description N.B: Code injection is still possible through naming conventions as it is the expected and the main purpose of the application fixed: #security Disable attachments in /Updateuser POST and other CosmosDB interactions #572 Rationale: The user object (and the organization object too) have an _attachment property that may permit to upload attachments. As it's not required and may be used to inject malicious files, it should be disabled.Also, in addition to _attachments, we'll also hide other system defined elements such as _rid, _ts, _self, _etag to prevent the leak of information about the underlying system. Reference: https://docs.microsoft.com/en-us/rest/api/cosmos-db/documentsImplementation: Hide these fields in the corresponding 'get' functions to prevent them from beeing visible from the client: /getUser/getCustomer/getCustomer/:tenantId Remove these fields from the corresponding 'update' functions before updating cosmosdb /updateUser/updateCustomer "},{"title":"[2.1.0] Codename \"Hakuho\" - (2020-09-03)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#210-codename-hakuho---2020-09-03","content":"fixed: Approval not working in PPR (issue not identified) #569 /locales/i18nServer.js was not initialized in api role (as opposed to the standalone role) fixed: Error 404 in function: getUserPhoto with arguments #558 Happens when the requester has no profile picture. Handle empty user photo properly (404 error in graphServices, returning a null response)Use a generic avatar picture instead: https://uat.salestim.io/img/avatar-neutral-blue.png fixed: Invalid token when pushing alerts to the GitHub &quot;ops&quot; repository. Update to the private token (code &quot;SalesTimOpsAlerts&quot;) used to coneect to the ops repository to support the SSO authentication Reference: https://docs.github.com/en/github/authenticating-to-github/authorizing-a-personal-access-token-for-use-with-saml-single-sign-on fixed: Error when saving approval settings when no template is present #551 Original Ops issue: An unhandledRejection has been detected. (UAT) #240102 added: New UI to use tags in naming conventions and audience targeting While editing a naming convention (Name, description, email, welcome message) in a template, the user can select pre-made tags by typing either &quot;@&quot; or &quot;#&quot;, then selecting the tag from the list.Tags could be mixed with static contentTags could coexist with dynamic contents (meaning other &lt;% %&gt; elements typed directly in the textbox)Relies on the Tagify componentAvailable tags: Naming conventions: { id: 1100, value: '&lt;%= request.team.name %&gt;', title: i18n.__('tags.request.team.name'), bgColor: requestTagsBgColor, textColor: requestTagsTextColor }, { id: 1101, value: '&lt;%= request.team.description %&gt;', title: i18n.__('tags.request.team.description'), bgColor: requestTagsBgColor, textColor: requestTagsTextColor }, { id: 1102, value: '&lt;%= request.team.welcomeMessage %&gt;', title: i18n.__('tags.request.team.welcomeMessage'), bgColor: requestTagsBgColor, textColor: requestTagsTextColor }, { id: 1103, value: '&lt;%= request.template.name %&gt;', title: i18n.__('tags.request.template.name'), bgColor: requestTagsBgColor, textColor: requestTagsTextColor }, { id: 1200, value: '&lt;%= user.id %&gt;', title: i18n.__('tags.user.profile.id'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1201, value: '&lt;%= user.city %&gt;', title: i18n.__('tags.user.profile.city'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1202, value: '&lt;%= user.companyName %&gt;', title: i18n.__('tags.user.profile.companyName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1203, value: '&lt;%= user.country %&gt;', title: i18n.__('tags.user.profile.country'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1204, value: '&lt;%= user.department %&gt;', title: i18n.__('tags.user.profile.department'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1205, value: '&lt;%= user.displayName %&gt;', title: i18n.__('tags.user.profile.displayName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1206, value: '&lt;%= user.employeeId %&gt;', title: i18n.__('tags.user.profile.employeeId'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1207, value: '&lt;%= user.givenName %&gt;', title: i18n.__('tags.user.profile.givenName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1208, value: '&lt;%= user.jobTitle %&gt;', title: i18n.__('tags.user.profile.jobTitle'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1209, value: '&lt;%= user.mail %&gt;', title: i18n.__('tags.user.profile.mail'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1210, value: '&lt;%= user.mailNickname %&gt;', title: i18n.__('tags.user.profile.mailNickname'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1211, value: '&lt;%= user.mobilePhone %&gt;', title: i18n.__('tags.user.profile.mobilePhone'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1212, value: '&lt;%= user.officeLocation %&gt;', title: i18n.__('tags.user.profile.officeLocation'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1213, value: '&lt;%= user.postalCode %&gt;', title: i18n.__('tags.user.profile.postalCode'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1214, value: '&lt;%= user.preferredLanguage %&gt;', title: i18n.__('tags.user.profile.preferredLanguage'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1215, value: '&lt;%= user.state %&gt;', title: i18n.__('tags.user.profile.state'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1216, value: '&lt;%= user.streetAddress %&gt;', title: i18n.__('tags.user.profile.streetAddress'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1217, value: '&lt;%= user.surname %&gt;', title: i18n.__('tags.user.profile.surname'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1218, value: '&lt;%= user.usageLocation %&gt;', title: i18n.__('tags.user.profile.usageLocation'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1219, value: '&lt;%= user.userPrincipalName %&gt;', title: i18n.__('tags.user.profile.userPrincipalName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1251, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute1 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute1'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1252, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute2 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute2'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1253, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute3 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute3'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1254, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute4 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute4'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1255, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute5 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute5'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1256, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute6 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute6'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1257, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute7 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute7'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1258, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute8 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute8'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1259, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute9 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute9'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1260, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute10 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute10'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1261, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute11 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute11'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1262, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute12 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute12'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1263, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute13 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute13'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1264, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute14 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute14'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1265, value: '&lt;%= user.onPremisesExtensionAttributes.extensionAttribute15 %&gt;', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute15'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 1300, value: '&lt;%= (new Date).getTime(); %&gt;', title: i18n.__('tags.uniqueId.fromDate'), bgColor: dynamicTagsBgColor, textColor: dynamicTagsTextColor } Audience targeting: { id: 2200, value: 'user.id', title: i18n.__('tags.user.profile.id'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2201, value: 'user.city', title: i18n.__('tags.user.profile.city'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2202, value: 'user.companyName', title: i18n.__('tags.user.profile.companyName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2203, value: 'user.country', title: i18n.__('tags.user.profile.country'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2204, value: 'user.department', title: i18n.__('tags.user.profile.department'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2205, value: 'user.displayName', title: i18n.__('tags.user.profile.displayName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2206, value: 'user.employeeId', title: i18n.__('tags.user.profile.employeeId'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2207, value: 'user.givenName', title: i18n.__('tags.user.profile.givenName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2208, value: 'user.jobTitle', title: i18n.__('tags.user.profile.jobTitle'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2209, value: 'user.mail', title: i18n.__('tags.user.profile.mail'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2210, value: 'user.mailNickname', title: i18n.__('tags.user.profile.mailNickname'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2211, value: 'user.mobilePhone', title: i18n.__('tags.user.profile.mobilePhone'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2212, value: 'user.officeLocation', title: i18n.__('tags.user.profile.officeLocation'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2213, value: 'user.postalCode', title: i18n.__('tags.user.profile.postalCode'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2214, value: 'user.preferredLanguage', title: i18n.__('tags.user.profile.preferredLanguage'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2215, value: 'user.state', title: i18n.__('tags.user.profile.state'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2216, value: 'user.streetAddress', title: i18n.__('tags.user.profile.streetAddress'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2217, value: 'user.surname', title: i18n.__('tags.user.profile.surname'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2218, value: 'user.usageLocation', title: i18n.__('tags.user.profile.usageLocation'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2219, value: 'user.userPrincipalName', title: i18n.__('tags.user.profile.userPrincipalName'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2219, value: 'user.groups.direct', title: i18n.__('tags.user.groups.direct'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, // { id: 2219, value: 'user.groups.transitive', title: i18n.__('tags.user.groups.transitive'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2251, value: 'user.onPremisesExtensionAttributes.extensionAttribute1', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute1'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2252, value: 'user.onPremisesExtensionAttributes.extensionAttribute2', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute2'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2253, value: 'user.onPremisesExtensionAttributes.extensionAttribute3', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute3'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2254, value: 'user.onPremisesExtensionAttributes.extensionAttribute4', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute4'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2255, value: 'user.onPremisesExtensionAttributes.extensionAttribute5', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute5'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2256, value: 'user.onPremisesExtensionAttributes.extensionAttribute6', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute6'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2257, value: 'user.onPremisesExtensionAttributes.extensionAttribute7', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute7'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2258, value: 'user.onPremisesExtensionAttributes.extensionAttribute8', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute8'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2259, value: 'user.onPremisesExtensionAttributes.extensionAttribute9', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute9'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2260, value: 'user.onPremisesExtensionAttributes.extensionAttribute10', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute10'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2261, value: 'user.onPremisesExtensionAttributes.extensionAttribute11', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute11'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2262, value: 'user.onPremisesExtensionAttributes.extensionAttribute12', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute12'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2263, value: 'user.onPremisesExtensionAttributes.extensionAttribute13', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute13'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2264, value: 'user.onPremisesExtensionAttributes.extensionAttribute14', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute14'), bgColor: userTagsBgColor, textColor: userTagsTextColor }, { id: 2265, value: 'user.onPremisesExtensionAttributes.extensionAttribute15', title: i18n.__('tags.user.profile.onPremisesExtensionAttributes.extensionAttribute15'), bgColor: userTagsBgColor, textColor: userTagsTextColor } added: Support for Azure Active Directory schema extensions (aka custom attributes) in #naming-conventions and #audience-targeting WARNING: The Azure AD schema extensions are different from the Microsoft Graph specific Open extensions and Schema extensions (that we may also support in the future if requested).Usage: Azure AD extension attributes may be located in two different locations depending on their origin: Right at the root of the user profile for attributes created by a specific application, for instance: { &quot;extension_e3049e305790413ca1b11bb53526f057_extensionAttribute10&quot;: &quot;REDACTED&quot; } These attributes are named by using the convention extension_&lt;extensions-app-id&gt;_attributename, and the &lt;extensions-app-id&gt; is specific to each tenant. To find this identifier, navigate to Azure Active Directory &gt; App registrations &gt; All applications. Search for the app that starts with &quot;aad-extensions-app&quot; and select it. On the app's Overview page, note the Application (client) ID. Usage in naming conventions and audience targeting: user.extension_e3049e305790413ca1b11bb53526f057_extensionAttribute10 In the onPremisesExtensionAttributes property of the user profile for attributes synchronized by Azure Ad Connect (Also available from the M365 Exchange Admin UI as mailbox properties), such as: { &quot;onPremisesExtensionAttributes&quot;: { &quot;extensionAttribute1&quot;: &quot;REDACTED&quot;, &quot;extensionAttribute2&quot;: &quot;REDACTED&quot;, &quot;extensionAttribute3&quot;: &quot;REDACTED&quot;, &quot;extensionAttribute4&quot;: &quot;REDACTED&quot;, &quot;extensionAttribute5&quot;: &quot;REDACTED&quot;, &quot;extensionAttribute6&quot;: null, &quot;extensionAttribute7&quot;: &quot;M&quot;, &quot;extensionAttribute8&quot;: &quot;10/03/1982&quot;, &quot;extensionAttribute9&quot;: null, &quot;extensionAttribute10&quot;: &quot;REDACTED&quot;, &quot;extensionAttribute11&quot;: null, &quot;extensionAttribute12&quot;: null, &quot;extensionAttribute13&quot;: null, &quot;extensionAttribute14&quot;: null, &quot;extensionAttribute15&quot;: null } } Usage in naming conventions and audience targeting: user.onPremisesExtensionAttributes.extensionAttribute10 To see the available extensions for a specific user, you can use this link that requests all the user profile properties: https://developer.microsoft.com/en-us/graph/graph-explorer?request=me&amp;method=GET&amp;version=beta&amp;GraphUrl=https://graph.microsoft.com Notes for later: In order to list extensions dynamically from the UI: List apps: https://docs.microsoft.com/en-us/graph/api/application-listList extensions for an app: https://docs.microsoft.com/en-us/graph/api/application-list-extensionproperty added: Requests Approval Workflow #approval To be applied, the following conditions have to be true (Approval is just ignored if any of these conditions are not met): Actionable message mode set to 'organization' from the settings tabA provider ID has to be setApproval has to be enabled from the templateAt least one approver has to be defined Notification email: 1 email is sent per approver The email content is personalized using the following variables: requestapprovertemplateLocale: Approval workflow uses the language specified in the template (just like provisioning notifications in a channel) The email is comprised of: The actionable cardAn HTML footer Process: Each approver receives the notification email, from which he can: Review and update the inputs from the requesterApprove the request The card is replaced by a confirmation card summarizing the approval process, including the approver and approval date Reject the request including a rejection comment The card is replaced by a confirmation card summarizing the approval process, including the approver, rejection message and its rejection message &quot;My Requests&quot; now shows 2 kinds of requests, approval and povisioning (A different icon) Process: The approval request is Created as &quot;saved&quot; à 20%move to 50% when the email are sent as &quot;approval&quot; When approved: Moves to 100% as &quot;approved&quot; (green bar) When rejected Moves to 100% as &quot;rejected&quot; (red bar)The approver name and rejection message is shown in &quot;My requests&quot; with a &quot;talk to approvers&quot; button If the approval request is approved, A new provisioning request is created at 10% as &quot;saved&quot;. Everything else on this request is similar to a request created without approval Security: Authentication: When executed from outlook (Desktop, web or mobile), the actionable card sends the current user token as part of the action transmitted to our API, ensuring that the request is authenticated Signing: Sending actionable messages relies on a principle similar to app registrations, meaning that by default it's only available in your own tenant (with a unique sender email from the tenant domain). This is the only option enabled as of today, we'll enable the generic multi-tenant option later after the Microsoft validation.Generate a new certificate and signing key: openssl genrsa -out private.pem 2048 # Generate a new 2048 bits key pair using openssl openssl rsa -in private.pem -out public.pem -outform PEM -pubout # Outputs the public key from the pair (the public key is the one that has to be send to MS) https://superdry.apphb.com/tools/online-rsa-key-converter # Use this online converter to convert the public key from PEM to XML (MS uses the XML format) Publish the app description + public key to the Actionable Email Developer DashboardSample: Sign the card from the server before sending it to the client: // Generate a JWS signed card payload // Reference: https://docs.microsoft.com/en-us/outlook/actionable-messages/security-requirements // Node.js sample: https://github.com/tony-zhu/SignedAdaptiveCardSample-node const cardMinified = JSON.stringify(JSON.parse(generatedCard)) // Clone the generated card as string const originator = env.vars.MAIL_ACTION_MSG_ORIGINATOR // The Actionable Message provider ID generated during provider registration const sender = job.data.cache.organization.formsSettings.msServiceAccountUpn // Set the email sender const recipients = [job.data.cache.approvers[approverId].profile.mail] // Set the email recipients (array of strings) // Combine all parameters into one payload const payload = { sender: sender, recipientsSerialized: JSON.stringify(recipients), adaptiveCardSerialized: cardMinified, originator: originator, iat: Math.floor(Date.now() / 1000) // Include a generation timestamp } // Sign the payload using the private key (uses the jsonwebtoken package) const cardAsJwt = jwt.sign(payload, privateSigningKey, { algorithm: 'RS256' }) // The generated JWS could be tested using the public key jwt.verify(cardAsJwt, publicSigningKey, (err, res) =&gt; { if (!err) { console.debug('jwt token OK') } else { console.debug('jwt token KO') } }) Configuration: Approval is disabled until the security configuration is done. In the meantime, a warning message is shown in the template UI.Published configuration procedure: https://developers.salestim.com/nocode/approval.html fixed: graphServices/createTeamFromTemplate/sendMessage error. (PRD) #540 added a control to check if a message to send is not emptyadded: control to replace some characters with their html code counterpart: .replace(/'/gim, '&amp;apos;').replace(/[\\r\\n]/gim, '&lt;br/&gt;') added: New security report available online about our SSL certificates Accessible from: https://dist.salestim.io/audits/certificates_report.log added: Daily security scan using OWASP ZAP scan This scan is performed every day at 1am and generates a detailed report as a new issue in the main repository (see #538 as an example) changed: checked compatibility of our Redis client with TLS 1.2 that will be enforced by Microsoft soonfixed: Requester not added in private channels #528 We were using the requester ID from the request object which is nBold ID. Now, instead, we use the msUserId (from AD) from the user object. fixed: Error 404 in function: addChannelOwner #192827 Manage 404 error in case of bad provisioning changed: Updated manifests to v1.7, including the following properties: showLoadingIndicator: false (always false as it seems to break the app)isFullScreen: false for standalone packages, true for targeted packages changed: Handbook is now restricted to &quot;Members&quot; (aka employees) from the nBold tenantchanged: Documentation about naming convention and audience targeting tags The tech hub documentation has been updated to reflect these changes. fixed: Audience targeting issue Cause: Related to how the api returns the user profile (and the necessary work to handle profile custom attributes) Consequences: The user profile used for the audience targeting and the naming conventions is now entirely based on the strict Graph API definition, and therefore changes all our naming conventions and audience targeting rules, especially the tags we can use. Resolution: The new schema is taken into account in both the naming convention and the audience targeting, server-side and client-side.All customers have been automatically upgraded to the new schema, and their configuration updated (for instance, user.msEmail is replaced by user.mail) The tech hub documentation has been updated to reflect these changes. fixed: Implement an option to fix the security issue: &quot;EJS server-side templating is vulnerable to code injection&quot; #477 Related security alert: EJS server-side templating is vulnerable to code injectionResolution: Removed all the direct server-side calls to EJS ejs.render() that may use the eval function (N.B: client-side use of ejs is safe and therefore is not impacted) in the following files: requests-processer.js: was using ejs to apply naming conventionscatalog.js: was using ejs to apply audience targeting in our api Implementation of a new sandbox.js module that encapsulates the vm2 npm package which seems the most secure fixed: Private channel name is truncated after using our new workaround #516Avoid planner throttlingchanged: Upgraded all environments to node.js v12 LTS Rationale: Better support for the enforcement of TLS v1.2 on Cosmos DB (and probably Redis too)See Announcement fixed: Naming Convention Issue in Welcome Message and Description #287 Symptom: about the request.team.name Naming convention on the welcome message and description is good at the preview level on the form but when the team is generated it's taking the whole team name and not only what the user enter in textResolution: The request object was updated by reference not by value. THe code is updated to clone values before applying any naming convention. added: Deletion of automatically generated wiki tabs During the provisioning, the process controls the number of wiki tabs in the source channel, and keeps only the same number of wiki tabs (keeping the first one in priority, that should be the original one with the right tab name) fixed: Requester and Permanent owner not added in private channel #408 Related issue: Unexpected error in postProcessRequest: {&quot;status&quot;:500,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/beta/teams/1c406dc9-17bf-4ca8-b084-61e90a2d72e4/channels/19:04f7a80043744d16 (PRD) 188674Related to a microsoft Graph bug.Workaround: Implemented a retry mechanism (3 retry with a 10000ms interval) in case of error 500 in the addChannelOwner function + delays before execution of sequential tasts (such as &quot;create a PCH&quot; &gt; &quot;create a tab&quot; and &quot;install an app&quot; &gt; &quot;create a tab&quot;) changed: Planner provisioning is too long due to multiple throttled requests #515 Resolution: Created a new plannerLimiter similar to graphLimiter with specific default configuration values, especially: MICROSOFT_PLANNER_LIMITER_MAXCONCURRENT=null # No concurrency MICROSOFT_PLANNER_LIMITER_MINTIME=500 # Max 2 requests per second MICROSOFT_PLANNER_LIMITER_HIGHWATER=null # No queue limitation or leak rule changed: Rendering of templates in the catalog tab is now vastly faster, especially with a large number of templates Code optimization of rendering that was previously doing an ajax request for each template. fixed: Unknown and undocumented error in function: cloneTeamLogo. (PPR) #188236 Cause: Locale files were not loaded as the jobs role was not loading the webapp.Resolution: The workersLauncher.js service is now requiring i18nServer.js so that it's loaded systematically fixed: Unable to save template in PPR Cause: Misconfigured blob container for PPR in stsaprd storage accountRelated issue: Unexpected error in /blobServices/savePicture/createBlockBlobFromStream. (PPR) #188030 security: bump standard-version from 7.1.0 to 8.0.1 #505added: PPR dedicated app, api and jobs roles PPR is now hosted with an architecture similar to PRD, with dedicated instances for each roleNow dynamically assigning the right service URL based on environment: WEB_PUBLICURL_PRDAPI_PUBLICURL_PRDJOB_PUBLICURL_PRD security: bump jquery from 3.4.1 to 3.5.0 #460 Related issue: Audit Button in My Request - not working #452Cause: Incompatibility between bootstrap v4.4.1 and jquery v3.5.0 &gt; Downgraded jquery to v3.4.1. See Bootstrap IssueResolution: Upgraded JQuery to 3.5.1 to avoid conflicts with bootstrap fixed: Infinite retry loop when trying to clone a team where the service account is not an owner Resolution: In case of error &quot;403_FORBIDDEN&quot;, the provisioning process tries to add the service account as an owner of the source teamThe pre-processing entries (everything before the actual team cloning) in the audit trail will therefore be visible twice, indicating that the provisioning process has been restarted. fixed: Infinite retry loop when adding the requester as an owner of a private channel. Cause: The graph is supposed to return a 400 error in case of duplicate (trying to add a user when he's already a member), but sometimes returns a 500 error...Resolution: Just skipping outside the addChannelOwner method when error 500 is reached. fixed: In audit trail, the private channels requested owners and permanent owners names are &quot;undefined&quot; Now retreiving the user displayName during provisioning fixed: In audit trail, the private channels names are not displayed Now retreiving the channel displayName during provisioning (instead of the &quot;name&quot; property) fixed: Planner plan cloning takes a large amount of time and may fail as it gets throttled while exporting the original plan Refactored the exportPlannerPlanAsJson and provisionPlannerContent functions to use the graphLimiter to schedule calls to the Graph fixed: infinite retry loop in copyDriveItem Cause: In case of channels that have been renamed, the drive copy process fails and loops on retry for error 500 (as the original folder could not be found)Resolution: Changed the retry mechanism to limit the number of retry to 3 in any case Added: Provisioning retry on fail In case of major crash (the main process is stopped and automatically restarted), if a request has still not yes created the new team, the newly started process restarts the provisioning process using the same request.The pre-processing entries (everything before the actual team cloning) in the audit trail will therefore be visible twice, indicating that the provisioning process has been restarted. fixed: In some cases, the provisioning process was stopped after configuring tabs: Cause: multiple wiki tabs with the same name (such as wiki tabs automatically added by the standard cloning process) were generating confusion in our code, preventing the tabs configuration to end properlyResolution: better error management in the tabs configuration process changed: Tabs types that doesn't support configuration (Wiki, PowerBI, OneNote) are now visible in the audit trail with a descriptive messagefixed: Unsupported tabs names in the audit trails are now &quot;URL-decoded&quot;, preventing weird codes to be visible such as %20, fixed: graphServices/createTeamFromTemplate/sendMessage error. (INT) #174802 Added a token refresh handler in case of expiration during a provisioning process fixed: Redis connectivity issue in UAT Related issues: Alert job error (UAT) #174317: Error initializing Lua scriptsJob Logging job error (UAT) #174234: connect ETIMEDOUTAn unhandledRejection has been detected. (UAT) #174236: connect ETIMEDOUT Resources: See &quot;Connection time out during queue add&quot; #1366Fix: Increase the ioredis connectTimeout property to 30000 (ms) so that queues have time to connect during startup fixed: Unknown and undocumented error in function: getMyRequestsCount. (INT) #174131 Better error management in case of network latency issues changed: jobs queues are now prefixed with the current environment for better isolationfixed: An unhandledRejection has been detected. (UAT) #172834 The service is now restarted if an unhandledRejection is detected, for instance a Redis connectivity issue during boot. changed: better log levels management with distinction between verbose and debug Now using the npm logging levels prioritized from 0 to 6 (highest to lowest): { error: 0, warn: 1, info: 2, http: 3, verbose: 4, debug: 5, silly: 6 } Reference: Winston logger logging levels added: Support for en-my locale (English - Malaysia) #172551fixed: typo in es-es locale, replaced &quot;% s&quot; by &quot;%s&quot; #172547added: Support of italian language Applies to: nBold UI based on Teams / Browser languageTemplate lang for notifications The following lang / region pairs are supported: it-IT Italian (Italy)it-CH Italian (Switzerland) changed: #provisioning Tabs configuration support Supported tabs: Tab cloning and configuration works and is officially supported by nBold (SUPPORTED by Microsoft) Custom tabsWebsite tabsWord, Excel, PowerPoint, and PDF tabsDocument library tabsYouTube tabsYammer tabs Unsupported tabs: Tab cloning and configuration SHOULD work but cannot be officially supported by nBold (UNSUPPORTED by Microsoft) Planner tabsMicrosoft Stream tabsMicrosoft Forms tabsSharePoint page and list tabs Ignored: Tab cloning without configuration Power BI tabsWiki tabsOneNote tabs fixed: #provisioning 1 Private Channel Missing - Systra #480 Symptom: Sometimes, the Graph accepts to create a channel (and returns an ID), but then the channel is not visible anymore from the graph.See &quot;Error in graphHelper/updateTabConfiguration&quot; #169114 { &quot;statusCode&quot;:404, &quot;code&quot;:&quot;NotFound&quot;, &quot;message&quot;:&quot;No active channel found with channel id: 19:2110ddd4c6ab4906a0cec78bf6d13459@thread.tacv2&quot;, &quot;requestId&quot;:&quot;a6f8d51f-dc50-45a6-8a48-414e199924e8&quot;, &quot;date&quot;:&quot;2020-07-02T05:47:54.000Z&quot; } IMPORTANT: THIS IS NOT A REAL FIX, JUST A WORKAROUND Basically, after the creation of a private channel: Wait for 10secCheck if the /tabs endpoint for this channel is responding (returns a 404 in case of error)If the /tabs returns an error: Delete the channelRestart the private channel provisioning process (every 10 sec, max 3 times), using a different name: Adding &quot; (1)&quot;, &quot; (2)&quot; or &quot; (3)&quot; respectively for retry #1, #2 and #3 Retest the /tabs endpoint fixed: #provisioning Missing Tabs 481fixed: #provisioning 3 tabs missing in the provisionning #482fixed: #ui My requests not working correctly #484 Happened when the requests list was empty due to a bug in the /me/jobs api fixed: #provisioning Tabs provisioned in the wrong channel Fixed by reordering (alphabetically on the displayName) channels after the full provisioning, as they may have been created in a different order. fixed: #provisioning Apps not cloned in private channels Error undefined in function: createTab with arguments: #165395Resolution: Implement a control process that install missing apps automatically during the provisioning fixed: #login Unable to login in dev mode when using wsl Cause: WSL internal clock stops synchronizing with the host, resulting in a JWT check error.Fix: none so far. See system date is not same with windows (WSL 2) #4245Workaround: Execute the following command to force sync sudo hwclock -s "},{"title":"[2.0.0] Codename \"Kisenosato\" - (2020-06-18)​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#200-codename-kisenosato---2020-06-18","content":"fixed: Provisioning issues Implement query replay for Microsoft Graph erors 502 and 503Better management after a query has been throttled by managing the &quot;replay-after&quot; headerTabs are now using &quot;displayName&quot; instead of &quot;name&quot;More granular tasks priorisation in bottleneckFixed replay operations in createTeamFromTemplateBetter error management in files cloning in case of renamed channelReplaced error by warn level in case of error 502 to reduce noise in the ops repo changed: Store performance optimizations Removed all JQuery dependency in components and removed the library from bundle.min.js added: Doc procedure to optimize templates assetsadded: Intercom chat UI is now available from the template storefixed: Tabs in private channels are sometimes not provisioned Fixed the cloningMissingTabs function to add a &quot;tabs&quot; property when it is missing to private channels fixed: Provisioning process crashes with wrong number of provate channels Updated the cloningMissingChannels function to take into account the asynchronous private channels creation fixed: Planner tab plans are not provisioned #462 Planner tabs configuration is now temporarly not supported anymore. See Configuring the built-in tab types in Microsoft TeamsAfter a retro-engineering phase, here is the new formats for the 3 main tab configuration properties: const tabVersion = '&amp;tabVersion=20200228.1_s' // Temporarly added, to be checked regularly const targetContentUrl = `https://tasks.teams.microsoft.com/teamsui/{tid}/Home/PlannerFrame?page=7&amp;auth_pvr=OrgId&amp;auth_upn={userPrincipalName}&amp;groupId={groupId}&amp;planId=${targetPlannerPlan.id}&amp;channelId={channelId}&amp;entityId={entityId}&amp;tid={tid}&amp;userObjectId={userObjectId}&amp;subEntityId={subEntityId}&amp;sessionId={sessionId}&amp;theme={theme}&amp;mkt={locale}&amp;ringId={ringId}&amp;PlannerRouteHint={tid}${tabVersion}` const targetWebsiteUrl = `https://tasks.office.com/${tenantId}/Home/PlanViews/${targetPlannerPlan.id}?Type=PlanLink&amp;Channel=TeamsTab` const targetRemoveUrl = `https://tasks.teams.microsoft.com/teamsui/{tid}/Home/PlannerFrame?page=13&amp;auth_pvr=OrgId&amp;auth_upn={userPrincipalName}&amp;groupId={groupId}&amp;planId=${targetPlannerPlan.id}&amp;channelId={channelId}&amp;entityId={entityId}&amp;tid={tid}&amp;userObjectId={userObjectId}&amp;subEntityId={subEntityId}&amp;sessionId={sessionId}&amp;theme={theme}&amp;mkt={locale}&amp;ringId={ringId}&amp;PlannerRouteHint={tid}${tabVersion}` In addition, the plan id is not set as the entityId of the tab configuration... For reference, see Identifiers in Planner fixed: Tabs created in wrong private channels #441 updated code to reflect the new graph schema changed: Template Store: SEO, social sharing and categories Header Metadata Automatically generated by this VuePress plugin: https://github.com/webmasterish/vuepress-plugin-autometaThe Template Store is now optimized for SEO through automatically generated meta, for instance: &lt;meta name=&quot;description&quot; content=&quot;Digital Strategy and Transformation, a Microsoft Teams template by EY&quot;&gt; &lt;meta name=&quot;image&quot; content=&quot;https://manifests.salestim.io/assets/ey/digital-strategy-transformation/ey-digital-strategy-transformation-social.png&quot;&gt; &lt;meta name=&quot;twitter:title&quot; content=&quot;Digital Strategy and Transformation&quot;&gt; &lt;meta name=&quot;twitter:description&quot; content=&quot;Digital Strategy and Transformation, a Microsoft Teams template by EY&quot;&gt; &lt;meta name=&quot;twitter:card&quot; content=&quot;summary_large_image&quot;&gt; &lt;meta name=&quot;twitter:image&quot; content=&quot;https://manifests.salestim.io/assets/ey/digital-strategy-transformation/ey-digital-strategy-transformation-social.png&quot;&gt; &lt;meta property=&quot;og:type&quot; content=&quot;article&quot;&gt; &lt;meta property=&quot;og:title&quot; content=&quot;Digital Strategy and Transformation&quot;&gt; &lt;meta property=&quot;og:description&quot; content=&quot;Digital Strategy and Transformation, a Microsoft Teams template by EY&quot;&gt; &lt;meta property=&quot;og:image&quot; content=&quot;https://manifests.salestim.io/assets/ey/digital-strategy-transformation/ey-digital-strategy-transformation-social.png&quot;&gt; &lt;meta property=&quot;article:tag&quot; content=&quot;ey&quot;&gt; &lt;meta itemprop=&quot;name&quot; content=&quot;Digital Strategy and Transformation&quot;&gt; &lt;meta itemprop=&quot;description&quot; content=&quot;Digital Strategy and Transformation, a Microsoft Teams template by EY&quot;&gt; &lt;meta itemprop=&quot;image&quot; content=&quot;https://manifests.salestim.io/assets/ey/digital-strategy-transformation/ey-digital-strategy-transformation-social.png&quot;&gt; Better social Sharing experience: LinkedIn and Twitter are now using the &quot;socialPicture&quot; field defined in the manifest as their card picture A new navigation section in the sidebar called &quot;Integrations&quot;, right now with Salesforce, Dynamics and ServiceNowCategories now have a description that appears between the category page title and the templates cards. fixed: Requester and membership not fully provisioned Related issues: Team Not Fully Provisioned - IQ Business #449Requester not added to membership list, provisioning blocked @ 80% #451 fixed: Cannot access audit trail from the &quot;My Requests&quot; screen Related issue: Audit Button in My Request - not working #452Fixed incompatibility between bootstrap v4.4.1 and jquery v3.5.0 &gt; Downgraded jquery to v3.4.1. See Bootstrap Issue added: New open source repository tech-hub Contains multiple SDKs for various clients and serversLevels of support: javascript: beta (Target as GA in API v1)powershell: alpha (Target as GA in API v1)apex: experimentalcsharp-netcore: experimentalaspnetcore: experimentalnodejs-express-server: experimental security: Audit reports are now generated as part of the app-platform build. JavaScript Standard Style ReportESLint Security ReportNPM Audit Report added: New open source repository internationalization Contains the raw json files resource files used by the nBold PlatformNow updated versions of the resource files are automatically downloaded during build (taking the latest release)Public URL: https://i18n.salestim.ioGoverned by: nBold Security PolicynBold Open Source Code of Conduct Usage instructions are detailed in the README file added: nBold API Explorer Similar to the Microsoft Graph ExplorerCurrently exposes the /store endpointsPublic URL: https://developers.salestim.com/api/explorerDeeplinks to specific operations are supported, for example getStoreCategories added: nBold Open Source Code of conduct A new distribution list is available to receive requests at codeofconduct@salestim.com fixed: Logs files naming convention The switch to a fully global architecture generated conflicts in githubThe new naming convention is: &lt;environment&gt;-&lt;role&gt;-&lt;hostname&gt;-&lt;date&gt;.logFor example: prd-api-api01-2020-05-14-18.log added: New public doc &quot;Security Policy&quot; Public URL: https://developers.salestim.com/platform/securitypolicyExplains the procedure to report a vulnerability and includes a public PGP key for secure communication changed: New network infrastructure based on Azure Front Door Benefits Improved operations &amp; availability Decorrelates our infrastructure from the public domains and urls, enabling our new Microservices Architecture.Reduce downtime by enabling hot-patching of our container instancesManaging redundency is easier as Front Door provides an global HTTP load balancing with instant failover across pools of containerized instancesSSL certificates are now 100% automatically managed by Front Door, reducing our maintenance workload and risks of unexpected expiration / invalidation Increased performance Users are automatically routed to the closest available backendStatic assets can now be cached and served from Azure CDN across the multiple Azure PoP WorldwideTLS traffic encryption is now offloaded to Azure Front Door, reducing our servers workload Improved security All Azure Front Door audit trails and logs are automatically gathered in our Azure Sentinel SIEMProvides an embedded Web Application Firewall (WAF) that automatically protects from the OWASP top 10 threats.Embedded Azure DDoS Protection through Bandwidth Throttling Now Azure Front Door manages access, certificates and routing to: Non-Production environments int.salestim.iouat.salestim.ioppr.salestim.io Production environments prd.salestim.io: Former production VMapp.salestim.ioapi.salestim.iojobs.salestim.io added: New &quot;/dist&quot; directory Public URL: https://dist.salestim.io/Exposes: App packages (Related links are up to date here https://developers.salestim.com/releases/releases) io.salestim.automation.standalone.dev.zip io.salestim.automation.standalone.int.zipio.salestim.automation.standalone.ppr.zipio.salestim.automation.standalone.prd.zipio.salestim.automation.standalone.uat.zipio.salestim.automation.targeted.catalog.dev.zipio.salestim.automation.targeted.catalog.prd.zipio.salestim.automation.targeted.catalog.uat.zipio.salestim.automation.targeted.home.dev.zipio.salestim.automation.targeted.home.prd.zipio.salestim.automation.targeted.home.uat.zipio.salestim.automation.targeted.settings.dev.zipio.salestim.automation.targeted.settings.prd.zipio.salestim.automation.targeted.settings.uat.zip API definition (openapi) and json schemas (Links updated on https://developers.salestim.com/api) changed: Isolation of tech-hub and template-store repos and websites Why: Previously, sites &quot;tech-hub&quot; and &quot;template-store&quot; were hosted in the main &quot;app-platform&quot; repo, resulting in longer build times and possible issues.How: Now techhub and template-store sources are hosted in their own isolated repos: tech-hub: New RepoThe website is still available here, and is hosted right from the repository through the GitHub Pages service. template-store: New RepoNow hosts both .json templates and the template-store websiteThe store website is now available here instead of prd.salestim.io/storeN.B: The template-gallery repo previously hosting .json templates is now archived and should not be used anymore fixed: Fallback language for sv-SE generates i18n errors #135919 How: Added a specific fallback entry for sv-se in i18nConfig.js added: Support of spanish language Applies to: nBold UI based on Teams / Browser languageTemplate lang for notifications The following lang / region pairs are supported: es-AR Spanish (Argentina)es-BO Spanish (Bolivia)es-CL Spanish (Chile)es-CO Spanish (Colombia)es-CR Spanish (Costa Rica)es-DO Spanish (Dominican Republic)es-EC Spanish (Ecuador)es-ES Spanish (Spain)es-GT Spanish (Guatemala)es-HN Spanish (Honduras)es-MX Spanish (Mexico)es-NI Spanish (Nicaragua)es-PA Spanish (Panama)es-PE Spanish (Peru)es-PR Spanish (Puerto Rico)es-PY Spanish (Paraguay)es-SV Spanish (El Salvador)es-UY Spanish (Uruguay)es-VE Spanish (Venezuela) changed: Increasing membership limits Now you can select up to 20: Requested owners &amp; members in the new team request formPermanent owners &amp; members in the template settings changed: Improved user selection Why: It's sometimes hard to select users from directories when there is a large number of users sharing the same first or last nameHow: In user selection box (approvers selection from a template, permanent members...), filtering is now performed on the following fields: givenNamesurnameemailuserPrincipalName changed: The &quot;approval&quot; tab in templates is now flagged with a &quot;Pro&quot; badgefixed: Error updating mail nickname. (PRD) #121353 Implemented a retry on 404 error (if the mailbox is not yet fully provisioned) fixed: email naming conventions Replace accentuated characters using Lodash Deburr function (see https://lodash.com/docs/4.17.15#deburr)Deburrs string by converting Latin-1 Supplement and Latin Extended-A letters to basic Latin letters and removing combining diacritical marks. changed: Updated doc &quot;Service Account&quot; and &quot;Data Management Practices&quot; sectionsfixed: Unexpected error in /sameSiteMiddleware/ensureCookieCompatibility. #120782 The issue was raised in case of empty user-agent header for some browsers "},{"title":"[1.5.0] Codename \"Yokozuna\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#150-codename-yokozuna","content":"fixed: SameSite Policy update in chrome and edge Why: https://web.dev/samesite-cookies-explained/How: Implementation of a new middleware (sameSiteMiddleware)Set express to trust the first proxy app.set('trust proxy', 1) // trust first proxy // @see http://expressjs.com/en/guide/behind-proxies.html Define cookie policy in express session app.use(expressSession( { cookie: { httpOnly: true, sameSite: 'none', secure: true }, fixed: The same template may appear multiple times in the &quot;New team&quot; form in the &quot;Catalog&quot; tab after creating a new template Related issue: Not able to search for the Original Team in creating a template #360 fixed: When creating a new template, the template picture remains the same as a previously created or updated templatefixed: Salestim Web Experience Appears in Microsoft Teams App #363fixed: Check service account screen is emptyfixed: Freeze when adding Permanent owner - Members #354fixed: Teams Picture not added #355fixed: Unexpected error in I18n __(). (DEV) #115582 Created i18n keys for crm configuration fixed: Error in isOwnerOf: Resource 'ad9d747a-737a-4f72-b1d1-fceaffaa54ba' does not exist or one of its queried reference-property objects are not present. Detail: {&quot;statusCode&quot;:404,&quot;code&quot;:&quot;Request_Resource (PRD) #115535 Resolution: Better graph error management fixed: Error in requestsEventsQueueListener/processRequestEvent/requestsProcesser/processNewRequest: {} (DEV) #115312 Error message: Error message: waitForTeamsAsyncOperation status is &quot;failed&quot;Resolution: Implement retry mechanism fixed: Jobs execution error Related issues: index/exitHandler received a signal: SIGINT. Message: SIGINT Description: User pressing Ctrl+C and is an interrupt App will exit in 30000ms. (DEV) #115116JOB DELETETESTTEAMSDEV: Task execution failed with unexpected error: {} (DEV) #115110Task executed with errors (DEV) #115111 Root cause: Bad async loading of jobs module instance, resulting in an uncatched exception in jobScheduler trying to call the 'start' method. fixed: Client-side exceptions Error in getGeneralChannelId: Failed to execute backend request. Detail: {&quot;statusCode&quot;:502,&quot;code&quot;:&quot;BadGateway&quot;,&quot;message&quot;:&quot;Failed to execute backend request.&quot;,&quot;requestId&quot;:&quot;7d898e23-7baf-4dae-b3ae-08fe (PRD) #114249Error in getTeamProperties: Failed to execute backend request. Detail: {&quot;statusCode&quot;:502,&quot;code&quot;:&quot;BadGateway&quot;,&quot;message&quot;:&quot;Failed to execute backend request.&quot;,&quot;requestId&quot;:&quot;a8ad671b-3d90-4eee-9556-86ec8e (PRD) #114251Resolution: Implemented a graphErrorHandler client-side global error handler fixed: An unhandledRejection has been detected. (INT) #114867 Error message: Error message: scroll already exists for this workspaceResolution: Prevent parralel queries that use paging (scroll) in extrectIntercomData jobSchedule jobs more evenly to prevent conflicts: { dev: '*/30 - - - *', int: '0 2 - - *', uat: '0 3 - - *', ppr: '0 11 - - *', prd: '0 23 - - *' } fixed: Enable / Disable template is now working properlyfixed: An uncaught exception has been detected at origin: undefined (DEV) #113328 Resolution: Better andling of Intercom API exceptions feat: new 📡 Stream tabs content cloning capability. Now you can clone Stream tabs as part of your teams templates. fixed: Intermittently user is not able to clone a team #112477 and #112481 Error: {&quot;status&quot;:502,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/v1.0/teams/3756ec9b-ae79-4f14-a8b5-9af49134c9a7/clone&quot;,&quot;data&quot;:&quot;{\\&quot;displayName\\&quot;:\\&quot;Test team janapp2-TIM&quot;,&quot;description&quot;:&quot;Team created by jantestapp2. Description: test&quot;,&quot;mailNickname&quot;:&quot;TIM-Test-team-janapp2-TIM-EN&quot;,&quot;partsToClone&quot;:&quot;apps,tabs,settings,channels&quot;,&quot;visibility&quot;:&quot;private&quot;}&quot;, {\\r\\n &quot;code&quot;: &quot;BadGateway&quot;,\\r\\n &quot;message&quot;: &quot;Failed to execute backend request.&quot;,\\r\\n &quot;innerError&quot;: {\\r\\n &quot;request-id&quot;: &quot;eb2fb2fa-ef6e-4b23-9035-b9ae28564e10&quot;,\\r\\n &quot;date&quot;: &quot;2020-01-17T19:26:11&quot;\\r\\n }\\r\\n }\\r\\n}&quot;}} Root cause: Error code 502 is undocumented in Microsoft Graph Error documentationResolution: Errors code 502 are now handled as 503 error, using a retry mechanism on failure improvement: Web Store Web Store categories are now multilingualTemplate pages now have recommendations &quot;Other templates from the same category&quot; and &quot;Other templates from the same publisher&quot; fixed: User without preferred language in their Office 365 profile. Root cause: Under certain circumstances, for instance with accounts automatically provisionned from Office 365 demo/test tenants, a user may have an empty empty preferred language. Therefore the user profile property in nBold is { msPreferredLanguage: null } Background: Default templates (Basic EN and Basic FR) relies on this property for audience targetingImpacts: Default templates were not visible by these usersResolution: Now when checking the audience targeting, if the msPreferredLanguage property is empty, it is dynamically filled with (Ordered by priority): Microsoft Teams languageBrowser languageen-us in last resort security: Teams packages manifests updates in DEV environments, both root and sub-domains are now authorized *. and *.\\-, to cope with NGROK sub-domains such as eu in dev.eu.ngrok.ioin non-DEV environments, we're now using wildcards to authorize *.salestim.io and *.salestim.comAdded the openExternal permission to devicePermissions to future-proof nBold on mobile devices. { validDomains: [ &quot;*.ngrok.io&quot;, &quot;*.*.ngrok.io&quot;, &quot;*.salestim.io&quot;, &quot;*.salestim.com&quot; ], devicePermissions: [ &quot;openExternal&quot; ] } feat: Web store is now accessible from dev, int and uat environments The store is accessible anonymously from https://[ENVIRONMENT].salestim.io/store/, and is embedded as an iframe in the &quot;Catalog&quot; tab.Store templates could be filtered by: CategoryIndustryLanguage Store categories and industries hav their own landing pages. fixed: Job Scheduler Source error: Error writing jobs audit trail. (UAT) #97625 fixed: Error in getGroupImage: null Detail: {&quot;statusCode&quot;:404,&quot;code&quot;:null,&quot;message&quot;:null,&quot;requestId&quot;:null,&quot;date&quot;:&quot;2019-12-05T07:12:35.019Z&quot;,&quot;body&quot;:null} (PRD) #100049 Better handling of 404 error when a team has no associated photo improvement: Mail nickname formatter Mail nickname generated from the email naming convention is now automatically formatted using the following rules: Remove domain part to only keep the nickname (aka local part) (Remove everything after the first &quot;@&quot; character)Remove or replace spaces and special characters: whitespace &gt; '-' &quot; &gt; '' ( &gt; '' ) &gt; '' , &gt; '-' : &gt; '-' ; &gt; '-' &lt; &gt; '' &gt; &gt; '' @ &gt; '' [ &gt; '' \\ &gt; '' ] &gt; '' Limit nickname to 64 charactersIn case of email nickname duplicate: Limit nickname to 51 charactersAdd a unique suffix based on current datetime using the format: -YYMMDDhhmmss "},{"title":"[1.4.0] Codename \"Ozeki\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#140-codename-ozeki","content":"feat: API /jobs endpoints Manage nBold's platform jobsOperations: GET /jobs Get all available jobs for the current environment (Meaning all jobs that is authorized to be executed in the current environment, actually scheduled or not) GET /jobs/scheduled Get all scheduled jobs for the current environment POST /jobs/tasks Create a new job instance (aka &quot;task&quot;) feat: API root &amp; versions URL scheme: https://[ENVIRONMENT].salestim.io/api/[VERSION]feat: Files cloningfixed: Deeplinks to provisioned tabs in channels notification messages are not working. The tab webUrl property returned by the graph api just after tab provisioning is incorrect (at least the deeplink is not supported).Now we're using the webUrl generated after tab configuration improvement: Use $expand=teamsApp QSP when calling &quot;/tabs&quot; endpoint to get more infos about cloned tabsfeat: Improved onboarding New customers now have two default templates, one for FR language and one for EN language, automatically enabled and configured with 2 source teams with a &quot;General&quot; channel and a &quot;🙋🏼‍♀️ Discover nBold&quot; channel security: Enforce TLS v1.2 Why: TLS v1.0 and v1.1 will soon be deprecated. Reference: SSL Labs Grade Change for TLS 1.0 and TLS 1.1 ProtocolsResolution: Configuration of TLS versions in App Service and Functions apps now availableValidation: Use SSL Labs ReportUpdated documentation: Secure communication with HTTPS &amp; SSL ops: New environments. nBold now has 4 fully-functional Azure environments. | 💍 Ring | Environments | Code | Root URL | Deployment | | :-----: | --------------- | ---- | --------------- | ----------------------------------------------------------------------- | | 4*- | production- | PRD | prd.salestim.io | Pull request from the &quot;ppr&quot; branch to the protected &quot;production&quot; branch | | **3.5- | staging*- | PPR | ppr.salestim.io | Pull request from the &quot;uat&quot; branch to the protected &quot;ppr&quot; branch | | 2- | **uat- | UAT | uat.salestim.io | Pull request from the &quot;int&quot; branch to the &quot;uat&quot; branch | | 0*- | integration*- | INT | int.salestim.io | CI (Continuous Integration) from the &quot;master branch |feat: new 📺 Youtube tabs content cloning capability. Now you can clone Youtube tabs as part of your teams templates. fixed: Group mail nickname update operation now has its own entry in request's audit trail.improvement: &quot;New Team&quot; template selection. The full template card is now clickableWhen a template is selected, the &quot;Update template&quot; : change button label + move button to header fixed: The &quot;New Team&quot; form is now reinitialized after a new team request has been submittedimprovement: Action menus are now responsivefixed: The homepage is stucked at the &quot;Loading your teams&quot; stagefeat: &quot;New team&quot; and &quot;My requets&quot; are now available from the catalog tab. "},{"title":"[1.3.0] Codename \"Sekiwake\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#130-codename-sekiwake","content":"improvement: Mail nickname naming convention In email naming convention template configuration, only the nickname (aka Local part) is requiredThe naming convention is applied after group cloning as the cloning api doesn't support it so farIn case of empty or wrong naming convention expression, a nickname is generated from the requested team name fixed: Cannot clone an archived team Related errors: Unable to retrieve tabs in getTeamStructure/listTabs. #99924Error in graphHelper/listTabs. #7723 Error: Unable to retrieve tabs in getTeamStructure/listTabs. { &quot;message&quot;: Forbidden &quot;status&quot;: 403 &quot;response_text&quot;: { &quot;error&quot;: { &quot;code&quot;: &quot;Forbidden&quot;, &quot;message&quot;: &quot;Entitlements cannot be retrieved because this team is archived.&quot;, &quot;innerError&quot;: { &quot;request-id&quot;: &quot;571f9937-036f-4b2e-a037-740972c41f63&quot;, &quot;date&quot;: &quot;2019-12-04T14:51:31&quot; } } } } Resolution: A new pre-processing is now checking if the source team is archived, and stops provisionning with an appropriate error message. fix PowerApps audit log labels in fr-fr In fr-fr locale, PowerApps logs message were wrong (handled as a generic tab) refactor: Login process Usins nBold outside of Microsoft Teams is now supported (prepping a future SharePoint component for integration in an Intranet for instance)Original requested URL including parameters (&quot;?&quot; &quot;#&quot;) are now preserved after loginPage size optimization through JS and CSS minification, resulting in a slightly faster response time.&quot;Please wait&quot; animated logo is smaller and aligned with the new cleaner design improvement: App design New lighter and cleaner design in menus, labels and iconsIn &quot;Browser&quot; mode (outside of Microsoft Teams), a global navigation header is now visible ops: Actions tracking The following events are now tracked in Intercom: { clickEvents: { tim: { closed: , initiatedTalkToSupport: Talking to Support, initiatedBackToHome: Back to home..., initiatedLgoutUnauthorized: Signing-out..., canceled: }, teamTabConfig: { saved: Saving... }, login: { started: Signing-in... }, home: { myRequests: { opened: My requests, closed: Home }, newTeam: { opened: New Team, canceled: Home, saved: Home }, searched: Search, team: { opened: Opening..., initiateTalkToOwners: Starting conversation... }, loggedOut: Sign-out... }, catalog: { templates: { newModal: { opened: New Template, sourceTeamSelected: New Template }, editForm: { opened: Template edition, saved: Template saved, closed: Catalog }, filtered: { disabled: Catalog (Disabled templated), enabled: Catalog (Enabled templates), all: Catalog } }, loggedOut: Signing-out... }, settings: { serviceAccount: { panel: { opened: Service account }, updated: Service account (update), check: { opened: Checking service account prerequisites, closed: Service account (checked) }, removed: Service account (removed) }, customization: { panel: { opened: Customization } }, crm: { panel: { opened: Salesforce } }, api: { panel: { opened: Integrations } }, targeted: { panel: { opened: Targeted deployments } }, systemInfo: { panel: { opened: System information } }, loggedOut: Signing-out... }, loggedError: { closed: Closing... }, logged: { redirected: Redirecting... } } } Events description: Event name: &quot;Clicked&quot;Event metadata: { action_code: actionCode, action_label: eventActionTitle }  "},{"title":"[1.2.0] Codename \"Maegashira\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#120-codename-maegashira","content":""},{"title":"[1.2.46]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1246","content":"fixed: Unexpected error in searchMyTeams. (PRD) #7098fixed: &quot;My Requests&quot; counter badge breaks toolbar alignment "},{"title":"[1.2.41]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1241","content":"improvement: My Requests count badge is now hidden if there is no request.improvement: &quot;📮 My Requests&quot; audit trail now shows the last operation and date in the request summaryfixed: The &quot;New team&quot; form appeared as blank after a previous submissionimprovement: &quot;My teams&quot; 🔎 search from homepage The search box is now always visibleSearch is performed instantly, on client-sideSearch is case-insensitiveSearch is applied to teams title and description, including partial words improvement: Unauthorized access when when accessing the &quot;Catalog&quot; or &quot;Settings&quot; tab as a non-Office365 administrator: The warning message now has more options: Use the Intercom chat to ask for helpButton &quot;💬 Talk to our Support&quot;: Launch an intercom chat session with our support teamButton &quot;🔙 Back to Home&quot;: Deeplink to the &quot;Home&quot; tabButton &quot;🔐 Sign-in with another account&quot;: Logout the user from the current session fixed: An error appeared after a first login into an unthorized page. Error message: Unexpected error in isAdminFromSession. (UAT) #6837Related issues: Error in /loadComponent route: TypeError ERR_INVALID_ARG_VALUE: The argument 'id' must be a non-empty string. Received '' (UAT) #6838Error in /loadComponent route: AssertionError ERR_ASSERTION: missing path (PRD) #6845 improvement: The &quot;New team&quot; button is now disabled if there is no service account configuredimprovement: Template creation The &quot;Clone members&quot; option is now disabled by default when creating a new template ops: New intercom tracking company attribute: template_count Updated during each catalog update feat: New 🧱 PowerApps tabs cloning capability.improvement: &quot;📮 My Requests&quot; The counter badge on the &quot;📮 My Requests&quot; button is automatically updated every 5 seconds every 5secThe audit trail is automatically refreshed when clicking on the &quot;📮 My Requests&quot; button (during opening) "},{"title":"[1.2.36]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1236","content":"feat: New tabs cloning capabilities. nBold now supports the cloning of the following tabs type: 💬 Yammer tabs: both configured for Yammer groups and Yammer topics📋 Microsoft Forms tabs: both data collect through questions and responses view📚 SharePoint Document Library📘 Word📗 Excel📕 PowerPoint💼 PDF improvement: &quot;📮 My Requests&quot; audit trail Now tab with names including special characters (URL encoded) are shown properly in the audit trailEach cloned tab message has its own icon: 🧭 Website📅 Planner🎦 Stream📋 Forms📘 Word📗 Excel📕 PowerPoint💼 PDF📝 Wiki📚 SharePoint Document Library📑 OneNote📊 Power BI📰 SharePoint Page💬 Yammer🧱 Unknown type "},{"title":"[1.2.35]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1235","content":"fixed: Notifications messages localization in new tenantsimprovement: Service account status in Intercom The &quot;renewServiceAccountTokens&quot; job now set the company property &quot;serviceaccount_status&quot; to true or false, indicating if the last renewal job was successful improvement: &quot;📮 My Requests&quot; audit trail All dates (request creation and individual events) are now stored in ISO format (aka 2019-11-26T21:49:25.983Z)All dates (request creation and individual events) are shown in the current user locale formatRequests are now sorted by date (Most recent on top of the list)Progress bar color now reflects the current status of the request { &quot;REQ_STA_SAVED&quot;: &quot;bg-info&quot;, // (blue) Just saved after user request &quot;REQ_STA_PREPROCESSING&quot;: &quot;bg-default&quot;, // (purple) prepping things before approval (or direct processing) &quot;REQ_STA_PROCESSING&quot;: &quot;bg-default&quot;, // (purple) Provisionning is running &quot;REQ_STA_POSTPROCESSING&quot;: &quot;bg-default&quot;, // (purple) Applying post-cloning operations &quot;REQ_STA_APPROVAL&quot;: &quot;bg-info&quot;, // (blue) Waiting for approval &quot;REQ_STA_APPROVED&quot;: &quot;bg-info&quot;, // (blue) Approved &quot;REQ_STA_REJECTED&quot;: &quot;bg-warning&quot;, // (yellow) Rejected &quot;REQ_STA_PROCESSED&quot;: &quot;bg-success&quot;, // (green) Processed (Done) &quot;REQ_STA_ERROR&quot;: &quot;bg-danger&quot;, // (red) Error &quot;REQ_STA_UNKNOWN&quot;: &quot;bg-warning&quot;, // (yellow) Unknown }  "},{"title":"[1.2.34]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1234","content":"improvement: New &quot;🔥 Remove&quot; button in the &quot;🤖 Service account&quot; tab, to remove a service account from the current configurationimprovement: Prevent double-click actions in settings The following buttons are disabled until action completion and their label replaces by a &quot;please wait&quot; label: &quot;select&quot;: { &quot;button&quot;: &quot;🎭 Update&quot;, &quot;waitMessage&quot;: &quot;⏳ Updating service account...&quot; }, &quot;check&quot;: { &quot;button&quot;: &quot;✅ Check Requirements&quot;, &quot;waitMessage&quot;: &quot;⏳ Checking requirements...&quot; }, }&quot;delete&quot;: { &quot;button&quot;: &quot;🔥 Remove&quot;, &quot;waitMessage&quot;: &quot;⏳ Removing service account...&quot; } &quot;logout&quot;: { &quot;title&quot;: &quot;💨 Sign-out&quot;, &quot;waitMessage&quot;: &quot;⏳ Signing out...&quot; } improvement: When an Office 365 admin account is signing-in, if there is no previously defined service account, this admin account is now automatically defined as the default service account.improvement: Request processing optimization for large teams (multiple Planner plans, many tasks...) Implemented Microsoft Graph requests priority in our middleware Team cloning as highTeam photo cloning as highTabs configuration as highTabs content provisioning (including planner) as lowPost-processing as highNotifications as high improvement: &quot;➕ New Team&quot; form if there is no templates available for a user (zero templates in the catalog or only system templates or only disabled templates or no templates due to audience targeting), a message is shown to ask the user to contact their Microsoft Teams administrators. improvement: &quot;📮 My Requests&quot; form The form title is now &quot;📮 My Requests&quot; just like the related button title "},{"title":"[1.2.30]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1230","content":"ops: Error: Admin Consent is required. #5894 When a user tries to login without admin consent, an alert is sent to the CSM team fixed: Error in getGeneralChannelId: Failed to execute Skype backend request GetThreadsRequest. #5917 Detail: {&quot;statusCode&quot;:500,&quot;code&quot;:&quot;GeneralException&quot;,&quot;message&quot;:&quot;Failed to execute Skype backend requestt...&quot;}Root cause: Microsoft Graph may send a 500 error sometimes fixed: Microsoft Graph error status code The Microsoft Graph api sometimes generates error status code as a &quot;status&quot; property, sometimes as a &quot;statusCode&quot; property fixed: Microsoft Planner API throttling Related issue: graphHelper/getPlannerPlanDetails error: {&quot;status&quot;:429,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;GET&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/v1.0/planner/plans/REDACTED&quot;,&quot;headers&quot;:{&quot;user-agent&quot;:&quot;no (DEV) #5263 fixed: Microsoft Graph Error 404 in function: waitForTeamsAsyncOperation with arguments (PRD) #5419 Root cause: Sometimes, there is a delay between starting cloning a team and the moment where you can call the /operations endpointSolution: In case of error 404, try to replay call to /operations later ops: Issues are now affected to different teams depending on their type. For instance: CSM: admin consent approval, service account issuesOPS: Generated audit trails and logs DEV: Exceptions improvement: Microsoft Graph inner exceptions Sometimes, the Microsoft Graph api returns internal errors or misleading error messages, such as: { &quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/v1.0/planner/plans&quot;,&quot;data&quot;:&quot;&quot;, // ... &quot;status&quot;:403, &quot;text&quot;:&quot;{\\r\\n &quot;error&quot;: {\\r\\n &quot;code&quot;: &quot;&quot;,\\r\\n &quot;message&quot;: &quot;You do not have the required permissions to access this item, or the item may not exist.&quot;,\\r\\n &quot;innerError&quot;: {\\r\\n &quot;request-id&quot;: &quot;REDACTED&quot;,\\r\\n &quot;date&quot;: &quot;&quot;\\r\\n }&quot; } Resolution: Implement bottleneck retry mechanism for some Graph exceptions fixed: Error generating notification message Related issue: graphHelper/createChatThread error: {&quot;status&quot;:400,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;&quot; (PRD) #5219Root cause: The /chatThreads endpoint is deprecatedSolution: Moved to the /messages endpoint fixed: Error getting team photo Related issue: Error in generateTeamLogo/cloneTeamLogo: {&quot;statusCode&quot;:406,&quot;code&quot;:null,&quot;message&quot;:null,&quot;requestId&quot;:null,&quot;date&quot;:&quot;2019-11-24T19:09:58.789Z&quot;,&quot;body&quot;:null,&quot;arguments&quot;:[&quot;&quot;] (PRD) #5203Root cause: The /beta/teams/TEAM_ID/photo/$value endpoint raise an error 406Solution: Moved to the v1.0 version fixed: Error saving jobs audit trails Related issues: JOBSSCHEDULER: Error writing jobs audit trail: {&quot;errno&quot;:-2,&quot;code&quot;:&quot;ENOENT&quot;,&quot;syscall&quot;:&quot;open&quot;,&quot;path&quot;:&quot;./audit/jobs/uat-renewServiceAccountTokens-2019-11-24.csv&quot;} (UAT) #5119JOBSSCHEDULER: Cleaning Job: Error in saveTaskExecutionHistory (UAT) #5148 fixed: Error saving extractIntercomData job export data Related issues: JOB extractIntercomData: Error writing events export file: {&quot;errno&quot;:-2,&quot;code&quot;:&quot;ENOENT&quot;,&quot;syscall&quot;:&quot;open&quot;,&quot;path&quot;:&quot;REDACTED&quot;} (PRD) #5413JOB EXTRACTINTERCOMDATA: Task execution failed: extractIntercomData done (PRD) #5412JOB extractIntercomData: Error writing companies export file: {&quot;errno&quot;:-2,&quot;code&quot;:&quot;ENOENT&quot;,&quot;syscall&quot;:&quot;open&quot;,&quot;path&quot;:&quot;REDACTED&quot;} (PRD) #5411JOB extractIntercomData: Error writing users export file: {&quot;errno&quot;:-2,&quot;code&quot;:&quot;ENOENT&quot;,&quot;syscall&quot;:&quot;open&quot;,&quot;path&quot;:&quot;REDACTED&quot;} (PRD) #5410 "},{"title":"[1.2.25]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1225","content":"improvement: Email naming convention If the email naming convention results in an empty address, the generated team name is now used instead. fixed: Service account token expiration after 90 days Error message: The refresh token has expired due to inactivity.Error log: &quot;status&quot;:400, &quot;text&quot;:&quot;{\\&quot;error\\&quot;:\\&quot;invalid_grant\\&quot;,\\&quot;error_description\\&quot;:\\&quot;AADSTS700082: The refresh token has expired due to inactivity. The token was issued on XXXTXXXZ and was inactive for 90.00:00:00.&quot;,\\&quot;error_codes\\&quot;:[700082]\\&quot;error_uri\\&quot;:\\&quot;https://login.microsoftonline.com/error?code=700082\\&quot;}&quot; Error code: https://login.microsoftonline.com/error?code=700082Root cause: After 90 days, the refresh token used to get a new access token for the service account is expiring automatically. For the first 90 days, the newly acquired refresh token was used but not persisted.Resolution: Each access token refresh now persists the new refresh tokenA scheduled job renews service accounts token daily improvement: Service Account initialization The first Office 365 administrator to login is now used as the default service account. fixed: User names case is now preserved in Intercom "},{"title":"[1.2.23]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1223","content":"improvement: Notifications messages localization #231 Service Account provisioning messages are now generated using: The associated template language.As a first-level fallback the requester languageAs a second-level fallback to 'en-us' fixed: Error in postProcessRequest: {} (DEV) #4634 Error message: Cannot read property 'length' of undefined fixed: Prevent error in loadIntercomAuthenticated when a user has empty profile fields (such as preferredLanguage) "},{"title":"[1.2.22]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1222","content":"fixed: Microsoft Graph exception: isTenantAdmin error Error 504 on /directoryRoles endpointRelated exceptions: office365Services/isTenantAdmin/graphHelper.isTenantAdmin error. (UAT) #4475{&quot;status&quot;:504,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;GET&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/v1.0/directoryRoles?$filter=roleTemplateId eq 'REDACTED'&quot;,&quot;headers&quot;:{&quot;user-agent&quot;:&quot;node-s (UAT) #4474Error in isTenantAdmin / directoryRoles: {&quot;status&quot;:504,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;GET&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/v1.0/directoryRoles?$filter=roleTemplateId eq 'REDACTED (UAT) #4473 fixed: Microsoft Graph exception: addGroupMember error Error 503 on /groups / members endpointRelated exceptions: office365Services/addGroupMember error: {&quot;status&quot;:503,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/beta/groups/REDACTED/members/$ref&quot;,&quot;data&quot;:&quot;{\\&quot;@o (UAT) #4469Error in postProcessRequest: {&quot;status&quot;:503,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/beta/groups/REDACTED/members/$ref&quot;,&quot;data&quot;:&quot;{\\&quot;@odata.id\\&quot;:\\ (UAT) #4468graphHelper/addGroupMember error: {&quot;status&quot;:503,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/beta/groups/REDACTED/members/$ref&quot;,&quot;data&quot;:&quot;{\\&quot;@odata.i (UAT) #4467 fixed: Microsoft Graph exception: getPlannerPlanDetails error Error 503 on /planner/plans endpointRelated exceptions: graphHelper/getPlannerPlanDetails error: {&quot;status&quot;:503,&quot;response&quot;:{&quot;req&quot;:{&quot;method&quot;:&quot;GET&quot;,&quot;url&quot;:&quot;https://graph.microsoft.com/v1.0/planner/plans/REDACTED/details&quot;,&quot;headers&quot;:{&quot;user-ag (UAT) #4466Error cloning a planner tab. (UAT) #4465Error cloning tab settings and contents. (UAT) #4464Error in clonePlannerTab/getPlannerPlanDetails. (UAT) #4463 fixed: Microsoft Graph exception: getTeamStructure error Error 503 on /teams /channels / tabs endpointRelated exceptions: Error exporting source team structure in getTeamStructure. (UAT) #4458Unable to retrieve tabs in getTeamStructure/listTabs. (UAT) #4457Error in graphHelper/listTabs. (UAT) #4456Error in graphHelper/listTabs. (UAT) #4455 fixed: Microsoft Graph exception: cloneTeamLogo error Error 504 on /teams /photo/$value endpointRelated exceptions: Error cloning team photo: {&quot;statusCode&quot;:504,&quot;code&quot;:&quot;UnknownError&quot;,&quot;message&quot;:&quot;&quot;,&quot;requestId&quot;:&quot;REDACTED&quot;,&quot;date&quot;:&quot;REDACTED&quot;,&quot;body&quot;:&quot;{\\&quot;code\\&quot;:\\&quot;UnknownError\\&quot;,\\ (UAT) #4452graphServices/updateTeamPhotoByFile error (UAT) #4451Error in generateTeamLogo/cloneTeamLogo: {&quot;statusCode&quot;:504,&quot;code&quot;:&quot;UnknownError&quot;,&quot;message&quot;:&quot;&quot;,&quot;requestId&quot;:&quot;REDACTED,&quot;date&quot;:&quot;REDACTED&quot;,&quot;body&quot;:&quot;{\\&quot;code\\&quot;:\\&quot;U (UAT) #4450 improvement: During the provisioning process, cloned Planner tabs are now configured to use the user language #213 Planer tab configuration now respects the following scheme: { contentUrl: 'https://tasks.office.com/[TENANT_ID]/Home/PlannerFrame?page=7&amp;planId=[PLAN_ID]&amp;auth_pvr=Orgid&amp;auth_upn={upn}&amp;mkt={locale}' websiteUrl: 'https://tasks.office.com/[TENANT_ID]/Home/PlanViews/[PLAN_ID]' removeUrl: 'https://tasks.office.com/[TENANT_ID]/Home/PlannerFrame?page=13&amp;planId=[PLAN_ID]&amp;auth_pvr=Orgid&amp;auth_upn={upn}&amp;mkt={locale}' } fixed: An arror was generated for user profiles without photo Related exception: {&quot;statusCode&quot;:404,&quot;code&quot;:null,&quot;message&quot;:null,&quot;requestId&quot;:null,&quot;date&quot;:&quot;2019-11-20T11:28:31.129Z&quot;,&quot;body&quot;:null} (UAT) #4632 "},{"title":"[1.2.21]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1221","content":"fixed: Planner plan creation error #4192 When a Graph api internal error occurs during the creation of a Planner plan, the function that handles the creation of a new audit log may fail due to an empty callback. #4195 "},{"title":"[1.2.20]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1220","content":"improvement: nBold's publisher domain validation by Microsoft Configuring the publisher domain has an impact on what users see on the app consent prompt.Especially, an application’s publisher domain is displayed to users on the application’s consent prompt to let users know where their information is being sent.Implications on the app consent prompt improvement: &quot;My Requests&quot; popup Larger popup (max width to 1140px) fixed: In some edge cases (misconfigured tabs or tabs in an inconcictent state), the wrong number of tabs is shown in audit trail. "},{"title":"[1.2.19]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1219","content":"ops: Better client-side error tracking If an error arises client side (teams client or browser), the following tags are automatically populated: Before login: [ 'alert', 'browser', environment, loginHint, // Usually user email teamSiteDomain, // *.sharepoint.com tid // tenant id ] After login: [ 'alert', 'browser', environment, msEmail, // user email msTenantInitialDomainName, // Tenant initial domain name msTenantDefaultDomainName, // Tenant default domain name tid // tenant id ] fixed: Teams photo update changes the request status Context: The photo update process may last for a long time due to the asynchronous Exchange Mailbox provisionning process it depends on.Previous behavior: If the photo update happens after the &quot;Teams Provisionning Done&quot; event, it changes the request status to &quot;processing&quot; after the &quot;done&quot; event.New behavior: The &quot;photo updated&quot; audit log entry now doesn't change the request status, therefore it will be seen as: &quot;Processing&quot; or &quot;Post-Processing&quot; if the photo update happens before the &quot;done&quot; event&quot;Done&quot; if the photo update happens after the &quot;done&quot; event fixed: Better management and reporting of edge cases during provisionning Handles properly unconfigured tabs (Website, Planner...)Handles properly deleted channelsHandles teams without any tabHandles Planners plans without buckets and buckets without tasksZero requested members or ownersZero permanent members of ownersBetter audit logs for tabs processing: Each tab shows the tab type and nameThe tabs summary shows the number of processed tabs New log message when an error occurs in tab provisionning (including unsupported tab)Cleaner tab names in audit trail (URL decode)New all tabs configured message (even if a tab is in error) "},{"title":"[1.2.17]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1217","content":"fixed: i18n: Incorrect translations with Indian english locale (en-in)ops: Asynchronous Jobs Engine This new scheduler is meant to execute scheduled batch processes in a secured environmentSupports different execution environments and schedules for dev, uat, ppr and prdFollows the CRON syntax for scheduling, including second-level schedulingJobs are defined using the following JSON representation: { id: 'JOB_ID', description: 'JOB_DESCRIPTION', module: 'MODULE_PATH', environments: [ dev, uat, ppr, prd ], schedule: { dev: '- - - - *', uat: '- - - - *', ppr: '- - - - *', prd: '- - - - *' }, options: {JOB_OPTIONS} } Jobs should be implemented as a regular nodejs module, exporting a 'start' method with the following prototype: /*- - Module main entry point - @param {string} logFile - Relative log file path - @param {function} Callback - (err, res, msg) */ let myJob = (options, (err, res, msg) =&gt; { // Job implementation }) exports.start = myJob Jobs execution history are persisted at regular intervals as csv audit trails files and in our GiHub ops repository as issues with the 'jobs' tag, as serialized objects: let taskExecutionRecord = { jobId: 'JOB_ID', // String startDate: 'START_DATE', // Date endDate: 'END_DATE', // Date duration: 'EXECUTION_DURATION', // Int, as ms. succeeded: EXECUTION_RESULT, // Boolean message: 'EXECUTION_MESSAGE', // String errorPayload: 'ERROR_PAYLOAD', // String (Stringified JSON) successPayload: 'SUCCESS_PAYLOAD', // String (Stringified JSON) } fixed: Log files persistance from Windows containers Handling both &quot;\\&quot; and &quot;/&quot; path separators fixed: Missing requests from the &quot;My requests&quot; page Root cause: For certain users, the number of requests returned from our cache may varyResolution: Fix the SCAN Redis operations fixed: Error generating team logo #2409 Now using the &quot;teams&quot; Microsoft Graph beta API endpoints improvement: Team photo update in requests audit trail Now the &quot;Team photo updated&quot; event is visible in audit trail as part of post-processing operations fixed: Random error in team photo update Root cause: Trying to update the underlying group photo of a team just after its provisioning may fail as the related Exchange Mailbox may not be fully provisioned yet (required to store group photo)Resolution: Handling specific returned error codes and implement a retry mechanism refactor: Microsoft Graph SDK Using the nodejs Microsoft Graph SDK instead of native REST requests for streams operations (binary files, photos updates...) improvement: Users without profile pictures For users without profile pictures, our front-end dergrades gracefully, hiding the user profile picture zone without unnecessary latency. fixed: Permanent membership missing information in audit trail Permanent membership notifications in audit trail are now showing members and owners names individually refactor: Our mail module is now abstracted from its service provider implementationrefactor: Our GitHub module is now fully independent and dependency free "},{"title":"[1.2.15]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1215","content":"improvement: Template management analytics Tracking a new event on user profile 'template_created' and 'template_updated' with the following metadata: { template_id: REDACTED, template_name: REDACTED } Tracking a new attribute on company profile 'template_count' (# of templates) "},{"title":"[1.2.14]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1214","content":"fixed: Analytics Events References: Error creating analytics event #2322fixed: Events: &quot;Template Created&quot; event is not raised #271fixed: Intercom exception: Multiple existing users match this email address REDACTED #255 Fixes: user email and id are now forced to lower case to prevent duplicatesIntercom user id is now based on: user upn in identified mode (in teams without beeing authenticated yet)user email in authenticated mode (in teams authenticated) Intercom company id is now based on tenant initial domain name (*.onmicrosoft.com)Intercom company name is now based on tenant initial domain name (*.onmicrosoft.com)Tracking a new event on user profile 'serviceaccount_updated' with the following metadata: { serviceaccount_id: REDACTED, serviceaccount_name: REDACTED, serviceaccount_upn: REDACTED } Tracking new attributes on company profile: 'company_customer_id': nBold internal customer id'serviceaccount_initialized': Initialized to 'true' the first time a service account is defined #259 fixed: Planner cloning exceptions in case of empty planner or empty buckets Error in allTasksProcessed: {} #1139Error in allTasksProcessed: Cannot read property 'length' of undefined #2076 improvement: Better anomaly tracking. The following exceptions are now properly logged and surfaced with a meaningful message in audit log: 400_INVALIDREQUEST_MAILNICKNAME: Message: The generated email address for this team is empty or incorrect...Explanation: The naming convention applied to this template has generated an invalid email address for the underlying group related to the team. For instance: The total prefixes, address and suffixes string length is restricted to 53 characters.Avoid using the following characters in your email policy: #, [, ], &lt;, and &gt; Required action: Fix the template's naming conventionsProcessing behavior: The provisioning process is stopped and flagged in an &quot;error&quot; stage 400_INVALIDREQUEST_TABSWITHOUTAPPS: Message: Trying to clone an app without related app...Explanation: You're trying to clone a team that contains tabs using custom apps.Required action: Fix template configuration to either: Include apps during cloningExclude tabs during cloning Processing behavior: The provisioning process is stopped and flagged in an &quot;error&quot; stage 404_ITEMNOTFOUND_DELETEDTEAM: Message: The template you're using is linked to a deleted team...Explanation: The team to be cloned from the template has been deleted.Required action: Either: Restore the deleted teamAssociate template with another team Processing behavior: The provisioning process is stopped and flagged in an &quot;error&quot; stage 403_ACCESSDENIED_TEAMSLICENSES: Message: nBold Service account doesn not have Teams licences...Explanation: The service account defined in nBold's settings doesn't have the required licenses to access Microsoft TeamsRequired action: Add the required Microsoft Teams licences to your service accountProcessing behavior: The provisioning process is stopped and flagged in an &quot;error&quot; stage 504_UNKNOWNERROR_INNERERROR: Message: Microsoft Graph. An unknown error occured during processing on Microsoft Servers...Explanation: An error occured on Microsoft servers during a Microsoft Graph operation.Required action: NoneProcessing behavior: The provisioning process will automatically retry the operation after a few seconds until is works properly "},{"title":"[1.2.13]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1213","content":"ops: Logging improvements Log files are now rotated every 14 daysNow generating an audit trail of file logging operations: { &quot;date&quot;: &quot;REDACTED&quot;, &quot;name&quot;: &quot;REDACTED.log&quot;, &quot;hash&quot;: &quot;REDACTED&quot; } fixed: 2 teams created per Request #247 The &quot;Send request&quot; button is now disabled immediately while processing the request to prevent double clicksBetter &quot;click&quot; handlers to prevent multiple registrations fixed: Messages in 2 different languages appear on the same page #260improvement: Locale is now set using a fallback mechanism, that uses the following order of priority to determine the right locale to be used: From Microsoft Teams context (Language defined in the Microsoft Teams client)From the browser client languageSet to en-us in any other case improvement: Locale is now detected and updated during each request. Therefore you can update the language of your Microsoft Teams client, and you don't need to logout from nBold to see change. feat: Template Language You can now associate a language with each template, within the following list: en-auen-bzen-caen-gben-ieen-jmen-nzen-phen-tten-usen-zaen-zwfr-befr-cafr-chfr-frfr-lufr-mc Structure: Two-letter language code: ISO 639-1Two-letter country code: ISO 3166-1 alpha-2 "},{"title":"[1.2.11]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#1211","content":"fixed: Deep links not working on home page #261fixed: Naming convention not shown in request form #262 Updated online documentation about Naming ConventionsIncludes a descriptive error message in case of bad naming convention configuration fixed: Deep links not working on home page #261improvement: Better management of template configuration issues: Tabs cannot be cloned without cloning Apps as wellReference: #265 improvement: Better management of service account configuration issues: Managed exception: &quot;User Login. Teams is disabled in user licenses&quot;Reference: #264 improvement: Deeplink visual feedback From the homepage, when clicking on a deeplink (open or talk), the button text is updated to reflect the action ops: Browser alerts are now raised in our GitHub ops platform, including: Catched errorStack traceBrowser infosTeams ContextScreenshot security: Self-hosted fonts. Now all fonts resources are loaded from the nBold platform instead of using Google Fonts CDNNot necessarily a security issue, but: Reduces the number of domains to whitelistPrevents any data flow with Google Updated doc: 🏳 Domains to whitelist refactor: Improved ChecknBoldTenant method New logging capabilitiesExternalized nBold tenant id per environment refactor: Check for Microsoft Accounts (personal accounts) New logging capabilitiesExternalized Microsoft tenant id fixed: User events tracking in case of duplicates &quot;Multiple existing users match this email address REDACTED - must be more specific using user_id#255 fixed: Error caching picture #254 Added new logging capabilities to blob storage helper ops: An alert is now raised in our GitHub Ops when a login attempt is made without admin consent. This alert includes session id, locale and tenant id improvement: Request additional owners and members. When requesting the creation of a new team from a template, you can now select up to 5 owners and 10 members.Limits are now surfaced as help messages and tooltips: &quot;You can select up to X additional owners/members.&quot; ops: Logging and alerting improvements. Logs persistence and alerting in our GitHub Ops platform is now disabled in development environmentsOur analytics platform is now collecting users sign-in and sign-out eventsWhen an alert is raised, it's now collected to our GitHub Ops platformLog files are now collected and persisted in our GitHub Ops platformThe nBold app and services are now handling gracefully process shutdown, on any platform. This technical update will helps us improve resiliency and our SLA. Reference Best Practice improvement: When defining security policies for a specific template, you can now select up to: 5 approvers per template.5 permanent owners per template.10 permanent members per template. doc: New platform contents in our Help Center ⛏ Data collection practices🏳 Domains to whitelist improvement: Admin and non-admin users can now sign-out of the app from any page.fixed: In Firefox browser, the non-admin user is unable to access the ‘Back to Home’ button.fixed: In Edge browser, the admin &amp; non-admin user is unable to access the ‘sign-in’ button.fixed: In Chrome browser, when non-admin user is accessing the ‘Back to Home’ button, user is redirected to a new tab. "},{"title":"[1.1.0] Codename \"Reiwa\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#110-codename-reiwa","content":"fixed: App store publishing Issue #1: App version is not as per guidelines. (Closed)Issue #2: Please elaborate the full description such that it states about the value proportion of the app. - (Closed)Issue #3: Emojis / special characters are not allowed in the manifest. (Closed)Issue #5: To have consistency in naming please rename the logout to sign out. (Closed)Issue #6: User is getting an error message after clicking on the links available in the “service status tab. (Closed)Issue #7: When user clicks on the GitHub link, user is navigation to 404 error page. (Closed)Issue #9: Please add a graceful message in the catalog” and “settings” tabs when non-admin users access the tab. (Closed) fixed: Non-admins accessing admin-restricted tabs (Catalog, Settings) are just seeing a blank page Now non-admins are presented with a clear message requesting them to log as an Office 365 administrator, and a &quot;back to home&quot; button ops: Approval button and Adoption tab are hidden for now in ppr/prdops: Set up pre-production environment - Ring 3.5 #228 New standalone + targeted packages fixed: The export / import feature is now hidden in UAT, PPR &amp; PRDfixed: Not Able to Create New Solution #216fixed: Issue with Account Creation - account in de-de #229 All languages and regions variants supported by Office 365, either with a proper translation, or through a fallback to english. security: prototype pollution in _.defaultsDeep Dependency: lodashUpgrade lodash to 4.17.14Upgrade lodash.template to 4.5.0 fixed: Tab configuration screen now has a default value and is enabled by defaultsecurity: disallow access to the constructor in templates to prevent RCE Dependency: handlebarUpgrade handlebar to 4.1.2 fixed: &lt;%&gt; in description in Teams Template creation forms #126 https://github.com/nboldhq/app-platform/issues/126improvement: Improved nBold Targeting Package 1st connection experience #207fix All tabs not replicated #155fixed: Events not raised in intercom #203fixed: Internationalization issues Locale issue : Issue with package language and App #204fr-fr : issue with french and english in same page #202fr-fr : packaging showing up settings and paramètres #200FR version : Talk to owners and open in home are not translated #187Language in teams desktop client is always en-us&quot;New Team&quot; form: Tooltips, Preview... improvement: My Teams cards &quot;Tags&quot; Now my teams cards have visual clues for: VisibilityArchivalClassification fixed: Login page Outside links in login menu to help and statusnBold version number in menu "},{"title":"[1.0.0] Codename \"Makuuchi\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#100-codename-makuuchi","content":"improvement: Behavioral Analytics Attributes Client-side implementationAttributes structure: OBJECT_PROPERTYAttributes sources: Environment: nBold App environment-based informationContext: Microsoft Teams context-based informationProfile: Microsoft Graph user profile-based information Attributes by stage (Additive): Anonymous: (If used outside of Teams) None Identified: (Using Teams context, before nBold login) { &quot;profile.intercomId&quot;: context.upn, // Not yet authenticated, use the upn &quot;profile.intercomEmail&quot;: context.upn, &quot;profile.locale&quot;: context.locale, &quot;profile.msTenantId&quot;: context.tid, &quot;profile.msUpn&quot;: context.upn, &quot;profile.theme&quot;: context.theme, &quot;profile.msUserId&quot;: context.userObjectId, &quot;profile.environment&quot;: env.environments.current, &quot;profile.version&quot;: env.environments.manifest.version } Authenticated: (Using Microsoft Graph Profile, after nBold login) { &quot;profile.intercomId&quot;: user.msEmail, // Once authenticated, use the email instead of UPN &quot;profile.intercomEmail&quot;: user.msEmail, &quot;profile.userId&quot;: user.id, &quot;profile.customerId&quot;: customer.id, &quot;profile.msEmail&quot;: user.msEmail, &quot;profile.tld&quot;: userTld, &quot;profile.name&quot;: user.msDisplayName, &quot;profile.msLocale&quot;: user.msPreferredLanguage, &quot;profile.license&quot;: user.userLicense, &quot;profile.msIsTenantAdmin&quot;: user.isMsTenantAdmin, &quot;company.companyId&quot;: customer.id, &quot;company.companyName&quot;: customer.msTenantInitialDomainName, &quot;company.msTenantId&quot;: customer.msTenantId, &quot;company.msTenantInitialDomain&quot;: customer.msTenantInitialDomainName, &quot;company.msTenantDefaultDomain&quot;: customer.msTenantDefaultDomainName, &quot;company.license&quot;: customer.customerLicense } Events Server-side implementation using the Intercom SDKEvents structure: OBJECT_ACTIONCaptured events and metadata: { request_created: { request_id: '', team_name: '', request_additionalMembers: '', request_additionalOwners: '', template_id: '', template_name: '' }, request_approved: { request_id: '' }, request_rejected: { request_id: '' }, request_processed: { request_id: '' }, request_error: { request_id: '' }, team_created: { team_id: '', team_name: '', template_id: '', template_name: '' } } improvement: &quot;My Teams&quot; deep links for &quot;💬 Talk to owners&quot; and &quot;👓 Open&quot; Now links are opened without opening a new browser window fixed: Issue with login in browser #186 refactor: Dynamic teams packages generation security: salestim.com is now a verified publisher domain Reference ops: Production App is now called &quot;nBold&quot; refactor: Update manifest to v1.5 schema Manifest Schema v1.5Added french localization file Apps Localization Added MPN id fixed: New Template in Business Solution creation #194 ops: Cosmos DB Throttling Management Each environment has its own configuration (connectionPolicy) MICROSOFT_COSMOSDB_MAXRETRYATTEMPTSONTHROTTLEDREQUESTS MICROSOFT_COSMOSDB_MAXRETRYWAITTIMEINSECONDS An Azure alert sends a notification to the Teams DevOps \\ Ops channel if more than 5 requests are throttled during the last 15min. improvement: Service account is now explicitely added as a member of the created teams, in addition to be an owner. This fix is a workaround to an issue while using the Microsoft Graph feat: Requests management See your requests with their status, progress, log and actions { 📮 saved: 'REQ_STA_SAVED', // Just saved after user request 🕐 preprocessing: 'REQ_STA_PREPROCESSING', // prepping things before approval (or direct processing) 🏁 approval: 'REQ_STA_APPROVAL', // Waiting for approval ⛔ rejected: 'REQ_STA_REJECTED', // Rejected ✅ approved: 'REQ_STA_APPROVED', // Approved 🕓 processing: 'REQ_STA_PROCESSING', // Provisionning is running 📦 processed: 'REQ_STA_PROCESSED', // Processed (Done) 🚩 error: 'REQ_STA_ERROR', // Error 🛸 Unknown: 'REQ_STA_UNKNOWN' // Unknown } fixed: Request card doesn't take into account the naming convention #112fixed: My Request showing all Teams request created with no approval in Pending #110fixed: No information for Teams Request with error, displayed in &quot;pending&quot; #111 improvement: Search for teams processing is now delayed by 500ms before each typing, to prevent multiple executions feat: My Teams are now sorted by display name (including in search results) fixed: Service Account processing #189 refactoring: All scheduled jobs are now using the CRON syntax Allowed fields: ┌────────────── second (optional) │ ┌──────────── minute │ │ ┌────────── hour │ │ │ ┌──────── day of month │ │ │ │ ┌────── month │ │ │ │ │ ┌──── day of week │ │ │ │ │ │ │ │ │ │ │ │ - - - - - * Allowed values | field | value | | ------------ | --------------------------------- | | second | 0-59 | | minute | 0-59 | | hour | 0-23 | | day of month | 1-31 | | month | 1-12 (or names) | | day of week | 0-7 (or names, 0 or 7 are sunday) | Using multiples values cron.schedule('1,2,4,5 - - - *', () =&gt; { console.log('running every minute 1, 2, 4 and 5') }) Using ranges cron.schedule('1-5 - - - *', () =&gt; { console.log('running every minute to 1 from 5') }) Using step values cron.schedule('*/2 - - - *', () =&gt; { console.log('running a task every two minutes') }) Using names cron.schedule('- - - January,September Sunday', () =&gt; { console.log('running on Sundays of January and September') }) Using short names cron.schedule('- - - Jan,Sep Sun', () =&gt; { console.log('running on Sundays of January and September') }) feat: nBold tab configuration page When adding nBold as a tab in a channel, a new configuration page is available Choose your tab name + &quot;save&quot; button status controlToS reminderNew design refactor: Improved performance for &quot;My Teams&quot; widget on homepage Now results are paginated by pages of 20 teamsSearch results are also paginated security: Enforced tokens security Encryption in transit and at rest for server-side services: Cosmos DB: Encryption at restRedis: We're using Redis AOF persistence mode. See Redis persistenceStored in Azure Storage: See Azure Store Encryption Client-side: Tokens are only used in memory, and never stored in cookies or browser local storage.Access to tokens via API is protected using Azure AD authentication. refactor: Enabled sign-in to nBold from a webpage outside of the Teams Clients Now, in addition to our stEntityId parameter, tabs urls have the following parameters dynamically provided by Teams clients: entityId subEntityId loginHint userPrincipalName userObjectId theme groupId tid locale See Tabs Context for reference doc: Help Center now have a new accentuation color aligned with Microsoft Teams branding refactor: All string-based messages are now externalized for internationalization Except for the &quot;Settings&quot; tabUsing: Server-side: i18nClient-side: custom i18n module improvement: Improve experience with &quot;enabled&quot; / &quot;disabled&quot; in catalog #133 improvement: Text truncating for teams and templates cards Templates cards texte are truncated to one single lineFully responsive, truncating is recalculated on window resize eventUsing Dollar Shave Club Shave Module fixed: The &quot;Sign-in&quot; button is now disabled while a login popin is opened top prevent multiple login windows to open. improvement: Audience Targeting Settings Now audience targeting settings have their own tab in template settingsRule editor has more space through a height of 200px doc: New Audience Targeting scenario: &quot;Domain-based targeting&quot; Domain-based targeting: users with @contoso.com or @contoso.fr in their domain name doc: New conditional naming convention scenario Use a specific suffix for users from a specific domain, use the domain name for the others fixed: Issue with &quot;male icone&quot; that appears only in client #151 improvement: Prevent user to login with a Microsoft Account and demand an Office 365 account. fixed: Intercom not displayed correctly #168 Error message: &quot;something's wrong&quot;, &quot;we're unable to load the messenger&quot; References: Difficulty accessing the support chatThe Intercom security check is now based ont the current user email instead of its UPN. "},{"title":"[0.9.11] Codename \"Juryo\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#0911-codename-juryo","content":"security: App Permissions and Scopes Automation and Bot now have different Microsoft Graph requested scopesEnforce &quot;Least Privilege&quot; principle to App by reducing required permissions See Microsoft Graph App Permissions / Scopes fixed: Double-Login Bug No more &quot;double-login&quot;. Fixed in all environments doc: Help Center Layout and Navigation Main contents width is now expanded to 86%You can now zoom on pictures Using @vuepress/plugin-medium-zoom doc: Audience Targeting Configurationsecurity: Fixed GitHub security alerts Dependency: concat-with-sourcemaps fixed: Upgraded to v1.1.0WS-2018-0100 fixed: Width issue in template creation #169 form width is now at 75% ops: UAT deployed with Azure DevOps Pipelinerefactor: Teams Apps Packaging One package for each supported languagePackages are now downloadable from the Help Center doc: GitHub Automated Security Fix &amp; environment isolation Secure Development ops: Static Code Analysis in BO Using Plato improvement: Templates in the Catalog now have a fixed height #128 Description and cloned team name are now truncated to fit into one single line ops: Automated GitHub Release Process (Bump, Commit, Push, Tag) using Gulpops: Updated Back-Office with docs, process, operations manual and logsrefactor: Globally Applying Standard JavaScript Style Guide See Enforced Rules improvement: Template Form Designfixed: Salestim Admin shown to regular users #113 Enforced security checks with additional server controlsSecurity improvement using the current user directory role for tabs catalog, reports and settings. { &quot;@odata.type&quot;: &quot;#microsoft.graph.directoryRole&quot;, &quot;id&quot;: &quot;OBFUSCATED&quot;, &quot;deletedDateTime&quot;: null, &quot;description&quot;: &quot;Company Administrator role has full access to perform any operation in the company scope.&quot;, &quot;displayName&quot;: &quot;Company Administrator&quot;, &quot;roleTemplateId&quot;: &quot;62e90394-69f5-4237-9190-012177145e10&quot; } improvement: Teams and Templates Search designimprovement: Templates Audience Targeting rules editor Audience targeting is now disabled by defaultThe rules eeditor is therefore hidden by default refactor: Help Center is now hosted in the app-platform repository Improved navigationAccess to CHANGELOG and KNOWNISSUES improvement: Better rendering of &quot;⚙ Settings \\ System Information&quot; contents Using Markdow-it instead of Showdown feat: Templates Audience Targeting A targeting rule can now be applied to each template to define who can use it, based on the user profile data.A &quot;Check Syntax&quot; button is available to test the rule against the current userRules could be defined using standard javascript expressions.Known Issue: Due to our caching mechanism, an update to the user profile may not be reflected immediately and therefore the targeting rule may not be applied immediately.Known Workaround: Login to nBold from a browser window in &quot;inprivate/incognito&quot; mode to force user profile refresh. ops: Persisted logs in UAT and PRD environments Using winston-daily-rotate-fileUAT and PRD default configuration { filename: 'ENV-salestim-%DATE%.log', dirname: 'OBFUSCATED', datePattern: 'YYYY-MM-DD-HH', zippedArchive: true, maxSize: '20m', maxFiles: '14d' } security: Removed some external / public CDN dependencies Purpose: Prevent issues with some customer web proxy / firewall / network configurationImproves security by preventing external code injectionManage dependencies lifecycle through NPM New NPM dependencies: SummernoteSprintfJsTyped.jsTLDjsBootstrapBootstrap-notifyPopper.jsEJSSelectizeSine-wavesJQuerySweetalertPaceAce-buildsDataTablesDatatables Bootstrap IntegrationFont AwesomeMicrosoft Teams JavaScript Library refactor: Externalized English &amp; French translations Using i18n module server &amp; client-sideApplying locales with EJS template engine, based on the browser languageInitialized &quot;i18n&quot; internal documentation refactor: Selective server resource public sharing with client Applies to node modules, locales and enums docs: Using classification in documents - 📢 PUBLIC: Anonymous access - 🔑 EXTERNAL: Authenticated access to external users (customers, partners...) - 🔐 PRIVATE: Internal-only - 💥 CONFIDENTIAL: Secret and privy docs: Internal and External Documents 🔐 Internal Documentation📢 External Documents "},{"title":"[0.9.10] Codename \"Makushita\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#0910-codename-makushita","content":"fixed: Opportunities channels are not createdfixed: Opportunities channels are not updatedfixed: Team owners unable to access planner plans Symptom: Team owners may have an error trying to access a related plan: Oops, something went wrong ... You do not have access to the requested entity. Date and Time Planner Version: 0.0.0.0 Root cause: Reference: Team / Group Owner has to be a member as well to access Planner and add Planner Tab in Teams Solution Requester is now also explicitely added as members (in addition to owner is the option is enabled)Requested owners are now also explicitely added as membersPermanent owners are now also explicitely added as members refactor: Tracking nBold build number as a pre-release version number Respects the semver Semantic Versioning MAJOR.MINOR.PATCH-PRERELEASE Using Gulp Bump to update package version feat: Targeted packages to use Teams App Policies A specific package is now available for each key featureTabs now has its own unique URL per environment to enable Intercom onboarding fixed: Template pictures disappear after a few days #124 Now template pictures are stored in an Azure Blob Storage instead of Redis CacheUsing Azure Storage SDK V10 for JavaScript "},{"title":"[0.9.9] Codename \"Sandanme\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#099-codename-sandanme","content":"improvement: Unique tabs URLS Each nBold tab now has it's own unique url /forms?stEntityId=io.salestim.automation.home/forms?stEntityId=io.salestim.automation.approval/forms?stEntityId=io.salestim.automation.catalog/forms?stEntityId=io.salestim.automation.analytics/forms?stEntityId=io.salestim.automation.settingshttps://help.salestim.com/salestimautomation/https://status.salestim.com fixed: Intercom - Multiple Company entities #121 Updated the Intercom company tracking code with company json payload: { &quot;company&quot;: { &quot;company_id&quot;: &quot;OBFUSCATED&quot;, &quot;name&quot;: &quot;OBFUSCATED&quot; } } [USER_HOSTNAME] is the user email full hostname (not only TLD) if available. For instance: { &quot;domain&quot;: &quot;onmicrosoft.com&quot;, &quot;hostname&quot;: &quot;TENANT_NAME.onmicrosoft.com&quot;, &quot;isIp&quot;: false, &quot;isValid&quot;: true, &quot;publicSuffix&quot;: &quot;com&quot;, &quot;subdomain&quot;: &quot;TENANT_NAME&quot;, &quot;tldExists&quot;: true } If email is not available, the user tenant id is used instead.References: Intercom Company Object fixed: Planner Tabs Provisioning With large teams, under some circumstances, planner tabs are not provisionnedWiki tabs are now fully ignored (as the default cloning feature creates new &quot;Wiki&quot; tabs automatically). So any Wiki tab in the source team will be cloned without configuration in the new one "},{"title":"[0.9.8] Codename \"Jonidan\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#098-codename-jonidan","content":"fixed: Requests history log stores in the request objectfixed: Random addGroupOwner error A random error appears sometimes when trying to add a group owner: { &quot;status&quot;: 401, &quot;message&quot;: &quot;Unauthorized&quot;, &quot;response&quot;:{ &quot;body&quot;: { &quot;error&quot;:{ &quot;code&quot;: &quot;invalidauthenticationtoken&quot;, &quot;message&quot;: &quot;CompactToken parsing failed with error code: 80049217&quot; } } } } Resolution: Exception catched and operation replayed improvement: Unauthorized access to admin-restricted tabs 118 Now the &quot;Unauthorized message&quot; has a specific button with a deeplink to the &quot;🏠 Home&quot; tabThe popin cannot be closed (nor by ESC keyboard, nor by the close button or &quot;x&quot; button)Deeplinks reference... improvement: Added &quot;Known Issues&quot; to the &quot;⚙ Settings&quot; tabfixed: updateGroup Logo exception if executed too early after cloning Delayed by 10 sec after cloning to prevent exception fixed: Documents (CHANGELOG, KNOWNISSUES...) rendering optimization Showdown options: { openLinksInNewWindow: true, ghCodeBlocks: true, // Enable support for GFM code block style. ghMentions: true, // Enables github @mentions, which link to the username mentioned ghMentionsLink: true, // Changes the link generated by @mentions. Showdown will replace {u} with the username. tasklists: true, // Enable support for GFM tasklists. emoji: true // Enable emoji support. Ex: this is a :smile: emoji } Showdown Flavor: converter.setFlavor('github') Showdown Syntax... "},{"title":"[0.9.7] Codename \"Jonokuchi\"​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#097-codename-jonokuchi","content":"refactor: Request processing is now fully asynchronousimprovement: Requests objects now have a message history to help error diagnosticrefactor: Externalize &quot;Bottleneck&quot; package configuration for MS Graph to env vars Options: maxConcurrent: How many jobs can be executing at the same time.minTime: How long to wait after launching a job before launching another one.highWater: How long can the queue be?strategy: Which strategy to use when the queue gets longer than the high water mark.penalty: The penalty value used by the BLOCK strategy.reservoir: How many jobs can be executed before the limiter stops executing jobs.reservoirRefreshInterval: Every reservoirRefreshInterval milliseconds, the reservoir value will be automatically updated to the value of reservoirRefreshAmount. reservoirRefreshAmount: The value to set reservoir to when reservoirRefreshInterval is in use.reservoirIncreaseInterval: Every reservoirIncreaseInterval milliseconds, the reservoir value will be automatically incremented by reservoirIncreaseAmount. reservoirIncreaseAmount: The increment applied to reservoir when reservoirIncreaseInterval is in use.reservoirIncreaseMaximum: The maximum value that reservoir can reach when reservoirIncreaseInterval is in use. Constructor Options References... fixed: Team Creation not working (ownership error) #108 This issue is due to a requirement from the MS Graph that expects the logged in user to be an owner of the team to operate on it. Ref... fixed: Sync delay between O365 Group owners and members with Team owners and members To prevent this out-of-sync issue, moved to beta endpoint: https://graph.microsoft.com/v1.0/groups/{groupId}/owners/$refReference... fixed: Preview info issue for Template with no default name and no naming convention #109 The default system templates now are using the new dynamic tagging convention based on the EJS templatinf syntax: https://ejs.co/ doc: Known issues A KNOWNISSUES.md file is now released as part of our release process in the &quot;dist&quot; folder doc: Added a known issue &quot;Missing teams in list all teams when creating a new template&quot;fixed: Cloned team selection filter Moved to the beta endpoint to use filters (only available through the beta endpoint): $filter=resourceProvisioningOptions/Any(x:x eq 'Team') References: List All Team endpointCall Beta Known issue &quot;Missing teams in list all teams when creating a new template&quot; fixed: Text preview not displayed when no info is entered with a Naming Convention configured Template #107 Now the previews for name, description and welcome message are shown even if the related fields are empty. "},{"title":"[0.9.6]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#096","content":"improvement: Tracking basic anonymous informations to streamline support operations. locale: Microsoft Teams Languagetid: Azure AD Tenant IDupn: Azure AD User UPNuid: Azure AD User IDstuid: nBold User IDsttid: nBold Customer IDstlic: nBold Licenseenvironment: Last Visited Environmentversion: Last Visited Version fixed: Salestim Admin shown to regular users #113 Now access is restricted to Office 365 global administrators improvement: Check Service Account Now service account check results are displayed in the Tim message popin fixed: Approver configured template not displayed for users in &quot;+Team&quot; #115fixed: Requester not added as a Team Owner #114fixed: Handle empty email convention error and email alias bad format Better error handling with end-user message fixed: Teams Creation not working (deleted team error) #108 Better error handling with end-user message improvement: Better exception handling Visibility of the underlying exception and technical infosDirect talk to nBold support through Intercom improvement: Empty / invalid email nickname used for team provisionning Better error handling + End-user messageThe error is logged into the related request improvement: Deleted / invalid cloned team used for team provisionning Better error handling + End-user messageThe error is logged into the related request feat: Try a template directly from the &quot;📚 Catalog&quot; tab N.B: You always have to choose the template explicitely (to see how it looks like from the template selection) "},{"title":"[0.9.5]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#095","content":"improvement: App package including tabs with emojisfixed: Sessions isolation enforcement #102 "},{"title":"[0.9.4]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#094","content":"feat: Check requirements for the service account A new &quot;Check Requirements&quot; button is available from the &quot;⚙ Settings \\ Service Account&quot; tab feat: Logout button from the &quot;⚙ Settings&quot; tabs N.B: Kills the nBold session, not AAD session used by Microsoft 365 fixed: the &quot;My Requests&quot; menu sometimes doesn't work properlyimprovement: No more popin flickering when loading the &quot;🏠 Home&quot; tabimprovement: User are notified when trying to enable a template without associated team to cloneimprovement: Template are automatically enabled / disabled if there is / no cloning team associatedfixed: Selecting a team to clone should not updates system templates names and descriptionfixed: Template &quot;Export&quot; button should be disabled in production before GAfixed: &quot;system and &quot;singleton&quot; template properties are lost after an updatefixed: parts to clone bad formatingfeat: Removed App status in UAT from service statusfeat: Added API status from service status "},{"title":"[0.9.3]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#093","content":"fixed: i18n Internationalization i18n is now dynamically configured per environmentAll ccurrently unsupported languages (DE, ES) are now defaulted to EN fixed: FR translations for the login pagefeat: &quot;System Information&quot; from the &quot;⚙ Settings&quot; tabfeat: &quot;Environment&quot; infos from the &quot;⚙ Settings \\ System Information&quot; tabfeat: &quot;Changelog&quot; infos from the &quot;⚙ Settings \\ System Information&quot; tab "},{"title":"[0.9.2]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#092","content":"fixed: Templates without cloned team are automatically disabled at creation / updateimprovement: System templates handling System templates are disabled by default as long as a cloning team has not been assignedSystem templates are hidden from end-user team request form except for &quot;Default&quot;The following fields cannot be updated in system templates: NameDescriptionApproval / Approval Team The following actions are not available from system templates: ExportDeleteEnable / Disable improvement: System templates versionning aligned with app versionningfixed: Not all enabled templates were visible in the team request form "},{"title":"[0.9.1]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#091","content":"doc: README-PUBLIC, LICENSE, THIRDPARTY and CHANGELOG in Dist folderfixed: Default templates appears disabled on first launch #103improvement: Services Account Login #104 When login for the first time the service account in the app, the app automatically refreshs just after the login so that Admin are seeing that the account is actually connected. fixed: Template info card update with false informations #105fixed: Preview of naming conventionsimprovement: Enabled Azure App Insights Live Metrics Application Insights Live Metrics allows to view telemetry like CPU and memory in real time. "},{"title":"[0.9.0]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#090","content":"improvement: Service account selection from the &quot;⚙ Settings&quot; tabfixed: Hide api beta features for rings &lt; 4feat: Delete a template "},{"title":"[0.8.6]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#086","content":"feat: Naming Conventions &amp; User tags Naming conventions for fields &quot;Name&quot;, &quot;Email&quot;, &quot;Description&quot; and &quot;Welcome Message&quot; now supports the following tags from the user profile: &lt;%= user.msDisplayName %&gt; &lt;%= user.msUPN %&gt; &lt;%= user.msEmail %&gt; &lt;%= user.msPreferredLanguage %&gt; &lt;%= user.msGivenName %&gt; &lt;%= user.msCountry %&gt; &lt;%= user.msCompanyName %&gt; &lt;%= user.msDepartment %&gt; &lt;%= user.msCity %&gt; &lt;%= user.msJobTitle %&gt; &lt;%= user.msSurname %&gt; &lt;%= user.msUsageLocation %&gt; Tagging follows the EJS syntax: &lt;%= TAG_NAME %&gt; feat: Email default domain The &quot;Email&quot; naming convention is now prefilled with the default tenant domain as a suffix fixed: Check disabled templates from request form Better error handling fixed: Requester as a team owner Better error handling fixed: Owners and members at creation Better error handling fixed: Permanent Owners and Members at creation Better error handling "},{"title":"[0.8.5]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#085","content":"feat: Naming Conventions &amp; Requests tags Naming conventions for fields &quot;Name&quot;, &quot;Email&quot;, &quot;Description&quot; and &quot;Welcome Message&quot; now supports the following tags from the request: &lt;%= request.team.name %&gt; &lt;%= request.team.description %&gt; &lt;%= request.team.welcomeMessage %&gt; &lt;%= request.template.name %&gt; &lt;%= request.request.requester.name %&gt; &lt;%= request.request.requester.email %&gt; Tagging follows the EJS syntax: &lt;%= TAG_NAME %&gt; fixed: Naming conventions with bad tags Now manages mispelled tags properly by skipping templating fixed: Apply team security / visibility Better error handling refactor: Manage parts to clone from template Performance optimization and better error handling feat: Group email MailNickName naming convention Admins can now configure an &quot;Email&quot; (of the underlying group) naming convention, distinct from the &quot;Name&quot; naming convention fixed: Template icon from team picture Fixed picture cache issue fixed: Template editing / save Fixed template cache issue improvement: Caching template pictures Template pictures are now cached for later use refactor: Dynamic Alpha / Beta features loading Alpha and Beta features are now enabled and visible only in rings lower than &quot;Production&quot; (= Development &amp; UAT) fixed: Enable / disable a team template Better error handling security: Configure 2FA for npm NPM dependency integration into our repository are now protected by 2FA authenticationReferences... fixed: Manage emoji in teams channels and tabs names Better error handlingFixed the messsage size issue with Microsoft Graph API refactor: Handle Graph throttling with bottleneck Calls to the Microsoft Graph are now scheduled and managed by the &quot;Bottleneck&quot; packagehttps://www.npmjs.com/package/bottleneck feat: Clone team logo for user requests Following a user manual request, cloned team now are provisioned with the picture coming from the source team feat: Apply team logo from account domain Following a CRM event, cloned team now are provisioned with the picture coming from the source team "},{"title":"[0.8.4]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#084","content":"feat: Website tab Cloning Tabs configuration of type &quot;Website&quot; from the source team are now clonedApplies only if &quot;Tab Cloning&quot; is enabled for a template feat: Planner tab Cloning Tabs configuration of type &quot;Planner&quot; from the source team are now clonedApplies only if &quot;Tab Cloning&quot; is enabled for a template "},{"title":"[0.8.3]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#083","content":"feat: Split Packages to bring more granular deployment capabilities "},{"title":"[0.8.2]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#082","content":"improvement: Instrumentation with Azure Application Insightstests: Check server-side and client-side implementationtests: Ensure environments segragation &amp; customers partition at cache and db level "},{"title":"[0.8.1]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#081","content":"refactor: Unified team cloning across AUT and SFsecurity: Customer segragation at cache and db levelrefactor: Instrumentation with App Insightsfixed: Updated destroy session urlimprovement: Added emoji for uber rides requestsimprovement: Added Uber Deeplinksrefactor: Updated client app idfixed: Fix SSL hosting for bot in PRDfeat: Bot with mockup datarefactor: Included bot modefixed: Fix undefined parameter using redisrefactor: Include crm integration in UAT and PRDtests: Use Azure Redis &amp; CosmosDB for DEVfixed: Fixed cosmosdb sdk &amp; emulator version mismatchfixed: Updated scripts for pm2fixed: native node ssl hostingsecurity: Export cert &amp; pfximprovement: Express SSL mgmtimprovement: Dynamic app port from env file "},{"title":"[0.8.0]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#080","content":"BREAKING CHANGE: Running from src frolderfeat: Enabled SF integration with team templatingfixed: Fix teams deeplinksfixed: Fix UAT &amp; PRD env varsrefactor: Updated STAUT tabs &amp; discovery featuresfeat: Added Discovery &quot;My Teams&quot; searchfeat: Added new templates iconsrefactor: Updated static tabs and manifests versions "},{"title":"[0.7.9]​","type":1,"pageTitle":"Changelog","url":"/CHANGELOG#079","content":"doc: Updated technical documentationfixed: Multi-crm configurationimprovement: Multiple environments and roles mgmtfeat: Added bot status endpoint "}]