"use strict";(self.webpackChunkdocs_hosting=self.webpackChunkdocs_hosting||[]).push([[973],{3545:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var a=n(87462),o=(n(67294),n(3905)),r=n(8209);const i={},s="Upgrading",d={unversionedId:"upgrading",id:"upgrading",title:"Upgrading",description:"Versioning strategy",source:"@site/contents/70-upgrading.md",sourceDirName:".",slug:"/upgrading",permalink:"/upgrading",draft:!1,editUrl:"https://github.com/nboldhq/docs/tree/main/contents/70-upgrading.md",tags:[],version:"current",sidebarPosition:70,frontMatter:{},sidebar:"autoSidebar",previous:{title:"Customize Microsoft Teams package",permalink:"/microsoft-teams-package"},next:{title:"Monitoring",permalink:"/monitoring"}},p={},l=[{value:"Versioning strategy",id:"versioning-strategy",level:2},{value:"Upgrading strategy",id:"upgrading-strategy",level:2},{value:"Live upgrade",id:"live-upgrade",level:3},{value:"Staged upgrade",id:"staged-upgrade",level:3}],u={toc:l},c="wrapper";function g(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"upgrading"},"Upgrading"),(0,o.kt)("h2",{id:"versioning-strategy"},"Versioning strategy"),(0,o.kt)("p",null,"nBold follows ",(0,o.kt)("a",{parentName:"p",href:"https://semver.org/"},"semantic versioning")," format: ",(0,o.kt)("inlineCode",{parentName:"p"},"MAJOR.MINOR.PATCH")),(0,o.kt)("p",null,"The default ",(0,o.kt)("inlineCode",{parentName:"p"},"latest")," tag of our Docker images always refers to the latest stable release tag. You can also pin your version, for instance:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"nboldhq/app-platform:v2")," pins the major version to ",(0,o.kt)("inlineCode",{parentName:"li"},"2")," but allows minor and patch version upgrades"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"nboldhq/app-platform:v2.2")," pins the minor version to ",(0,o.kt)("inlineCode",{parentName:"li"},"2.2")," but allows only patch upgrades")),(0,o.kt)("admonition",{title:"Backward compatibility",type:"warning"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"None of the functionality is backported to older versions"),". If you wish to get the latest bug fixes and security updates you need to upgrade to a newer version.")),(0,o.kt)("admonition",{title:"About database schema",type:"warning"},(0,o.kt)("p",{parentName:"admonition"},"Please note that ",(0,o.kt)("strong",{parentName:"p"},"database schema changes require running migrations when you're upgrading"),". However, we consider the schema\nas an internal API and therefore schema changes are in general not considered a breaking change.")),(0,o.kt)("p",null,"Version changes are documented in our ",(0,o.kt)("a",{parentName:"p",href:"../trust-center/CHANGELOG"},"Changelog"),"."),(0,o.kt)("h2",{id:"upgrading-strategy"},"Upgrading strategy"),(0,o.kt)("p",null,"nBold offers two default options to manage upgrades in your environment when we're publishing a new release."),(0,o.kt)("h3",{id:"live-upgrade"},"Live upgrade"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"live update")," mode is ideal for non-production environments (such as ",(0,o.kt)("inlineCode",{parentName:"p"},"QA"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"UAT"),", etc.) as you'll continuously receive all the new releases automatically.\nIn this mode, you'll receive all our updates (features, fixes, patches...) as soon as they're released."),(0,o.kt)("p",null,"Here's a sequence diagram of the live updates process:"),(0,o.kt)(r.G,{chart:"sequenceDiagram\n    autonumber\n\n    participant st as nBold<br />Continuous Deployment\n    participant acr as Your dedicated Azure<br />Container Registry\n    participant nonprod as Non-production<br />containers\n    \n    st->>acr: Publish updated image\n    acr->>nonprod: Triggers update Webhook\n    nonprod->>nonprod: Update image and restart",mdxType:"Mermaid"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Legend:")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"After a new release has been published and tested in our ",(0,o.kt)("inlineCode",{parentName:"li"},"nBold Cloud")," environments, our continuous deployment process pushes this updated image of the application directly to a dedicated Azure Container Registry (",(0,o.kt)("inlineCode",{parentName:"li"},"ACR"),") hosted in your own Azure tenant."),(0,o.kt)("li",{parentName:"ol"},"ACR automatically triggers a webhook for each container instance of nBold you're running"),(0,o.kt)("li",{parentName:"ol"},"All your containers are updated automatically.")),(0,o.kt)("h3",{id:"staged-upgrade"},"Staged upgrade"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"staged update")," mode is ideal for production environments as you'll be able to control the entire release process.\nIn this mode, you'll receive updates between 2 weeks / 1 month after the public release in our own ",(0,o.kt)("inlineCode",{parentName:"p"},"nBold Cloud")," environments, except for hotfixes and security patches that will be released at the same time as our own production environments."),(0,o.kt)("p",null,"Here's a sequence diagram of the staged updates process:"),(0,o.kt)(r.G,{chart:"sequenceDiagram\n    autonumber\n    \n    participant st as nBold\n    participant gcr as GitHub Container Registry\n    participant it as Your IT department\n    participant nonprod as Non-production<br />containers\n    participant prod as Production containers\n    \n    st->>gcr: Publish updated image\n    st->>it: Sending release notes\n    it->>it: Validate release notes and breaking changes\n    \n    it->>nonprod: Start non-production update process\n    nonprod->>gcr: Pull the updated image\n    nonprod->>nonprod: Update image and restart\n    it->>nonprod: Validates the update\n\n    it->>prod: Start production update process\n    prod->>gcr: Pull the updated image\n    prod->>prod: Update image and restart\n    it->>prod: Validates the update\n",mdxType:"Mermaid"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Legend:")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"After a new release has been published and tested in our ",(0,o.kt)("inlineCode",{parentName:"li"},"nBold Cloud")," environments, our continuous deployment process pushes this updated image of the application to our secured GitHub Container Registry (",(0,o.kt)("inlineCode",{parentName:"li"},"GCR"),")."),(0,o.kt)("li",{parentName:"ol"},"We're sending the release notes to all our ",(0,o.kt)("inlineCode",{parentName:"li"},"nBold Self-Hosted")," customers."),(0,o.kt)("li",{parentName:"ol"},"Your IT department validates the release notes and its breaking changes."),(0,o.kt)("li",{parentName:"ol"},"Once validated, your IT department starts the non-production update process"),(0,o.kt)("li",{parentName:"ol"},"The non-production containers are pulling the updated nBold image from our GCR"),(0,o.kt)("li",{parentName:"ol"},"Your non-production containers are updated and restarted."),(0,o.kt)("li",{parentName:"ol"},"Your IT department validates the update in non-production."),(0,o.kt)("li",{parentName:"ol"},"Once validated in non-production, your IT department starts the production update process"),(0,o.kt)("li",{parentName:"ol"},"The production containers are pulling the updated nBold image from our GCR"),(0,o.kt)("li",{parentName:"ol"},"Your production containers are updated and restarted."),(0,o.kt)("li",{parentName:"ol"},"Your IT department validates the update in production.")),(0,o.kt)("admonition",{title:"Specific technical and organizational constraints?",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"We\u2019re of course available to discuss with you what would be the best solution that encompass your specific technical and organizational constraints.")))}g.isMDXComponent=!0}}]);